<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IP Ban Example</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
    <h1>Welcome to the Chat Application</h1>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyClD-3xfEnSFwoGdGCbkJMce36UkDLeVnE",
            authDomain: "realtimeaccountcreation.firebaseapp.com",
            databaseURL: "https://realtimeaccountcreation-default-rtdb.firebaseio.com",
            projectId: "realtimeaccountcreation",
            storageBucket: "realtimeaccountcreation.appspot.com",
            messagingSenderId: "658896933674",
            appId: "1:658896933674:web:3275d0678c39b54e8f8453"
        };
        
        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Fetch user's IP address (using a placeholder function here)
        async function getUserIp() {
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            return data.ip;
        }

        async function checkIfIpBanned() {
            const userIp = await getUserIp();
            const bannedIpsRef = db.ref('banned_ips/' + userIp);
            
            // Check if the user's IP is banned
            bannedIpsRef.get().then((snapshot) => {
                if (snapshot.exists()) {
                    alert("Access Denied: Your IP is banned.");
                    window.location.href = "restricted.html"; // Redirect banned users
                } else {
                    console.log("IP not banned. Access granted.");
                }
            });
        }

        // Check IP on page load
        checkIfIpBanned();
    </script>
</body>
</html>
