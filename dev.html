<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Delete Messages from Firebase</title>
</head>
<body>
  <h1>Delete Messages from Firebase</h1>

  <div id="message-list"></div>

  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAe0hXfAJ0ijKNiGgAVfv4zG1ngADF2E4c",
      authDomain: "chatapp-90c78.firebaseapp.com",
      databaseURL: "https://chatapp-90c78-default-rtdb.firebaseio.com",
      projectId: "chatapp-90c78",
      storageBucket: "chatapp-90c78.appspot.com",
      messagingSenderId: "195015101932",
      appId: "1:195015101932:web:f352296f341c58458a84c9"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Reference to the messages in the Realtime Database
    const messagesRef = db.ref('/messages');

    // Function to render messages in the DOM
    function renderMessages(snapshot) {
      const messageList = document.getElementById('message-list');
      messageList.innerHTML = '';  // Clear the message list

      // Iterate over each message in the snapshot
      snapshot.forEach(childSnapshot => {
        const key = childSnapshot.key;
        const messageData = childSnapshot.val(); // Get the message data

        // Create a div for each message
        const messageItem = document.createElement('div');
        messageItem.innerHTML = `
          <p><strong>${messageData.text || 'No text available'}</strong></p>
          <button onclick="deleteMessage('${key}')">Delete</button>
        `;
        messageList.appendChild(messageItem);
      });
    }

    // Fetch and display messages from Firebase Realtime Database
    messagesRef.on('value', renderMessages);

    // Function to delete a message by its key
    function deleteMessage(messageKey) {
      if (confirm('Are you sure you want to delete this message?')) {
        messagesRef.child(messageKey).remove()
          .then(() => {
            alert('Message deleted successfully');
          })
          .catch(error => {
            console.error('Error deleting message:', error);
          });
      }
    }
  </script>
</body>
</html>
