/*! For license information please see launcher-43517508e787f9ead384.js.LICENSE.txt */
(()=>{var e={6438:function(e){var t;"undefined"!=typeof self&&self,t=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{EFeatureProvider:()=>be,FeatureFactory:()=>we,GrowthBookFeatureProvider:()=>Ee});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,o={revert:function(){}},s=new Map,a=new Set;function c(e){var t=s.get(e);return t||(t={element:e,attributes:{}},s.set(e,t)),t}function u(e,t,n,r,i){var o=n(e),s={isDirty:!1,originalValue:o,virtualValue:o,mutations:[],el:e,observer:new MutationObserver((function(){var t=n(e);t!==s.virtualValue&&(s.originalValue=t,i(s))})),mutationRunner:i,setValue:r,getCurrentValue:n};return s.observer.observe(e,function(e){return"html"===e?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[e]}}(t)),s}function l(e,t){var n=t.getCurrentValue(t.el);t.virtualValue=e,e&&"string"!=typeof e?n&&e.parentNode===n.parentNode&&e.insertBeforeNode===n.insertBeforeNode||(t.isDirty=!0,R()):e!==n&&(t.isDirty=!0,R())}function d(e){var t=e.originalValue;e.mutations.forEach((function(e){return t=e.mutate(t)})),l(function(e){return b||(b=document.createElement("div")),b.innerHTML=e,b.innerHTML}(t),e)}function p(e){var t=new Set(e.originalValue.split(/\s+/).filter(Boolean));e.mutations.forEach((function(e){return e.mutate(t)})),l(Array.from(t).filter(Boolean).join(" "),e)}function f(e){var t=e.originalValue;e.mutations.forEach((function(e){return t=e.mutate(t)})),l(t,e)}function h(e){var t=e.originalValue;e.mutations.forEach((function(e){var n=function(e){var t=e.parentSelector,n=e.insertBeforeSelector,r=document.querySelector(t);if(!r)return null;var i=n?document.querySelector(n):null;return n&&!i?null:{parentNode:r,insertBeforeNode:i}}(e.mutate());t=n||t})),l(t,e)}var g=function(e){return e.innerHTML},m=function(e,t){return e.innerHTML=t};function _(e){var t=c(e);return t.html||(t.html=u(e,"html",g,m,d)),t.html}var v=function(e){return{parentNode:e.parentElement,insertBeforeNode:e.nextElementSibling}},y=function(e,t){t.parentNode.insertBefore(e,t.insertBeforeNode)};function S(e){var t=c(e);return t.position||(t.position=u(e,"position",v,y,h)),t.position}var b,E=function(e,t){return t?e.className=t:e.removeAttribute("class")},w=function(e){return e.className};function T(e){var t=c(e);return t.classes||(t.classes=u(e,"class",w,E,p)),t.classes}function I(e,t){var n,r=c(e);return r.attributes[t]||(r.attributes[t]=u(e,t,(n=t,function(e){var t;return null!=(t=e.getAttribute(n))?t:null}),function(e){return function(t,n){return null!==n?t.setAttribute(e,n):t.removeAttribute(e)}}(t),f)),r.attributes[t]}function x(e,t,n){if(n.isDirty){n.isDirty=!1;var r=n.virtualValue;n.mutations.length||function(e,t){var n,r,i=s.get(e);if(i)if("html"===t)null==(n=i.html)||null==(r=n.observer)||r.disconnect(),delete i.html;else if("class"===t){var o,a;null==(o=i.classes)||null==(a=o.observer)||a.disconnect(),delete i.classes}else if("position"===t){var c,u;null==(c=i.position)||null==(u=c.observer)||u.disconnect(),delete i.position}else{var l,d,p;null==(l=i.attributes)||null==(d=l[t])||null==(p=d.observer)||p.disconnect(),delete i.attributes[t]}}(e,t),n.setValue(e,r)}}var k,C=!1;function A(e,t){e.html&&x(t,"html",e.html),e.classes&&x(t,"class",e.classes),e.position&&x(t,"position",e.position),Object.keys(e.attributes).forEach((function(n){x(t,n,e.attributes[n])}))}function F(){C=!1,s.forEach(A)}function R(){C||(C=!0,requestAnimationFrame(F))}function O(e,t){var n=null;if("html"===e.kind?n=_(t):"class"===e.kind?n=T(t):"attribute"===e.kind?n=I(t,e.attribute):"position"===e.kind&&(n=S(t)),n){var r=n.mutations.indexOf(e);-1!==r&&n.mutations.splice(r,1),n.mutationRunner(n)}}function P(e){var t=new Set(e.elements),n=new Set;document.querySelectorAll(e.selector).forEach((function(r){n.add(r),t.has(r)||(e.elements.add(r),function(e,t){var n=null;"html"===e.kind?n=_(t):"class"===e.kind?n=T(t):"attribute"===e.kind?n=I(t,e.attribute):"position"===e.kind&&(n=S(t)),n&&(n.mutations.push(e),n.mutationRunner(n))}(e,r))})),t.forEach((function(t){n.has(t)||(e.elements.delete(t),O(e,t))}))}function M(){a.forEach(P)}function N(e){return"undefined"==typeof document?o:(a.add(e),P(e),{revert:function(){var t;(t=e).elements.forEach((function(e){return O(t,e)})),t.elements.clear(),a.delete(t)}})}function D(e,t){return N({kind:"html",elements:new Set,mutate:t,selector:e})}function L(e,t){return N({kind:"position",elements:new Set,mutate:t,selector:e})}function U(e,t){return N({kind:"class",elements:new Set,mutate:t,selector:e})}function B(e,t,n){return i.test(t)?"class"===t||"className"===t?U(e,(function(e){var t=n(Array.from(e).join(" "));e.clear(),t&&t.split(/\s+/g).filter(Boolean).forEach((function(t){return e.add(t)}))})):N({kind:"attribute",attribute:t,elements:new Set,mutate:n,selector:e}):o}"undefined"!=typeof document&&(k||(k=new MutationObserver((function(){M()}))),M(),k.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}));const j=function(e){var t=e.selector,n=e.action,r=e.value,i=e.attribute,s=e.parentSelector,a=e.insertBeforeSelector;if("html"===i){if("append"===n)return D(t,(function(e){return e+(null!=r?r:"")}));if("set"===n)return D(t,(function(){return null!=r?r:""}))}else if("class"===i){if("append"===n)return U(t,(function(e){r&&e.add(r)}));if("remove"===n)return U(t,(function(e){r&&e.delete(r)}));if("set"===n)return U(t,(function(e){e.clear(),r&&e.add(r)}))}else if("position"===i){if("set"===n&&s)return L(t,(function(){return{insertBeforeSelector:a,parentSelector:s}}))}else{if("append"===n)return B(t,i,(function(e){return null!==e?e+(null!=r?r:""):null!=r?r:""}));if("set"===n)return B(t,i,(function(){return null!=r?r:""}));if("remove"===n)return B(t,i,(function(){return null}))}return o};function H(e){let t=2166136261;const n=e.length;for(let r=0;r<n;r++)t^=e.charCodeAt(r),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}function W(e,t,n){return 2===n?H(H(e+t)+"")%1e4/1e4:1===n?H(t+e)%1e3/1e3:null}function V(e,t){return e>=t[0]&&e<t[1]}function q(e){try{const t=e.replace(/([^\\])\//g,"$1\\/");return new RegExp(t)}catch(e){return}}function K(e,t,n){try{const r=new URL(e,"https://_");if("regex"===t){const e=q(n);return!!e&&(e.test(r.href)||e.test(r.href.substring(r.origin.length)))}return"simple"===t&&function(e,t){try{const n=new URL(t.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),r=[[e.host,n.host,!1],[e.pathname,n.pathname,!0]];return n.hash&&r.push([e.hash,n.hash,!1]),n.searchParams.forEach(((t,n)=>{r.push([e.searchParams.get(n)||"",t,!1])})),!r.some((e=>!function(e,t,n){try{let r=t.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return n&&(r="\\/?"+r.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+r+"$","i").test(e)}catch(e){return!1}}(e[0],e[1],e[2])))}catch(e){return!1}}(r,n)}catch(e){return!1}}const $=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0)));async function z(e,t,n){if(t=t||"",!(n=n||globalThis.crypto&&globalThis.crypto.subtle))throw new Error("No SubtleCrypto implementation found");try{const r=await n.importKey("raw",$(t),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[i,o]=e.split("."),s=await n.decrypt({name:"AES-CBC",iv:$(i)},r,$(o));return(new TextDecoder).decode(s)}catch(e){throw new Error("Failed to decrypt")}}function G(e){const t=e.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===t.length&&t.push("~"),t.map((e=>e.match(/^[0-9]+$/)?e.padStart(5," "):e)).join("-")}const J={};function Y(e,t){if("$or"in t)return ne(e,t.$or);if("$nor"in t)return!ne(e,t.$nor);if("$and"in t)return function(e,t){for(let n=0;n<t.length;n++)if(!Y(e,t[n]))return!1;return!0}(e,t.$and);if("$not"in t)return!Y(e,t.$not);for(const[n,r]of Object.entries(t))if(!Z(r,X(e,n)))return!1;return!0}function X(e,t){const n=t.split(".");let r=e;for(let e=0;e<n.length;e++){if(!r||"object"!=typeof r||!(n[e]in r))return null;r=r[n[e]]}return r}function Z(e,t){if("string"==typeof e)return t+""===e;if("number"==typeof e)return 1*t===e;if("boolean"==typeof e)return!!t===e;if(null===e)return null===t;if(Array.isArray(e)||!Q(e))return JSON.stringify(t)===JSON.stringify(e);for(const n in e)if(!te(n,t,e[n]))return!1;return!0}function Q(e){const t=Object.keys(e);return t.length>0&&t.filter((e=>"$"===e[0])).length===t.length}function ee(e,t){return Array.isArray(e)?e.some((e=>t.includes(e))):t.includes(e)}function te(e,t,n){switch(e){case"$veq":return G(t)===G(n);case"$vne":return G(t)!==G(n);case"$vgt":return G(t)>G(n);case"$vgte":return G(t)>=G(n);case"$vlt":return G(t)<G(n);case"$vlte":return G(t)<=G(n);case"$eq":return t===n;case"$ne":return t!==n;case"$lt":return t<n;case"$lte":return t<=n;case"$gt":return t>n;case"$gte":return t>=n;case"$exists":return n?null!==t:null===t;case"$in":return!!Array.isArray(n)&&ee(t,n);case"$nin":return!!Array.isArray(n)&&!ee(t,n);case"$not":return!Z(n,t);case"$size":return!!Array.isArray(t)&&Z(n,t.length);case"$elemMatch":return function(e,t){if(!Array.isArray(e))return!1;const n=Q(t)?e=>Z(t,e):e=>Y(e,t);for(let t=0;t<e.length;t++)if(e[t]&&n(e[t]))return!0;return!1}(t,n);case"$all":if(!Array.isArray(t))return!1;for(let e=0;e<n.length;e++){let r=!1;for(let i=0;i<t.length;i++)if(Z(n[e],t[i])){r=!0;break}if(!r)return!1}return!0;case"$regex":try{return(r=n,J[r]||(J[r]=new RegExp(r.replace(/([^\\])\//g,"$1\\/"))),J[r]).test(t)}catch(e){return!1}case"$type":return function(e){if(null===e)return"null";if(Array.isArray(e))return"array";const t=typeof e;return["string","number","boolean","object","undefined"].includes(t)?t:"unknown"}(t)===n;default:return!1}var r}function ne(e,t){if(!t.length)return!0;for(let n=0;n<t.length;n++)if(Y(e,t[n]))return!0;return!1}const re={staleTTL:6e4,cacheKey:"gbFeaturesCache",backgroundSync:!0},ie={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource};try{globalThis.localStorage&&(ie.localStorage=globalThis.localStorage)}catch(e){}const oe=new Map;let se=!1;const ae=new Map,ce=new Map,ue=new Map,le=new Set;async function de(){try{if(!ie.localStorage)return;await ie.localStorage.setItem(re.cacheKey,JSON.stringify(Array.from(ae.entries())))}catch(e){}}function pe(e){const[t,n]=e.getApiInfo();return["".concat(t,"||").concat(n),t,n]}function fe(e,t){const n=t.dateUpdated||"",r=new Date(Date.now()+re.staleTTL),i=ae.get(e);if(i&&n&&i.version===n)return i.staleAt=r,void de();ae.set(e,{data:t,version:n,staleAt:r}),de();const o=oe.get(e);o&&o.forEach((e=>he(e,t)))}async function he(e,t){await(t.encryptedExperiments?e.setEncryptedExperiments(t.encryptedExperiments,void 0,ie.SubtleCrypto):e.setExperiments(t.experiments||e.getExperiments())),await(t.encryptedFeatures?e.setEncryptedFeatures(t.encryptedFeatures,void 0,ie.SubtleCrypto):e.setFeatures(t.features||e.getFeatures()))}async function ge(e){const[t,n,r]=pe(e),i=n+"/api/features/"+r;let o=ce.get(t);return o||(o=ie.fetch(i).then((e=>("enabled"===e.headers.get("x-sse-support")&&le.add(t),e.json()))).then((n=>(fe(t,n),me(e),ce.delete(t),n))).catch((e=>(ce.delete(t),Promise.resolve({})))),ce.set(t,o)),await o}function me(e){const[t,n,r]=pe(e);if(re.backgroundSync&&le.has(t)&&ie.EventSource){if(ue.has(t))return;const e={src:null,cb:i=>{try{const n=JSON.parse(i.data);fe(t,n),e.errors=0}catch(t){_e(e,n,r)}},errors:0};ue.set(t,e),ve(e,n,r)}}function _e(e,t,n){if(e.errors++,e.errors>3||e.src&&2===e.src.readyState){const r=Math.pow(3,e.errors-3)*(1e3+1e3*Math.random());(function(e){e.src&&(e.src.onopen=null,e.src.onerror=null,e.src.close(),e.src=null)})(e),setTimeout((()=>{ve(e,t,n)}),Math.min(r,3e5))}}function ve(e,t,n){e.src=new ie.EventSource("".concat(t,"/sub/").concat(n)),e.src.addEventListener("features",e.cb),e.src.onerror=()=>{_e(e,t,n)},e.src.onopen=()=>{e.errors=0}}const ye="undefined"!=typeof window&&"undefined"!=typeof document;class Se{constructor(e){e=e||{},this._ctx=this.context=e,this._renderer=null,this._trackedExperiments=new Set,this._trackedFeatures={},this.debug=!1,this._subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.ready=!1,this._assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,e.features&&(this.ready=!0),ye&&e.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),e.experiments&&(this.ready=!0,this._updateAllAutoExperiments()),e.clientKey&&this._refresh({},!0,!1)}async loadFeatures(e){await this._refresh(e,!0,!0),e&&e.autoRefresh&&function(e){const[t]=pe(e),n=oe.get(t)||new Set;n.add(e),oe.set(t,n)}(this)}async refreshFeatures(e){await this._refresh(e,!1,!0)}getApiInfo(){return[(this._ctx.apiHost||"https://cdn.growthbook.io").replace(/\/*$/,""),this._ctx.clientKey||""]}async _refresh(e,t,n){if(e=e||{},!this._ctx.clientKey)throw new Error("Missing clientKey");await async function(e,t,n,r,i){const o=await async function(e,t,n,r){const[i]=pe(e),o=new Date;await async function(){if(!se){se=!0;try{if(ie.localStorage){const e=await ie.localStorage.getItem(re.cacheKey);if(e){const t=JSON.parse(e);t&&Array.isArray(t)&&t.forEach((e=>{let[t,n]=e;ae.set(t,{...n,staleAt:new Date(n.staleAt)})}))}}}catch(e){}}}();const s=ae.get(i);return s&&!r&&(t||s.staleAt>o)?(s.staleAt<o?ge(e):me(e),s.data):await function(e,t){return new Promise((n=>{let r,i=!1;const o=e=>{i||(i=!0,r&&clearTimeout(r),n(e||null))};t&&(r=setTimeout((()=>o()),t)),e.then((e=>o(e))).catch((()=>o()))}))}(ge(e),n)}(e,r,t,n);i&&o&&await he(e,o)}(this,e.timeout,e.skipCache||this._ctx.enableDevMode,t,n)}_render(){this._renderer&&this._renderer()}setFeatures(e){this._ctx.features=e,this.ready=!0,this._render()}async setEncryptedFeatures(e,t,n){const r=await z(e,t||this._ctx.decryptionKey,n);this.setFeatures(JSON.parse(r))}setExperiments(e){this._ctx.experiments=e,this.ready=!0,this._updateAllAutoExperiments()}async setEncryptedExperiments(e,t,n){const r=await z(e,t||this._ctx.decryptionKey,n);this.setExperiments(JSON.parse(r))}setAttributes(e){this._ctx.attributes=e,this._render(),this._updateAllAutoExperiments()}setAttributeOverrides(e){this._attributeOverrides=e,this._render(),this._updateAllAutoExperiments()}setForcedVariations(e){this._ctx.forcedVariations=e||{},this._render(),this._updateAllAutoExperiments()}setForcedFeatures(e){this._forcedFeatureValues=e,this._render()}setURL(e){this._ctx.url=e,this._updateAllAutoExperiments(!0)}getAttributes(){return{...this._ctx.attributes,...this._attributeOverrides}}getFeatures(){return this._ctx.features||{}}getExperiments(){return this._ctx.experiments||[]}subscribe(e){return this._subscriptions.add(e),()=>{this._subscriptions.delete(e)}}getAllResults(){return new Map(this._assigned)}destroy(){var e;this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),e=this,oe.forEach((t=>t.delete(e))),ye&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach((e=>{e.undo()})),this._activeAutoExperiments.clear()}setRenderer(e){this._renderer=e}forceVariation(e,t){this._ctx.forcedVariations=this._ctx.forcedVariations||{},this._ctx.forcedVariations[e]=t,this._render()}run(e){const t=this._run(e,null);return this._fireSubscriptions(e,t),t}triggerExperiment(e){if(!this._ctx.experiments)return null;const t=this._ctx.experiments.find((t=>t.key===e));return t&&t.manual?this._runAutoExperiment(t,!0):null}_runAutoExperiment(e,t,n){const r=e.key,i=this._activeAutoExperiments.get(r);if(e.manual&&!t&&!i)return null;const o=this.run(e),s=JSON.stringify(o.value);if(!n&&o.inExperiment&&i&&i.valueHash===s)return o;if(i&&this._undoActiveAutoExperiment(r),o.inExperiment){const t=this._applyDOMChanges(o.value);t&&this._activeAutoExperiments.set(e.key,{undo:t,valueHash:s})}return o}_undoActiveAutoExperiment(e){const t=this._activeAutoExperiments.get(e);t&&(t.undo(),this._activeAutoExperiments.delete(e))}_updateAllAutoExperiments(e){const t=this._ctx.experiments||[],n=new Set(t.map((e=>e.key)));this._activeAutoExperiments.forEach(((e,t)=>{n.has(t)||(e.undo(),this._activeAutoExperiments.delete(t))})),t.forEach((t=>{this._runAutoExperiment(t,!1,e)}))}_fireSubscriptions(e,t){const n=e.key,r=this._assigned.get(n);r&&r.result.inExperiment===t.inExperiment&&r.result.variationId===t.variationId||(this._assigned.set(n,{experiment:e,result:t}),this._subscriptions.forEach((n=>{try{n(e,t)}catch(e){}})))}_trackFeatureUsage(e,t){if("override"===t.source)return;const n=JSON.stringify(t.value);if(this._trackedFeatures[e]!==n){if(this._trackedFeatures[e]=n,this._ctx.onFeatureUsage)try{this._ctx.onFeatureUsage(e,t)}catch(e){}ye&&window.fetch&&(this._rtQueue.push({key:e,on:t.on}),this._rtTimer||(this._rtTimer=window.setTimeout((()=>{this._rtTimer=0;const e=[...this._rtQueue];this._rtQueue=[],this._ctx.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this._ctx.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(e))),{cache:"no-cache",mode:"no-cors"}).catch((()=>{}))}),this._ctx.realtimeInterval||2e3)))}}_getFeatureResult(e,t,n,r,i,o){const s={value:t,on:!!t,off:!t,source:n,ruleId:r||""};return i&&(s.experiment=i),o&&(s.experimentResult=o),this._trackFeatureUsage(e,s),s}isOn(e){return this.evalFeature(e).on}isOff(e){return this.evalFeature(e).off}getFeatureValue(e,t){const n=this.evalFeature(e).value;return null===n?t:n}feature(e){return this.evalFeature(e)}evalFeature(e){if(this._forcedFeatureValues.has(e))return this._getFeatureResult(e,this._forcedFeatureValues.get(e),"override");if(!this._ctx.features||!this._ctx.features[e])return this._getFeatureResult(e,null,"unknownFeature");const t=this._ctx.features[e];if(t.rules)for(const n of t.rules){if(n.condition&&!this._conditionPasses(n.condition))continue;if(n.filters&&this._isFilteredOut(n.filters))continue;if("force"in n){if(!this._isIncludedInRollout(n.seed||e,n.hashAttribute,n.range,n.coverage,n.hashVersion))continue;return n.tracks&&n.tracks.forEach((e=>{this._track(e.experiment,e.result)})),this._getFeatureResult(e,n.force,"force",n.id)}if(!n.variations)continue;const t={variations:n.variations,key:n.key||e};"coverage"in n&&(t.coverage=n.coverage),n.weights&&(t.weights=n.weights),n.hashAttribute&&(t.hashAttribute=n.hashAttribute),n.namespace&&(t.namespace=n.namespace),n.meta&&(t.meta=n.meta),n.ranges&&(t.ranges=n.ranges),n.name&&(t.name=n.name),n.phase&&(t.phase=n.phase),n.seed&&(t.seed=n.seed),n.hashVersion&&(t.hashVersion=n.hashVersion),n.filters&&(t.filters=n.filters);const r=this._run(t,e);if(this._fireSubscriptions(t,r),r.inExperiment&&!r.passthrough)return this._getFeatureResult(e,r.value,"experiment",n.id,t,r)}return this._getFeatureResult(e,void 0===t.defaultValue?null:t.defaultValue,"defaultValue")}_isIncludedInRollout(e,t,n,r,i){if(!n&&void 0===r)return!0;const{hashValue:o}=this._getHashAttribute(t);if(!o)return!1;const s=W(e,o,i||1);return null!==s&&(n?V(s,n):void 0===r||s<=r)}_conditionPasses(e){return Y(this.getAttributes(),e)}_isFilteredOut(e){return e.some((e=>{const{hashValue:t}=this._getHashAttribute(e.attribute);if(!t)return!0;const n=W(e.seed,t,e.hashVersion||2);return null===n||!e.ranges.some((e=>V(n,e)))}))}_run(e,t){const n=e.key,r=e.variations.length;if(r<2)return this._getResult(e,-1,!1,t);if(!1===this._ctx.enabled)return this._getResult(e,-1,!1,t);e=this._mergeOverrides(e);const i=function(e,t,n){if(!t)return null;const r=t.split("?")[1];if(!r)return null;const i=r.replace(/#.*/,"").split("&").map((e=>e.split("=",2))).filter((t=>{let[n]=t;return n===e})).map((e=>{let[,t]=e;return parseInt(t)}));return i.length>0&&i[0]>=0&&i[0]<n?i[0]:null}(n,this._getContextUrl(),r);if(null!==i)return this._getResult(e,i,!1,t);if(this._ctx.forcedVariations&&n in this._ctx.forcedVariations){const r=this._ctx.forcedVariations[n];return this._getResult(e,r,!1,t)}if("draft"===e.status||!1===e.active)return this._getResult(e,-1,!1,t);const{hashValue:o}=this._getHashAttribute(e.hashAttribute);if(!o)return this._getResult(e,-1,!1,t);if(e.filters){if(this._isFilteredOut(e.filters))return this._getResult(e,-1,!1,t)}else if(e.namespace&&!function(e,t){const n=W("__"+t[0],e,1);return null!==n&&n>=t[1]&&n<t[2]}(o,e.namespace))return this._getResult(e,-1,!1,t);if(e.include&&!function(e){try{return e()}catch(e){return!1}}(e.include))return this._getResult(e,-1,!1,t);if(e.condition&&!this._conditionPasses(e.condition))return this._getResult(e,-1,!1,t);if(e.groups&&!this._hasGroupOverlap(e.groups))return this._getResult(e,-1,!1,t);if(e.url&&!this._urlIsValid(e.url))return this._getResult(e,-1,!1,t);if(e.urlPatterns&&!function(e,t){if(!t.length)return!1;let n=!1,r=!1;for(let i=0;i<t.length;i++){const o=K(e,t[i].type,t[i].pattern);if(!1===t[i].include){if(o)return!1}else n=!0,o&&(r=!0)}return r||!n}(this._getContextUrl(),e.urlPatterns))return this._getResult(e,-1,!1,t);const s=W(e.seed||n,o,e.hashVersion||1);if(null===s)return this._getResult(e,-1,!1,t);const a=function(e,t){for(let n=0;n<t.length;n++)if(V(e,t[n]))return n;return-1}(s,e.ranges||function(e,t,n){(t=void 0===t?1:t)<0?t=0:t>1&&(t=1);const r=(i=e)<=0?[]:new Array(i).fill(1/i);var i;(n=n||r).length!==e&&(n=r);const o=n.reduce(((e,t)=>t+e),0);(o<.99||o>1.01)&&(n=r);let s=0;return n.map((e=>{const n=s;return s+=e,[n,n+t*e]}))}(r,void 0===e.coverage?1:e.coverage,e.weights));if(a<0)return this._getResult(e,-1,!1,t);if("force"in e)return this._getResult(e,void 0===e.force?-1:e.force,!1,t);if(this._ctx.qaMode)return this._getResult(e,-1,!1,t);if("stopped"===e.status)return this._getResult(e,-1,!1,t);const c=this._getResult(e,a,!0,t,s);return this._track(e,c),c}log(e,t){this.debug&&this._ctx.log&&this._ctx.log(e,t)}_track(e,t){if(!this._ctx.trackingCallback)return;const n=e.key,r=t.hashAttribute+t.hashValue+n+t.variationId;if(!this._trackedExperiments.has(r)){this._trackedExperiments.add(r);try{this._ctx.trackingCallback(e,t)}catch(e){}}}_mergeOverrides(e){const t=e.key,n=this._ctx.overrides;return n&&n[t]&&"string"==typeof(e=Object.assign({},e,n[t])).url&&(e.url=q(e.url)),e}_getHashAttribute(e){const t=e||"id";let n="";return this._attributeOverrides[t]?n=this._attributeOverrides[t]:this._ctx.attributes?n=this._ctx.attributes[t]||"":this._ctx.user&&(n=this._ctx.user[t]||""),{hashAttribute:t,hashValue:n}}_getResult(e,t,n,r,i){let o=!0;(t<0||t>=e.variations.length)&&(t=0,o=!1);const{hashAttribute:s,hashValue:a}=this._getHashAttribute(e.hashAttribute),c=e.meta?e.meta[t]:{},u={key:c.key||""+t,featureId:r,inExperiment:o,hashUsed:n,variationId:t,value:e.variations[t],hashAttribute:s,hashValue:a};return c.name&&(u.name=c.name),void 0!==i&&(u.bucket=i),c.passthrough&&(u.passthrough=c.passthrough),u}_getContextUrl(){return this._ctx.url||(ye?window.location.href:"")}_urlIsValid(e){const t=this._getContextUrl();if(!t)return!1;const n=t.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!e.test(t)||!!e.test(n)}_hasGroupOverlap(e){const t=this._ctx.groups||{};for(let n=0;n<e.length;n++)if(t[e[n]])return!0;return!1}_applyDOMChanges(e){if(!ye)return;const t=[];if(e.css){const n=document.createElement("style");n.innerHTML=e.css,document.head.appendChild(n),t.push((()=>n.remove()))}if(e.js){const n=document.createElement("script");n.innerHTML=e.js,document.body.appendChild(n),t.push((()=>n.remove()))}return e.domMutations&&e.domMutations.forEach((e=>{t.push(j(e).revert)})),()=>{t.forEach((e=>e()))}}}var be,Ee=function(e){function t(t){var n,r=e.call(this,t)||this;return r._userAttributes={},r._client=new Se(t),r._userAttributes=null!==(n=r._client.getAttributes())&&void 0!==n?n:{},r}return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.prototype.getFeatureValue=function(e,t){return this._client.getFeatureValue(e,t)},t.prototype.isOn=function(e){return this._client.isOn(e)},t.prototype.loadFeatures=function(e){return function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}(this,void 0,Promise,(function(){return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){switch(t.label){case 0:return[4,this._client.loadFeatures(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.setAttributes=function(e){this._userAttributes=r(r({},this._userAttributes),e),this._client.setAttributes(this._userAttributes)},t.prototype.setAttribute=function(e,t){this._userAttributes[e]=t,this._client.setAttributes(this._userAttributes)},t.prototype.getVariation=function(e){var t,n,r=this._client.evalFeature(e);return null!==(n=null===(t=null==r?void 0:r.experimentResult)||void 0===t?void 0:t.variationId)&&void 0!==n?n:null},t.prototype.forceVariation=function(e,t){this._client.forceVariation(e,t)},t}((function(e){this._options=e}));!function(e){e[e.growthBook=0]="growthBook"}(be||(be={}));var we=function(){function e(){}return e.createFeatureProvider=function(e,t){if(e===be.growthBook)return new Ee(t);throw new Error("Specified feature provider is unavailable")},e}();return t})(),e.exports=t()},1802:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},7477:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1802),o=n(1553),s={};function a(e){const t=s[e];if(t)return t;let n=o.WINDOW[e];if(r.isNativeFunction(n))return s[e]=n.bind(o.WINDOW);const a=o.WINDOW.document;if(a&&"function"==typeof a.createElement)try{const t=a.createElement("iframe");t.hidden=!0,a.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(n=r[e]),a.head.removeChild(t)}catch(t){i.DEBUG_BUILD&&r.logger.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?s[e]=n.bind(o.WINDOW):n}t.clearCachedImplementation=function(e){s[e]=void 0},t.fetch=function(...e){return a("fetch")(...e)},t.getNativeImplementation=a,t.setTimeout=function(...e){return a("setTimeout")(...e)}},6900:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1362),i=n(5033),o=n(44),s=n(9240),a=n(7477),c=n(3802),u=n(8267);t.addClsInstrumentationHandler=r.addClsInstrumentationHandler,t.addFidInstrumentationHandler=r.addFidInstrumentationHandler,t.addInpInstrumentationHandler=r.addInpInstrumentationHandler,t.addLcpInstrumentationHandler=r.addLcpInstrumentationHandler,t.addPerformanceInstrumentationHandler=r.addPerformanceInstrumentationHandler,t.addTtfbInstrumentationHandler=r.addTtfbInstrumentationHandler,t.addPerformanceEntries=i.addPerformanceEntries,t.startTrackingInteractions=i.startTrackingInteractions,t.startTrackingLongTasks=i.startTrackingLongTasks,t.startTrackingWebVitals=i.startTrackingWebVitals,t.addClickKeypressInstrumentationHandler=o.addClickKeypressInstrumentationHandler,t.addHistoryInstrumentationHandler=s.addHistoryInstrumentationHandler,t.clearCachedImplementation=a.clearCachedImplementation,t.fetch=a.fetch,t.getNativeImplementation=a.getNativeImplementation,t.setTimeout=a.setTimeout,t.SENTRY_XHR_DATA_KEY=c.SENTRY_XHR_DATA_KEY,t.addXhrInstrumentationHandler=c.addXhrInstrumentationHandler,t.registerInpInteractionListener=u.registerInpInteractionListener,t.startTrackingINP=u.startTrackingINP},44:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1553),o=1e3;let s,a,c;function u(){if(!i.WINDOW.document)return;const e=r.triggerHandlers.bind(null,"dom"),t=l(e,!0);i.WINDOW.document.addEventListener("click",t,!1),i.WINDOW.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=i.WINDOW[t]&&i.WINDOW[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(r.fill(n,"addEventListener",(function(t){return function(n,r,i){if("click"===n||"keypress"==n)try{const r=this,o=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},s=o[n]=o[n]||{refCount:0};if(!s.handler){const r=l(e);s.handler=r,t.call(this,n,r,i)}s.refCount++}catch(e){}return t.call(this,n,r,i)}})),r.fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,i=n.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function l(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const u=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,u))return;r.addNonEnumerableProperty(n,"_sentryCaptured",!0),u&&!u._sentryId&&r.addNonEnumerableProperty(u,"_sentryId",r.uuid4());const l="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==a)return!1;try{if(!e.target||e.target._sentryId!==c)return!1}catch(e){}return!0}(n)){e({event:n,name:l,global:t}),a=n.type,c=u?u._sentryId:void 0}clearTimeout(s),s=i.WINDOW.setTimeout((()=>{c=void 0,a=void 0}),o)}}t.addClickKeypressInstrumentationHandler=function(e){r.addHandler("dom",e),r.maybeInstrument("dom",u)},t.instrumentDOM=u},9240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1553);let o;function s(){if(!r.supportsHistory())return;const e=i.WINDOW.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=o,t=String(n);o=t;const i={from:e,to:t};r.triggerHandlers("history",i)}return e.apply(this,t)}}i.WINDOW.onpopstate=function(...t){const n=i.WINDOW.location.href,s=o;o=n;const a={from:s,to:n};if(r.triggerHandlers("history",a),e)try{return e.apply(this,t)}catch(e){}},r.fill(i.WINDOW.history,"pushState",t),r.fill(i.WINDOW.history,"replaceState",t)}t.addHistoryInstrumentationHandler=function(e){const t="history";r.addHandler(t,e),r.maybeInstrument(t,s)}},3802:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1553),o="__sentry_xhr_v3__";function s(){if(!i.WINDOW.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;r.fill(e,"open",(function(e){return function(...t){const n=1e3*r.timestampInSeconds(),i=r.isString(t[0])?t[0].toUpperCase():void 0,s=function(e){if(r.isString(e))return e;try{return e.toString()}catch(e){}return}(t[1]);if(!i||!s)return e.apply(this,t);this[o]={method:i,url:s,request_headers:{}},"POST"===i&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const e=this[o];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}const t={endTimestamp:1e3*r.timestampInSeconds(),startTimestamp:n,xhr:this};r.triggerHandlers("xhr",t)}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?r.fill(this,"onreadystatechange",(function(e){return function(...t){return a(),e.apply(this,t)}})):this.addEventListener("readystatechange",a),r.fill(this,"setRequestHeader",(function(e){return function(...t){const[n,i]=t,s=this[o];return s&&r.isString(n)&&r.isString(i)&&(s.request_headers[n.toLowerCase()]=i),e.apply(this,t)}})),e.apply(this,t)}})),r.fill(e,"send",(function(e){return function(...t){const n=this[o];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);const i={startTimestamp:1e3*r.timestampInSeconds(),xhr:this};return r.triggerHandlers("xhr",i),e.apply(this,t)}}))}t.SENTRY_XHR_DATA_KEY=o,t.addXhrInstrumentationHandler=function(e){r.addHandler("xhr",e),r.maybeInstrument("xhr",s)},t.instrumentXHR=s},5033:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(1802),s=n(1553),a=n(1362),c=n(6959),u=n(6495),l=n(3945),d=2147483647;let p,f,h=0,g={};function m(e,t,n,i,o){const s=u.getNavigationEntry(),a=c.msToSec(s?s.requestStart:0),l=o+Math.max(n,a),d=o+n,p=d+i,f={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};return l!==d&&(f["sentry.browser.measure_happened_before_request"]=!0,f["sentry.browser.measure_start_time"]=l),c.startAndEndSpan(e,l,p,{name:t.name,op:t.entryType,attributes:f}),l}function _(e,t,n,i,o,s){const a=s?t[s]:t[`${n}End`],u=t[`${n}Start`];u&&a&&c.startAndEndSpan(e,i+c.msToSec(u),i+c.msToSec(a),{op:"browser",name:o||n,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}function v(e,t,n,o,a,u){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const l=i.parseUrl(n),d={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};y(d,t,"transferSize","http.response_transfer_size"),y(d,t,"encodedBodySize","http.response_content_length"),y(d,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(d["resource.render_blocking_status"]=t.renderBlockingStatus),l.protocol&&(d["url.scheme"]=l.protocol.split(":").pop()),l.host&&(d["server.address"]=l.host),d["url.same_origin"]=n.includes(s.WINDOW.location.origin);const p=u+o,f=p+a;c.startAndEndSpan(e,p,f,{name:n.replace(s.WINDOW.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:d})}function y(e,t,n,r){const i=t[n];null!=i&&i<d&&(e[r]=i)}t._addMeasureSpans=m,t._addResourceSpans=v,t.addPerformanceEntries=function(e){const t=c.getBrowserPerformanceAPI();if(!t||!s.WINDOW.performance.getEntries||!i.browserPerformanceTimeOrigin)return;o.DEBUG_BUILD&&i.logger.log("[Tracing] Adding & adjusting spans using Performance API");const n=c.msToSec(i.browserPerformanceTimeOrigin),a=t.getEntries(),{op:d,start_timestamp:y}=r.spanToJSON(e);if(a.slice(h).forEach((t=>{const s=c.msToSec(t.startTime),a=c.msToSec(t.duration);if(!("navigation"===d&&y&&n+s<y))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{_(e,t,r,n)})),_(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),_(e,t,"fetch",n,"cache","domainLookupStart"),_(e,t,"domainLookup",n,"DNS"),function(e,t,n){const i=n+c.msToSec(t.requestStart),o=n+c.msToSec(t.responseEnd),s=n+c.msToSec(t.responseStart);t.responseEnd&&(c.startAndEndSpan(e,i,o,{op:"browser",name:"request",attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),c.startAndEndSpan(e,s,o,{op:"browser",name:"response",attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{m(e,t,s,a,n);const r=l.getVisibilityWatcher(),c=t.startTime<r.firstHiddenTime;"first-paint"===t.name&&c&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding FP"),g.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&c&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding FCP"),g.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":v(e,t,t.name,s,a,n)}})),h=Math.max(a.length-1,0),function(e){const t=s.WINDOW.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),c.isMeasurementValue(n.rtt)&&(g["connection.rtt"]={value:n.rtt,unit:"millisecond"}));c.isMeasurementValue(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);c.isMeasurementValue(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===d){!function(e){const t=u.getNavigationEntry();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(g),["fcp","fp","lcp"].forEach((e=>{const t=g[e];if(!t||!y||n>=y)return;const r=t.value,s=n+c.msToSec(r),a=Math.abs(1e3*(s-y)),u=a-r;o.DEBUG_BUILD&&i.logger.log(`[Measurements] Normalized ${e} from ${r} to ${a} (${u})`),t.value=a}));const t=g["mark.fid"];t&&g.fid&&(c.startAndEndSpan(e,t.value,t.value+c.msToSec(g.fid.value),{name:"first input delay",op:"ui.action",attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete g["mark.fid"]),"fcp"in g||delete g.cls,Object.entries(g).forEach((([e,t])=>{r.setMeasurement(e,t.value,t.unit)})),function(e){p&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding LCP Data"),p.element&&e.setAttribute("lcp.element",i.htmlTreeAsString(p.element)),p.id&&e.setAttribute("lcp.id",p.id),p.url&&e.setAttribute("lcp.url",p.url.trim().slice(0,200)),e.setAttribute("lcp.size",p.size));f&&f.sources&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding CLS Data"),f.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,i.htmlTreeAsString(t.node)))))}(e)}p=void 0,f=void 0,g={}},t.startTrackingInteractions=function(){a.addPerformanceInstrumentationHandler("event",(({entries:e})=>{for(const t of e){if(!r.getActiveSpan())return;if("click"===t.name){const e=c.msToSec(i.browserPerformanceTimeOrigin+t.startTime),n=c.msToSec(t.duration),o={name:i.htmlTreeAsString(t.target),op:`ui.interaction.${t.name}`,startTime:e,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},s=i.getComponentName(t.target);s&&(o.attributes["ui.component_name"]=s);const a=r.startInactiveSpan(o);a&&a.end(e+n)}}}))},t.startTrackingLongTasks=function(){a.addPerformanceInstrumentationHandler("longtask",(({entries:e})=>{for(const t of e){if(!r.getActiveSpan())return;const e=c.msToSec(i.browserPerformanceTimeOrigin+t.startTime),n=c.msToSec(t.duration),o=r.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:e,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});o&&o.end(e+n)}}))},t.startTrackingWebVitals=function(){const e=c.getBrowserPerformanceAPI();if(e&&i.browserPerformanceTimeOrigin){e.mark&&s.WINDOW.performance.mark("sentry-tracing-init");const t=a.addFidInstrumentationHandler((({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=c.msToSec(i.browserPerformanceTimeOrigin),r=c.msToSec(t.startTime);o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding FID"),g.fid={value:e.value,unit:"millisecond"},g["mark.fid"]={value:n+r,unit:"second"}})),n=a.addClsInstrumentationHandler((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding CLS"),g.cls={value:e.value,unit:""},f=t)}),!0),r=a.addLcpInstrumentationHandler((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding LCP"),g.lcp={value:e.value,unit:"millisecond"},p=t)}),!0),u=a.addTtfbInstrumentationHandler((({metric:e})=>{e.entries[e.entries.length-1]&&(o.DEBUG_BUILD&&i.logger.log("[Measurements] Adding TTFB"),g.ttfb={value:e.value,unit:"millisecond"})}));return()=>{t(),n(),r(),u()}}return()=>{}}},8267:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(1362),s=n(6959),a=[],c=new Map;const u={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};t.registerInpInteractionListener=function(e){const t=({entries:t})=>{t.forEach((t=>{if(!o.isPerformanceEventTiming(t)||!e.name)return;const n=t.interactionId;if(null!=n&&!c.has(n)){if(a.length>10){const e=a.shift();c.delete(e)}a.push(n),c.set(n,e.name)}}))};o.addPerformanceInstrumentationHandler("event",t),o.addPerformanceInstrumentationHandler("first-input",t)},t.startTrackingINP=function(){if(s.getBrowserPerformanceAPI()&&i.browserPerformanceTimeOrigin){const e=o.addInpInstrumentationHandler((({metric:e})=>{const t=r.getClient();if(!t||null==e.value)return;const n=e.entries.find((t=>t.duration===e.value&&u[t.name]));if(!n)return;const{interactionId:o}=n,a=u[n.name],l=t.getOptions(),d=s.msToSec(i.browserPerformanceTimeOrigin+n.startTime),p=s.msToSec(e.value),f=r.getCurrentScope(),h=r.getActiveSpan(),g=h?r.getRootSpan(h):void 0,m=(null!=o?c.get(o):void 0)||(g?r.spanToJSON(g).description:f.getScopeData().transactionName),_=f.getUser(),v=t.getIntegrationByName("Replay"),y=v&&v.getReplayId(),S=void 0!==_?_.email||_.id||_.ip_address:void 0;let b;try{b=f.getScopeData().contexts.profile.profile_id}catch(e){}const E=i.htmlTreeAsString(n.target),w=i.dropUndefinedKeys({release:l.release,environment:l.environment,transaction:m,[r.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:e.value,[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser.inp",user:S||void 0,profile_id:b||void 0,replay_id:y||void 0}),T=r.startInactiveSpan({name:E,op:`ui.interaction.${a}`,attributes:w,startTime:d,experimental:{standalone:!0}});T.addEvent("inp",{[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:e.value}),T.end(d+p)}));return()=>{e()}}return()=>{}}},1362:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1802),o=n(5281),s=n(9598),a=n(9832),c=n(4894),u=n(2569),l=n(3524),d={},p={};let f,h,g,m,_;function v(e,t){const n=d[e];if(n&&n.length)for(const o of n)try{o(t)}catch(t){i.DEBUG_BUILD&&r.logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${r.getFunctionName(o)}\nError:`,t)}}function y(){return o.onCLS((e=>{v("cls",{metric:e}),f=e}),{reportAllChanges:!0})}function S(){return s.onFID((e=>{v("fid",{metric:e}),h=e}))}function b(){return c.onLCP((e=>{v("lcp",{metric:e}),g=e}),{reportAllChanges:!0})}function E(){return l.onTTFB((e=>{v("ttfb",{metric:e}),m=e}))}function w(){return a.onINP((e=>{v("inp",{metric:e}),_=e}))}function T(e,t,n,r,i=!1){let o;return I(e,t),p[e]||(o=n(),p[e]=!0),r&&t({metric:r}),x(e,t,i?o:void 0)}function I(e,t){d[e]=d[e]||[],d[e].push(t)}function x(e,t,n){return()=>{n&&n();const r=d[e];if(!r)return;const i=r.indexOf(t);-1!==i&&r.splice(i,1)}}t.addClsInstrumentationHandler=function(e,t=!1){return T("cls",e,y,f,t)},t.addFidInstrumentationHandler=function(e){return T("fid",e,S,h)},t.addInpInstrumentationHandler=function(e){return T("inp",e,w,_)},t.addLcpInstrumentationHandler=function(e,t=!1){return T("lcp",e,b,g,t)},t.addPerformanceInstrumentationHandler=function(e,t){return I(e,t),p[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);u.observe(e,(t=>{v(e,{entries:t})}),t)}(e),p[e]=!0),x(e,t)},t.addTtfbInstrumentationHandler=function(e){return T("ttfb",e,E,m)},t.isPerformanceEventTiming=function(e){return"duration"in e}},6959:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(1553);t.getBrowserPerformanceAPI=function(){return i.WINDOW&&i.WINDOW.addEventListener&&i.WINDOW.performance},t.isMeasurementValue=function(e){return"number"==typeof e&&isFinite(e)},t.msToSec=function(e){return e/1e3},t.startAndEndSpan=function(e,t,n,{...i}){const o=r.spanToJSON(e).start_timestamp;return o&&o>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),r.withActiveSpan(e,(()=>{const e=r.startInactiveSpan({startTime:t,...i});return e&&e.end(n),e}))}},5281:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1987),i=n(9683),o=n(2569),s=n(1e3),a=n(745),c=n(4235),u=[.1,.25];t.CLSThresholds=u,t.onCLS=(e,t={})=>{c.onFCP(a.runOnce((()=>{const n=i.initMetric("CLS",0);let a,c=0,l=[];const d=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=l[0],n=l[l.length-1];c&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(c+=e.value,l.push(e)):(c=e.value,l=[e])}})),c>n.value&&(n.value=c,n.entries=l,a())},p=o.observe("layout-shift",d);p&&(a=r.bindReporter(e,n,u,t.reportAllChanges),s.onHidden((()=>{d(p.takeRecords()),a(!0)})),setTimeout(a,0))})))}},9598:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1987),i=n(3945),o=n(9683),s=n(2569),a=n(1e3),c=n(745),u=n(1038),l=[100,300];t.FIDThresholds=l,t.onFID=(e,t={})=>{u.whenActivated((()=>{const n=i.getVisibilityWatcher(),u=o.initMetric("FID");let d;const p=e=>{e.startTime<n.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),d(!0))},f=e=>{e.forEach(p)},h=s.observe("first-input",f);d=r.bindReporter(e,u,l,t.reportAllChanges),h&&a.onHidden(c.runOnce((()=>{f(h.takeRecords()),h.disconnect()})))}))}},9832:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553),i=n(1987),o=n(9683),s=n(2569),a=n(1e3),c=n(484),u=n(1038),l=[200,500],d=()=>c.getInteractionCount()-0,p=[],f={},h=e=>{const t=p[p.length-1],n=f[e.interactionId];if(n||p.length<10||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};f[t.id]=t,p.push(t)}p.sort(((e,t)=>t.latency-e.latency)),p.splice(10).forEach((e=>{delete f[e.id]}))}};t.INPThresholds=l,t.onINP=(e,t={})=>{u.whenActivated((()=>{c.initInteractionCountPolyfill();const n=o.initMetric("INP");let u;const f=e=>{e.forEach((e=>{if(e.interactionId&&h(e),"first-input"===e.entryType){!p.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&h(e)}}));const t=(()=>{const e=Math.min(p.length-1,Math.floor(d()/50));return p[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,u())},g=s.observe("event",f,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});u=i.bindReporter(e,n,l,t.reportAllChanges),g&&("PerformanceEventTiming"in r.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&g.observe({type:"first-input",buffered:!0}),a.onHidden((()=>{f(g.takeRecords()),n.value<0&&d()>0&&(n.value=0,n.entries=[]),u(!0)})))}))}},4894:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553),i=n(1987),o=n(3801),s=n(3945),a=n(9683),c=n(2569),u=n(1e3),l=n(745),d=n(1038),p=[2500,4e3],f={};t.LCPThresholds=p,t.onLCP=(e,t={})=>{d.whenActivated((()=>{const n=s.getVisibilityWatcher(),d=a.initMetric("LCP");let h;const g=e=>{const t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(d.value=Math.max(t.startTime-o.getActivationStart(),0),d.entries=[t],h())},m=c.observe("largest-contentful-paint",g);if(m){h=i.bindReporter(e,d,p,t.reportAllChanges);const n=l.runOnce((()=>{f[d.id]||(g(m.takeRecords()),m.disconnect(),f[d.id]=!0,h(!0))}));["keydown","click"].forEach((e=>{r.WINDOW.document&&addEventListener(e,(()=>setTimeout(n,0)),!0)})),u.onHidden(n)}}))}},1987:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.bindReporter=(e,t,n,r)=>{let i,o;return s=>{t.value>=0&&(s||r)&&(o=t.value-(i||0),(o||void 0===i)&&(i=t.value,t.delta=o,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}}},6784:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.generateUniqueID=()=>`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`},3801:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6495);t.getActivationStart=()=>{const e=r.getNavigationEntry();return e&&e.activationStart||0}},6495:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553);t.getNavigationEntry=()=>r.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},3945:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553);let i=-1;const o=e=>{"hidden"===r.WINDOW.document.visibilityState&&i>-1&&(i="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",o,!0),removeEventListener("prerenderingchange",o,!0))};t.getVisibilityWatcher=()=>(r.WINDOW.document&&i<0&&(i="hidden"!==r.WINDOW.document.visibilityState||r.WINDOW.document.prerendering?1/0:0,addEventListener("visibilitychange",o,!0),addEventListener("prerenderingchange",o,!0)),{get firstHiddenTime(){return i}})},9683:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553),i=n(6784),o=n(3801),s=n(6495);t.initMetric=(e,t)=>{const n=s.getNavigationEntry();let a="navigate";n&&(r.WINDOW.document&&r.WINDOW.document.prerendering||o.getActivationStart()>0?a="prerender":r.WINDOW.document&&r.WINDOW.document.wasDiscarded?a="restore":n.type&&(a=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:i.generateUniqueID(),navigationType:a}}},2569:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.observe=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}}},1e3:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553);t.onHidden=e=>{const t=t=>{("pagehide"===t.type||r.WINDOW.document&&"hidden"===r.WINDOW.document.visibilityState)&&e(t)};r.WINDOW.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))}},484:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2569);let i=0,o=1/0,s=0;const a=e=>{e.forEach((e=>{e.interactionId&&(o=Math.min(o,e.interactionId),s=Math.max(s,e.interactionId),i=s?(s-o)/7+1:0)}))};let c;t.getInteractionCount=()=>c?i:performance.interactionCount||0,t.initInteractionCountPolyfill=()=>{"interactionCount"in performance||c||(c=r.observe("event",a,{type:"event",buffered:!0,durationThreshold:0}))}},745:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.runOnce=e=>{let t=!1;return n=>{t||(e(n),t=!0)}}},1038:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553);t.whenActivated=e=>{r.WINDOW.document&&r.WINDOW.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()}},4235:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1987),i=n(3801),o=n(3945),s=n(9683),a=n(2569),c=n(1038),u=[1800,3e3];t.FCPThresholds=u,t.onFCP=(e,t={})=>{c.whenActivated((()=>{const n=o.getVisibilityWatcher(),c=s.initMetric("FCP");let l;const d=a.observe("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(d.disconnect(),e.startTime<n.firstHiddenTime&&(c.value=Math.max(e.startTime-i.getActivationStart(),0),c.entries.push(e),l(!0)))}))}));d&&(l=r.bindReporter(e,c,u,t.reportAllChanges))}))}},3524:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1553),i=n(1987),o=n(3801),s=n(6495),a=n(9683),c=n(1038),u=[800,1800],l=e=>{r.WINDOW.document&&r.WINDOW.document.prerendering?c.whenActivated((()=>l(e))):r.WINDOW.document&&"complete"!==r.WINDOW.document.readyState?addEventListener("load",(()=>l(e)),!0):setTimeout(e,0)};t.TTFBThresholds=u,t.onTTFB=(e,t={})=>{const n=a.initMetric("TTFB"),r=i.bindReporter(e,n,u,t.reportAllChanges);l((()=>{const e=s.getNavigationEntry();if(e){const t=e.responseStart;if(t<=0||t>performance.now())return;n.value=Math.max(t-o.getActivationStart(),0),n.entries=[e],r(!0)}}))}},1553:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837).GLOBAL_OBJ;t.WINDOW=r},9581:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=i.GLOBAL_OBJ,s=o.document,a=o.navigator,c="widget",u=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=r.getClient();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&r.getCurrentScope().setTags(e.tags);const o=r.captureFeedback({source:"api",url:i.getLocationHref(),...e},t);return new Promise(((e,t)=>{const r=setTimeout((()=>t("Unable to determine if Feedback was correctly sent.")),5e3);n.on("afterSendEvent",((n,i)=>{if(n.event_id===o)return clearTimeout(r),i&&"number"==typeof i.statusCode&&i.statusCode>=200&&i.statusCode<300&&e(o),i&&"number"==typeof i.statusCode&&0===i.statusCode?t("Unable to send Feedback. This is because of network issues, or because you are using an ad-blocker."):t("Unable to send Feedback. This could be because of network issues, or because you are using an ad-blocker")}))}))},l="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function d(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen&&t.onFormOpen(),e.onFormOpen&&e.onFormOpen()},onFormClose:()=>{t.onFormClose&&t.onFormClose(),e.onFormClose&&e.onFormClose()},onSubmitSuccess:n=>{t.onSubmitSuccess&&t.onSubmitSuccess(n),e.onSubmitSuccess&&e.onSubmitSuccess(n)},onSubmitError:n=>{t.onSubmitError&&t.onSubmitError(n),e.onSubmitError&&e.onSubmitError(n)},onFormSubmitted:()=>{t.onFormSubmitted&&t.onFormSubmitted(),e.onFormSubmitted&&e.onFormSubmitted()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function p(e,t){return Object.entries(t).forEach((([t,n])=>{e.setAttributeNS(null,t,n)})),e}const f=20,h="http://www.w3.org/2000/svg";function g({triggerLabel:e,shadow:t}){const n=s.createElement("button");if(n.type="button",n.className="widget__actor",n.ariaHidden="false",n.ariaLabel=e,n.appendChild(function(){const e=e=>o.document.createElementNS(h,e),t=p(e("svg"),{width:`${f}`,height:`${f}`,viewBox:`0 0 ${f} ${f}`,fill:"var(--foreground)"}),n=p(e("g"),{clipPath:"url(#clip0_57_80)"}),r=p(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const i=e("defs"),s=p(e("clipPath"),{id:"clip0_57_80"}),a=p(e("rect"),{width:`${f}`,height:`${f}`,fill:"white"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}()),e){const t=s.createElement("span");t.appendChild(s.createTextNode(e)),n.appendChild(t)}const r=function(){const e=s.createElement("style");return e.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e}();return{el:n,appendToDom(){t.appendChild(r),t.appendChild(n)},removeFromDom(){t.removeChild(n),t.removeChild(r)},show(){n.ariaHidden="false"},hide(){n.ariaHidden="true"}}}const m="rgba(88, 74, 192, 1)",_={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:m,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},v={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:m,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function y(e){return`\n  --foreground: ${e.foreground};\n  --background: ${e.background};\n  --accent-foreground: ${e.accentForeground};\n  --accent-background: ${e.accentBackground};\n  --success-color: ${e.successColor};\n  --error-color: ${e.errorColor};\n  --border: ${e.border};\n  --box-shadow: ${e.boxShadow};\n  --outline: ${e.outline};\n  --interactive-filter: ${e.interactiveFilter};\n  `}var S,b,E,w,T,I,x,k={},C=[],A=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,F=Array.isArray;function R(e,t){for(var n in t)e[n]=t[n];return e}function O(e){var t=e.parentNode;t&&t.removeChild(e)}function P(e,t,n){var r,i,o,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?S.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return M(e,s,r,i,null)}function M(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++E:i,__i:-1,__u:0};return null==i&&null!=b.vnode&&b.vnode(o),o}function N(e){return e.children}function D(e,t){this.props=e,this.context=t}function L(e,t){if(null==t)return e.__?L(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?L(e):null}function U(e,t,n){var r,i=e.__v,o=i.__e,s=e.__P;if(s)return(r=R({},i)).__v=i.__v+1,b.vnode&&b.vnode(r),J(s,r,i,e.__n,void 0!==s.ownerSVGElement,32&i.__u?[o]:null,t,null==o?L(i):o,!!(32&i.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&B(r),r}function B(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return B(e)}}function j(e){(!e.__d&&(e.__d=!0)&&w.push(e)&&!H.__r++||T!==b.debounceRendering)&&((T=b.debounceRendering)||I)(H)}function H(){var e,t,n,r=[],i=[];for(w.sort(x);e=w.shift();)e.__d&&(n=w.length,t=U(e,r,i)||t,0===n||w.length>n?(Y(r,t,i),i.length=r.length=0,t=void 0,w.sort(x)):t&&b.__c&&b.__c(t,C));t&&Y(r,t,i),H.__r=0}function W(e,t,n,r,i,o,s,a,c,u,l){var d,p,f,h,g,m=r&&r.__k||C,_=t.length;for(n.__d=c,function(e,t,n){var r,i,o,s,a,c=t.length,u=n.length,l=u,d=0;for(e.__k=[],r=0;r<c;r++)null!=(i=e.__k[r]=null==(i=t[r])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?M(null,i,null,null,i):F(i)?M(N,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?M(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)?(i.__=e,i.__b=e.__b+1,a=q(i,n,s=r+d,l),i.__i=a,o=null,-1!==a&&(l--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&d--,"function"!=typeof i.type&&(i.__u|=65536)):a!==s&&(a===s+1?d++:a>s?l>c-s?d+=a-s:d--:d=a<s&&a==s-1?a-s:0,a!==r+d&&(i.__u|=65536))):(o=n[r])&&null==o.key&&o.__e&&(o.__e==e.__d&&(e.__d=L(o)),Q(o,o,!1),n[r]=null,l--);if(l)for(r=0;r<u;r++)null!=(o=n[r])&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=L(o)),Q(o,o))}(n,t,m),c=n.__d,d=0;d<_;d++)null!=(f=n.__k[d])&&"boolean"!=typeof f&&"function"!=typeof f&&(p=-1===f.__i?k:m[f.__i]||k,f.__i=d,J(e,f,p,i,o,s,a,c,u,l),h=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Z(p.ref,null,f),l.push(f.ref,f.__c||h,f)),null==g&&null!=h&&(g=h),65536&f.__u||p.__k===f.__k?c=V(f,c,e):"function"==typeof f.type&&void 0!==f.__d?c=f.__d:h&&(c=h.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=g}function V(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=V(r[i],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function q(e,t,n,r){var i=e.key,o=e.type,s=n-1,a=n+1,c=t[n];if(null===c||c&&i==c.key&&o===c.type)return n;if(r>(null==c||131072&c.__u?0:1))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&!(131072&c.__u)&&i==c.key&&o===c.type)return s;s--}if(a<t.length){if((c=t[a])&&!(131072&c.__u)&&i==c.key&&o===c.type)return a;a++}}return-1}function K(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||A.test(t)?n:n+"px"}function $(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||K(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||K(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?G:z,o)):e.removeEventListener(t,o?G:z,o);else{if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,n))}}function z(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(b.event?b.event(e):e)}}function G(e){if(this.l)return this.l[e.type+!0](b.event?b.event(e):e)}function J(e,t,n,r,i,o,s,a,c,u){var l,d,p,f,h,g,m,_,v,y,S,E,w,T,I,x=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(l=b.__b)&&l(t);e:if("function"==typeof x)try{if(_=t.props,v=(l=x.contextType)&&r[l.__c],y=l?v?v.props.value:l.__:r,n.__c?m=(d=t.__c=n.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(_,y):(t.__c=d=new D(_,y),d.constructor=x,d.render=ee),v&&v.sub(d),d.props=_,d.state||(d.state={}),d.context=y,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=R({},d.__s)),R(d.__s,x.getDerivedStateFromProps(_,d.__s))),f=d.props,h=d.state,d.__v=t,p)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,y),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,y)||t.__v===n.__v)){for(t.__v!==n.__v&&(d.props=_,d.state=d.__s,d.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),S=0;S<d._sb.length;S++)d.__h.push(d._sb[S]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,y),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,h,g)}))}if(d.context=y,d.props=_,d.__P=e,d.__e=!1,E=b.__r,w=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,E&&E(t),l=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do{d.__d=!1,E&&E(t),l=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++w<25);d.state=d.__s,null!=d.getChildContext&&(r=R(R({},r),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(f,h)),W(e,F(I=null!=l&&l.type===N&&null==l.key?l.props.children:l)?I:[I],t,n,r,i,o,s,a,c,u),d.base=t.__e,t.__u&=-161,d.__h.length&&s.push(d),m&&(d.__E=d.__=null)}catch(e){t.__v=null,c||null!=o?(t.__e=a,t.__u|=c?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),b.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=X(n.__e,t,n,r,i,o,s,c,u);(l=b.diffed)&&l(t)}function Y(e,t,n){for(var r=0;r<n.length;r++)Z(n[r],n[++r],n[++r]);b.__c&&b.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){b.__e(e,t.__v)}}))}function X(e,t,n,r,i,o,s,a,c){var u,l,d,p,f,h,g,m=n.props,_=t.props,v=t.type;if("svg"===v&&(i=!0),null!=o)for(u=0;u<o.length;u++)if((f=o[u])&&"setAttribute"in f==!!v&&(v?f.localName===v:3===f.nodeType)){e=f,o[u]=null;break}if(null==e){if(null===v)return document.createTextNode(_);e=i?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,_.is&&_),o=null,a=!1}if(null===v)m===_||a&&e.data===_||(e.data=_);else{if(o=o&&S.call(e.childNodes),m=n.props||k,!a&&null!=o)for(m={},u=0;u<e.attributes.length;u++)m[(f=e.attributes[u]).name]=f.value;for(u in m)f=m[u],"children"==u||("dangerouslySetInnerHTML"==u?d=f:"key"===u||u in _||$(e,u,null,f,i));for(u in _)f=_[u],"children"==u?p=f:"dangerouslySetInnerHTML"==u?l=f:"value"==u?h=f:"checked"==u?g=f:"key"===u||a&&"function"!=typeof f||m[u]===f||$(e,u,f,m[u],i);if(l)a||d&&(l.__html===d.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(d&&(e.innerHTML=""),W(e,F(p)?p:[p],t,n,r,i&&"foreignObject"!==v,o,s,o?o[0]:n.__k&&L(n,0),a,c),null!=o)for(u=o.length;u--;)null!=o[u]&&O(o[u]);a||(u="value",void 0!==h&&(h!==e[u]||"progress"===v&&!h||"option"===v&&h!==m[u])&&$(e,u,h,m[u],!1),u="checked",void 0!==g&&g!==e[u]&&$(e,u,g,m[u],!1))}return e}function Z(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){b.__e(e,n)}}function Q(e,t,n){var r,i;if(b.unmount&&b.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Z(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){b.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Q(r[i],t,n||"function"!=typeof e.type);n||null==e.__e||O(e.__e),e.__=e.__e=e.__d=void 0}function ee(e,t,n){return this.constructor(e,n)}S=C.slice,b={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},E=0,D.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=R({},this.state),"function"==typeof e&&(e=e(R({},n),this.props)),e&&R(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),j(this))},D.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),j(this))},D.prototype.render=N,w=[],I="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,x=function(e,t){return e.__v.__b-t.__v.__b},H.__r=0;var te,ne,re,ie,oe=0,se=[],ae=[],ce=b,ue=ce.__b,le=ce.__r,de=ce.diffed,pe=ce.__c,fe=ce.unmount,he=ce.__;function ge(e,t){ce.__h&&ce.__h(ne,e,oe||t),oe=0;var n=ne.__H||(ne.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ae}),n.__[e]}function me(e){return oe=1,_e(ke,e)}function _e(e,t,n){var r=ge(te++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):ke(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=ne,!ne.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return!!e.__c}));if(i.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var s=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!o||o.call(this,e,t,n))};ne.u=!0;var o=ne.shouldComponentUpdate,s=ne.componentWillUpdate;ne.componentWillUpdate=function(e,t,n){if(this.__e){var r=o;o=void 0,i(e,t,n),o=r}s&&s.call(this,e,t,n)},ne.shouldComponentUpdate=i}return r.__N||r.__}function ve(e,t){var n=ge(te++,4);!ce.__s&&xe(n.__H,t)&&(n.__=e,n.i=t,ne.__h.push(n))}function ye(e,t){var n=ge(te++,7);return xe(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Se(e,t){return oe=8,ye((function(){return e}),t)}function be(){for(var e;e=se.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Te),e.__H.__h.forEach(Ie),e.__H.__h=[]}catch(t){e.__H.__h=[],ce.__e(t,e.__v)}}ce.__b=function(e){ne=null,ue&&ue(e)},ce.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),he&&he(e,t)},ce.__r=function(e){le&&le(e),te=0;var t=(ne=e.__c).__H;t&&(re===ne?(t.__h=[],ne.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=ae,e.__N=e.i=void 0}))):(t.__h.forEach(Te),t.__h.forEach(Ie),t.__h=[],te=0)),re=ne},ce.diffed=function(e){de&&de(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==se.push(t)&&ie===ce.requestAnimationFrame||((ie=ce.requestAnimationFrame)||we)(be)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==ae&&(e.__=e.__V),e.i=void 0,e.__V=ae}))),re=ne=null},ce.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Te),e.__h=e.__h.filter((function(e){return!e.__||Ie(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],ce.__e(n,e.__v)}})),pe&&pe(e,t)},ce.unmount=function(e){fe&&fe(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Te(e)}catch(e){t=e}})),n.__H=void 0,t&&ce.__e(t,n.__v))};var Ee="function"==typeof requestAnimationFrame;function we(e){var t,n=function(){clearTimeout(r),Ee&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ee&&(t=requestAnimationFrame(n))}function Te(e){var t=ne,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),ne=t}function Ie(e){var t=ne;e.__c=e.__(),ne=t}function xe(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function ke(e,t){return"function"==typeof t?t(e):t}const Ce={__proto__:null,useCallback:Se,useContext:function(e){var t=ne.context[e.__c],n=ge(te++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(ne)),t.props.value):e.__},useDebugValue:function(e,t){ce.useDebugValue&&ce.useDebugValue(t?t(e):e)},useEffect:function(e,t){var n=ge(te++,3);!ce.__s&&xe(n.__H,t)&&(n.__=e,n.i=t,ne.__H.__h.push(n))},useErrorBoundary:function(e){var t=ge(te++,10),n=me();return t.__=e,ne.componentDidCatch||(ne.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]},useId:function(){var e=ge(te++,11);if(!e.__){for(var t=ne.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__},useImperativeHandle:function(e,t,n){oe=6,ve((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))},useLayoutEffect:ve,useMemo:ye,useReducer:_e,useRef:function(e){return oe=5,ye((function(){return{current:e}}),[])},useState:me},Ae="http://www.w3.org/2000/svg";function Fe(){const e=e=>s.createElementNS(Ae,e),t=p(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=p(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}const Re="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/DialogHeader.tsx";function Oe({options:e}){const t=ye((()=>({__html:Fe().outerHTML})),[]);return P("h2",{class:"dialog__header",__self:this,__source:{fileName:Re,lineNumber:16}},e.formTitle,e.showBranding?P("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t,__self:this,__source:{fileName:Re,lineNumber:19}}):null)}const Pe="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Form.tsx";function Me(e,t){const n=e.get(t);return"string"==typeof n?n.trim():""}function Ne({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:s,onSubmitError:a,showEmail:u,showName:d,screenshotInput:p}){const{tags:f,addScreenshotButtonLabel:h,removeScreenshotButtonLabel:g,cancelButtonLabel:m,emailLabel:_,emailPlaceholder:v,isEmailRequired:y,isNameRequired:S,messageLabel:b,messagePlaceholder:E,nameLabel:w,namePlaceholder:T,submitButtonLabel:I,isRequiredLabel:x}=e,[k,C]=me(null),[A,F]=me(!1),R=p&&p.input,[O,M]=me(null),N=Se((e=>{M(e),F(!1)}),[]),D=Se((e=>{const t=function(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}(e,{emailLabel:_,isEmailRequired:y,isNameRequired:S,messageLabel:b,nameLabel:w});return t.length>0?C(`Please enter in the following required fields: ${t.join(", ")}`):C(null),0===t.length}),[_,y,S,b,w]),L=Se((async e=>{try{if(e.preventDefault(),!(e.target instanceof HTMLFormElement))return;const t=new FormData(e.target),n=await(p&&A?p.value():void 0),r={name:Me(t,"name"),email:Me(t,"email"),message:Me(t,"message"),attachments:n?[n]:void 0};if(!D(r))return;try{await o({name:r.name,email:r.email,message:r.message,source:c,tags:f},{attachments:r.attachments}),s(r)}catch(e){l&&i.logger.error(e),C(e),a(e)}}catch(e){}}),[p&&A,s,a]);return P("form",{class:"form",onSubmit:L,__self:this,__source:{fileName:Pe,lineNumber:144}},R&&A?P(R,{onError:N,__self:this,__source:{fileName:Pe,lineNumber:146}}):null,P("div",{class:"form__right","data-sentry-feedback":!0,__self:this,__source:{fileName:Pe,lineNumber:149}},P("div",{class:"form__top",__self:this,__source:{fileName:Pe,lineNumber:150}},k?P("div",{class:"form__error-container",__self:this,__source:{fileName:Pe,lineNumber:151}},k):null,d?P("label",{for:"name",class:"form__label",__self:this,__source:{fileName:Pe,lineNumber:154}},P(De,{label:w,isRequiredLabel:x,isRequired:S,__self:this,__source:{fileName:Pe,lineNumber:155}}),P("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:T,required:S,type:"text",__self:this,__source:{fileName:Pe,lineNumber:156}})):P("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden",__self:this,__source:{fileName:Pe,lineNumber:167}}),u?P("label",{for:"email",class:"form__label",__self:this,__source:{fileName:Pe,lineNumber:171}},P(De,{label:_,isRequiredLabel:x,isRequired:y,__self:this,__source:{fileName:Pe,lineNumber:172}}),P("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:v,required:y,type:"email",__self:this,__source:{fileName:Pe,lineNumber:173}})):P("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden",__self:this,__source:{fileName:Pe,lineNumber:184}}),P("label",{for:"message",class:"form__label",__self:this,__source:{fileName:Pe,lineNumber:187}},P(De,{label:b,isRequiredLabel:x,isRequired:!0,__self:this,__source:{fileName:Pe,lineNumber:188}}),P("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:E,required:!0,rows:5,__self:this,__source:{fileName:Pe,lineNumber:189}})),R?P("label",{for:"screenshot",class:"form__label",__self:this,__source:{fileName:Pe,lineNumber:201}},P("button",{class:"btn btn--default",type:"button",onClick:()=>{M(null),F((e=>!e))},__self:this,__source:{fileName:Pe,lineNumber:202}},A?g:h),O?P("div",{class:"form__error-container",__self:this,__source:{fileName:Pe,lineNumber:212}},O.message):null):null),P("div",{class:"btn-group",__self:this,__source:{fileName:Pe,lineNumber:216}},P("button",{class:"btn btn--primary",type:"submit",__self:this,__source:{fileName:Pe,lineNumber:217}},I),P("button",{class:"btn btn--default",type:"button",onClick:r,__self:this,__source:{fileName:Pe,lineNumber:220}},m))))}function De({label:e,isRequired:t,isRequiredLabel:n}){return P("span",{class:"form__label__text",__self:this,__source:{fileName:Pe,lineNumber:239}},e,t&&P("span",{class:"form__label__text--required",__self:this,__source:{fileName:Pe,lineNumber:241}},n))}const Le=16,Ue=17,Be="http://www.w3.org/2000/svg";function je(){const e=e=>o.document.createElementNS(Be,e),t=p(e("svg"),{width:`${Le}`,height:`${Ue}`,viewBox:`0 0 ${Le} ${Ue}`,fill:"inherit"}),n=p(e("g"),{clipPath:"url(#clip0_57_156)"}),r=p(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),i=p(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(i,r);const s=e("defs"),a=p(e("clipPath"),{id:"clip0_57_156"}),c=p(e("rect"),{width:`${Le}`,height:`${Le}`,fill:"white",transform:"translate(0 0.5)"});return a.appendChild(c),s.appendChild(a),t.appendChild(s).appendChild(a).appendChild(c),t}const He="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/components/Dialog.tsx";function We({open:e,onFormSubmitted:t,...n}){const r=n.options,i=ye((()=>({__html:je().outerHTML})),[]),[o,s]=me(null),a=Se((()=>{o&&(clearTimeout(o),s(null)),t()}),[o]),c=Se((e=>{n.onSubmitSuccess(e),s(setTimeout((()=>{t(),s(null)}),5e3))}),[t]);return P(N,{__self:this,__source:{fileName:He,lineNumber:48}},o?P("div",{class:"success__position",onClick:a,__self:this,__source:{fileName:He,lineNumber:50}},P("div",{class:"success__content",__self:this,__source:{fileName:He,lineNumber:51}},r.successMessageText,P("span",{class:"success__icon",dangerouslySetInnerHTML:i,__self:this,__source:{fileName:He,lineNumber:53}}))):P("dialog",{class:"dialog",onClick:r.onFormClose,open:e,__self:this,__source:{fileName:He,lineNumber:57}},P("div",{class:"dialog__position",__self:this,__source:{fileName:He,lineNumber:58}},P("div",{class:"dialog__content",onClick:e=>{e.stopPropagation()},__self:this,__source:{fileName:He,lineNumber:59}},P(Oe,{options:r,__self:this,__source:{fileName:He,lineNumber:66}}),P(Ne,{...n,onSubmitSuccess:c,__self:this,__source:{fileName:He,lineNumber:67}})))))}const Ve="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/CropCorner.tsx";function qe(){const e=s.createElement("style"),t="#1A141F",n="#302735";return e.textContent=`\n.editor {\n  padding: 10px;\n  padding-top: 65px;\n  padding-bottom: 65px;\n  flex-grow: 1;\n\n  background-color: ${t};\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ${t} 8px,\n      ${t} 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ${n} 15px,\n      ${n} 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container canvas {\n  object-fit: contain;\n  position: relative;\n}\n\n.editor__crop-btn-group {\n  padding: 8px;\n  gap: 8px;\n  border-radius: var(--menu-border-radius, 6px);\n  background: var(--button-primary-background, var(--background));\n  width: 175px;\n  position: absolute;\n}\n\n.editor__crop-corner {\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  background: none;\n  border: 3px solid #ffffff;\n}\n\n.editor__crop-corner--top-left {\n  cursor: nwse-resize;\n  border-right: none;\n  border-bottom: none;\n}\n.editor__crop-corner--top-right {\n  cursor: nesw-resize;\n  border-left: none;\n  border-bottom: none;\n}\n.editor__crop-corner--bottom-left {\n  cursor: nesw-resize;\n  border-right: none;\n  border-top: none;\n}\n.editor__crop-corner--bottom-right {\n  cursor: nwse-resize;\n  border-left: none;\n  border-top: none;\n}\n`,e}const Ke="/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/screenshot/components/ScreenshotEditor.tsx",$e=33,ze=o.devicePixelRatio,Ge=e=>({x:Math.min(e.startX,e.endX),y:Math.min(e.startY,e.endY),width:Math.abs(e.startX-e.endX),height:Math.abs(e.startY-e.endY)}),Je=e=>{const t=e.clientHeight,n=e.clientWidth,r=e.width/e.height;let i=t*r,o=t;i>n&&(i=n,o=n/r);const s=(n-i)/2,a=(t-o)/2;return{startX:s,startY:a,endX:i+s,endY:o+a}};function Ye({h:e,hooks:t,imageBuffer:n,dialog:r,options:i}){const c=function({hooks:e}){return function({onBeforeScreenshot:t,onScreenshot:n,onAfterScreenshot:r,onError:i}){e.useEffect((()=>{(async()=>{t();const e=await a.mediaDevices.getDisplayMedia({video:{width:o.innerWidth*o.devicePixelRatio,height:o.innerHeight*o.devicePixelRatio},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),i=s.createElement("video");await new Promise(((t,r)=>{i.srcObject=e,i.onloadedmetadata=()=>{n(i),e.getTracks().forEach((e=>e.stop())),t()},i.play().catch(r)})),r()})().catch(i)}),[])}}({hooks:t});return function({onError:a}){const u=t.useMemo((()=>({__html:qe().innerText})),[]),l=function({h:e}){return function({top:t,left:n,corner:r,onGrabButton:i}){return e("button",{class:`editor__crop-corner editor__crop-corner--${r} `,style:{top:t,left:n},onMouseDown:e=>{e.preventDefault(),i(e,r)},onClick:e=>{e.preventDefault()},__self:this,__source:{fileName:Ve,lineNumber:22}})}}({h:e}),d=t.useRef(null),p=t.useRef(null),f=t.useRef(null),[h,g]=t.useState({startX:0,startY:0,endX:0,endY:0}),[m,_]=t.useState(!1);function v(){const e=f.current,t=Ge(Je(n));if(e){e.width=t.width*ze,e.height=t.height*ze,e.style.width=`${t.width}px`,e.style.height=`${t.height}px`;const n=e.getContext("2d");n&&n.scale(ze,ze)}const r=p.current;r&&(r.style.width=`${t.width}px`,r.style.height=`${t.height}px`),g({startX:0,startY:0,endX:t.width,endY:t.height})}function y(e,t){_(!1);const n=S(t),r=()=>{s.removeEventListener("mousemove",n),s.removeEventListener("mouseup",r),_(!0)};s.addEventListener("mouseup",r),s.addEventListener("mousemove",n)}t.useEffect((()=>{o.addEventListener("resize",v,!1)}),[]),t.useEffect((()=>{const e=f.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const r=Ge(Je(n)),i=Ge(h);t.clearRect(0,0,r.width,r.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,r.width,r.height),t.clearRect(i.x,i.y,i.width,i.height),t.strokeStyle="#ffffff",t.lineWidth=3,t.strokeRect(i.x+1,i.y+1,i.width-2,i.height-2),t.strokeStyle="#000000",t.lineWidth=1,t.strokeRect(i.x+3,i.y+3,i.width-6,i.height-6)}),[h]);const S=t.useCallback((e=>function(t){if(!f.current)return;const n=f.current,r=n.getBoundingClientRect(),i=t.clientX-r.x,o=t.clientY-r.y;switch(e){case"top-left":g((e=>({...e,startX:Math.min(Math.max(0,i),e.endX-$e),startY:Math.min(Math.max(0,o),e.endY-$e)})));break;case"top-right":g((e=>({...e,endX:Math.max(Math.min(i,n.width/ze),e.startX+$e),startY:Math.min(Math.max(0,o),e.endY-$e)})));break;case"bottom-left":g((e=>({...e,startX:Math.min(Math.max(0,i),e.endX-$e),endY:Math.max(Math.min(o,n.height/ze),e.startY+$e)})));break;case"bottom-right":g((e=>({...e,endX:Math.max(Math.min(i,n.width/ze),e.startX+$e),endY:Math.max(Math.min(o,n.height/ze),e.startY+$e)})))}}),[]);return c({onBeforeScreenshot:t.useCallback((()=>{r.el.style.display="none"}),[]),onScreenshot:t.useCallback((e=>{const t=n.getContext("2d");if(!t)throw new Error("Could not get canvas context");n.width=e.videoWidth,n.height=e.videoHeight,n.style.width="100%",n.style.height="100%",t.drawImage(e,0,0)}),[n]),onAfterScreenshot:t.useCallback((()=>{r.el.style.display="block";const e=d.current;e&&e.appendChild(n),v()}),[]),onError:t.useCallback((e=>{r.el.style.display="block",a(e)}),[])}),e("div",{class:"editor",__self:this,__source:{fileName:Ke,lineNumber:262}},e("style",{dangerouslySetInnerHTML:u,__self:this,__source:{fileName:Ke,lineNumber:263}}),e("div",{class:"editor__canvas-container",ref:d,__self:this,__source:{fileName:Ke,lineNumber:264}},e("div",{class:"editor__crop-container",style:{position:"absolute",zIndex:1},ref:p,__self:this,__source:{fileName:Ke,lineNumber:265}},e("canvas",{style:{position:"absolute"},ref:f,__self:this,__source:{fileName:Ke,lineNumber:266}}),e(l,{left:h.startX-3,top:h.startY-3,onGrabButton:y,corner:"top-left",__self:this,__source:{fileName:Ke,lineNumber:267}}),e(l,{left:h.endX-30+3,top:h.startY-3,onGrabButton:y,corner:"top-right",__self:this,__source:{fileName:Ke,lineNumber:273}}),e(l,{left:h.startX-3,top:h.endY-30+3,onGrabButton:y,corner:"bottom-left",__self:this,__source:{fileName:Ke,lineNumber:279}}),e(l,{left:h.endX-30+3,top:h.endY-30+3,onGrabButton:y,corner:"bottom-right",__self:this,__source:{fileName:Ke,lineNumber:285}}),e("div",{style:{left:Math.max(0,h.endX-191),top:Math.max(0,h.endY+8),display:m?"flex":"none"},class:"editor__crop-btn-group",__self:this,__source:{fileName:Ke,lineNumber:291}},e("button",{onClick:e=>{e.preventDefault(),f.current&&g({startX:0,startY:0,endX:f.current.width/ze,endY:f.current.height/ze}),_(!1)},class:"btn btn--default",__self:this,__source:{fileName:Ke,lineNumber:299}},i.cancelButtonLabel),e("button",{onClick:e=>{e.preventDefault(),function(){const e=s.createElement("canvas"),t=Ge(Je(n)),r=Ge(h);e.width=r.width*ze,e.height=r.height*ze;const i=e.getContext("2d");i&&n&&i.drawImage(n,r.x/t.width*n.width,r.y/t.height*n.height,r.width/t.width*n.width,r.height/t.height*n.height,0,0,e.width,e.height);const o=n.getContext("2d");o&&(o.clearRect(0,0,n.width,n.height),n.width=e.width,n.height=e.height,n.style.width=`${r.width}px`,n.style.height=`${r.height}px`,o.drawImage(e,0,0),v())}(),_(!1)},class:"btn btn--primary",__self:this,__source:{fileName:Ke,lineNumber:316}},i.confirmButtonLabel)))))}}t.buildFeedbackIntegration=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>({id:o="sentry-feedback",autoInject:c=!0,showBranding:p=!0,isEmailRequired:f=!1,isNameRequired:h=!1,showEmail:m=!0,showName:S=!0,enableScreenshot:b=!0,useSentryUser:E={email:"email",name:"username"},tags:w,colorScheme:T="system",themeLight:I={},themeDark:x={},addScreenshotButtonLabel:k="Add a screenshot",cancelButtonLabel:C="Cancel",confirmButtonLabel:A="Confirm",emailLabel:F="Email",emailPlaceholder:R="your.email@example.org",formTitle:O="Report a Bug",isRequiredLabel:P="(required)",messageLabel:M="Description",messagePlaceholder:N="What's the bug? What did you expect?",nameLabel:D="Name",namePlaceholder:L="Your Name",removeScreenshotButtonLabel:U="Remove screenshot",submitButtonLabel:B="Send Bug Report",successMessageText:j="Thank you for your report!",triggerLabel:H="Report a Bug",onFormOpen:W,onFormClose:V,onSubmitSuccess:q,onSubmitError:K,onFormSubmitted:$}={})=>{const z={id:o,autoInject:c,showBranding:p,isEmailRequired:f,isNameRequired:h,showEmail:m,showName:S,enableScreenshot:b,useSentryUser:E,tags:w,colorScheme:T,themeDark:x,themeLight:I,triggerLabel:H,cancelButtonLabel:C,submitButtonLabel:B,confirmButtonLabel:A,formTitle:O,emailLabel:F,emailPlaceholder:R,messageLabel:M,messagePlaceholder:N,nameLabel:D,namePlaceholder:L,successMessageText:j,isRequiredLabel:P,addScreenshotButtonLabel:k,removeScreenshotButtonLabel:U,onFormClose:V,onFormOpen:W,onSubmitError:K,onSubmitSuccess:q,onFormSubmitted:$};let G=null,J=[];const Y=e=>{if(!G){const t=s.createElement("div");t.id=String(e.id),s.body.appendChild(t),G=t.attachShadow({mode:"open"}),G.appendChild(function({colorScheme:e,themeDark:t,themeLight:n}){const r=s.createElement("style");return r.textContent=`\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ${"system"!==e?"color-scheme: only light;":""}\n\n  ${y("dark"===e?{...v,...t}:{..._,...n})}\n}\n\n${"system"===e?`\n@media (prefers-color-scheme: dark) {\n  :host {\n    ${y({...v,...t})}\n  }\n}`:""}\n}\n`,r}(e))}return G},X=async(t,n,i)=>{const o=r.getClient(),s=o&&o.getIntegrationByName(t);if(s)return s;const a=(n&&n()||await e(i))();return o&&o.addIntegration(a),a},Z=async e=>{const r=e.enableScreenshot&&!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a.userAgent)||/Macintosh/i.test(a.userAgent)&&a.maxTouchPoints&&a.maxTouchPoints>1||!isSecureContext),[o,s]=await Promise.all([X("FeedbackModal",t,"feedbackModalIntegration"),r?X("FeedbackScreenshot",n,"feedbackScreenshotIntegration"):void 0]);if(!o)throw l&&i.logger.error("[Feedback] Missing feedback modal integration. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!");return r&&!s&&l&&i.logger.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots."),o.createDialog({options:e,screenshotIntegration:r?s:void 0,sendFeedback:u,shadow:Y(e)})},Q=(e,t={})=>{const n=d(z,t),r="string"==typeof e?s.querySelector(e):"function"==typeof e.addEventListener?e:null;if(!r)throw l&&i.logger.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let o=null;const a=async()=>{o||(o=await Z({...n,onFormClose:()=>{o&&o.close(),n.onFormClose&&n.onFormClose()},onFormSubmitted:()=>{o&&o.removeFromDom(),n.onFormSubmitted&&n.onFormSubmitted()}})),o.appendToDom(),o.open()};r.addEventListener("click",a);const c=()=>{J=J.filter((e=>e!==c)),o&&o.removeFromDom(),o=null,r.removeEventListener("click",a)};return J.push(c),c},ee=(e={})=>{const t=d(z,e),n=Y(t),r=g({triggerLabel:t.triggerLabel,shadow:n});return Q(r.el,{...t,onFormOpen(){r.hide()},onFormClose(){r.show()},onFormSubmitted(){r.show()}}),r};return{name:"Feedback",setupOnce(){i.isBrowser()&&z.autoInject&&("loading"===s.readyState?s.addEventListener("DOMContentLoaded",(()=>ee().appendToDom)):ee().appendToDom())},attachTo:Q,createWidget(e={}){const t=ee(d(z,e));return t.appendToDom(),t},createForm:async(e={})=>Z(d(z,e)),remove(){G&&(G.parentElement&&G.parentElement.remove(),G=null),J.forEach((e=>e())),J=[]}}},t.feedbackModalIntegration=()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:i})=>{const o=i,a=e.useSentryUser,c=function(){const e=r.getCurrentScope().getUser(),t=r.getIsolationScope().getUser(),n=r.getGlobalScope().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}(),u=s.createElement("div"),l=function(){const e=s.createElement("style");return e.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n\n.dialog__header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n\n\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form__right {\n  flex: 0 0 var(--form-width, 272px);\n  width: var(--form-width, 272px);\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n}\n\n@media (max-width: 600px) {\n  .form__right {\n    width: auto;\n  }\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n\n\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n\n",e}();let d="";const p={get el(){return u},appendToDom(){o.contains(l)||o.contains(u)||(o.appendChild(l),o.appendChild(u))},removeFromDom(){o.removeChild(u),o.removeChild(l),s.body.style.overflow=d},open(){h(!0),e.onFormOpen&&e.onFormOpen(),d=s.body.style.overflow,s.body.style.overflow="hidden"},close(){h(!1),s.body.style.overflow=d}},f=t&&t.createInput({h:P,hooks:Ce,dialog:p,options:e}),h=t=>{!function(e,t,n){var r,i,o,s;b.__&&b.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],s=[],J(t,e=(!r&&n||t).__k=P(N,null,[e]),i||k,k,void 0!==t.ownerSVGElement,!r&&n?[n]:i?null:t.firstChild?S.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r,s),e.__d=void 0,Y(o,e,s)}(P(We,{options:e,screenshotInput:f,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:a&&c&&c[a.name]||"",defaultEmail:a&&c&&c[a.email]||"",onFormClose:()=>{h(!1),e.onFormClose&&e.onFormClose()},onSubmit:n,onSubmitSuccess:t=>{h(!1),e.onSubmitSuccess&&e.onSubmitSuccess(t)},onSubmitError:t=>{e.onSubmitError&&e.onSubmitError(t)},onFormSubmitted:()=>{e.onFormSubmitted&&e.onFormSubmitted()},open:t,__self:void 0,__source:{fileName:"/home/runner/work/sentry-javascript/sentry-javascript/packages/feedback/src/modal/integration.tsx",lineNumber:67}}),u)};return p}}),t.feedbackScreenshotIntegration=()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const i=s.createElement("canvas");return{input:Ye({h:e,hooks:t,imageBuffer:i,dialog:n,options:r}),value:async()=>{const e=await new Promise((e=>{i.toBlob(e,"image/png")}));if(e){return{data:new Uint8Array(await e.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}}),t.getFeedback=function(){const e=r.getClient();return e&&e.getIntegrationByName("Feedback")},t.sendFeedback=u},1672:(e,t,n)=>{var{_optionalChain:r}=n(9837);Object.defineProperty(t,"__esModule",{value:!0});const i=n(1663);var o;function s(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:s(e.parentNode,t,n,r+1):-1}function a(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(o||(o={}));let c={map:{},getId:()=>-1,getNode:()=>null,removeNodeFromMap(){},has:()=>!1,reset(){}};function u(e,t,n,r,i=window){const o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(e){g((()=>{n.set.call(this,e)}),0),o&&o.set&&o.set.call(this,e)}}),()=>u(e,t,o||{},!0)}function l(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],i=n(r);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,()=>{e[t]=r}}catch(e){return()=>{}}}function d(e,t,n,r,i){if(!e)return!1;const o=function(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}(e);if(!o)return!1;const c=a(t,n);if(!i){const e=r&&o.matches(r);return c(o)&&!e}const u=s(o,c);let l=-1;return!(u<0)&&(r&&(l=s(o,a(null,r))),u>-1&&l<0||u<l)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(c=new Proxy(c,{get:(e,t,n)=>Reflect.get(e,t,n)})),/[1-9][0-9]{12}/.test(Date.now().toString());const p={};function f(e){const t=p[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(t)}catch(e){}return p[e]=r.bind(window)}function h(...e){return f("requestAnimationFrame")(...e)}function g(...e){return f("setTimeout")(...e)}var m=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(m||{});let _;function v(e){_=e}const y=e=>{if(!_)return e;return(...t)=>{try{return e(...t)}catch(e){if(_&&!0===_(e))return()=>{};throw e}}};for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b="undefined"==typeof Uint8Array?[]:new Uint8Array(256),E=0;E<64;E++)b[S.charCodeAt(E)]=E;const w=new Map;const T=(e,t,n)=>{if(!e||!k(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=w.get(e);return n||(n=new Map,w.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let i=r.indexOf(e);return-1===i&&(i=r.length,r.push(e)),i};function I(e,t,n){if(e instanceof Array)return e.map((e=>I(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,i="";for(t=0;t<r;t+=3)i+=S[n[t]>>2],i+=S[(3&n[t])<<4|n[t+1]>>4],i+=S[(15&n[t+1])<<2|n[t+2]>>6],i+=S[63&n[t+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[I(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[I(e.data,t,n),e.width,e.height]}}if(k(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:T(e,t,n)}}return e}const x=(e,t,n)=>e.map((e=>I(e,t,n))),k=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function C(e,t,n,r,i){const o=[];try{const s=l(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o,...s){if(!d(this,t,n,r,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=e),i&&["webgl","webgl2"].includes(e))if(s[0]&&"object"==typeof s[0]){const e=s[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...s])}}));o.push(s)}catch(e){}return()=>{o.forEach((e=>e()))}}function A(e,t,n,r,i,o,s,a){const c=[],p=Object.getOwnPropertyNames(e);for(const s of p)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(s))try{if("function"!=typeof e[s])continue;const u=l(e,s,(function(e){return function(...c){const u=e.apply(this,c);if(T(u,a,this),"tagName"in this.canvas&&!d(this.canvas,r,i,o,!0)){const e=x(c,a,this),r={type:t,property:s,args:e};n(this.canvas,r)}return u}}));c.push(u)}catch(r){const i=u(e,s,{set(e){n(this.canvas,{type:t,property:s,args:[e],setter:!0})}});c.push(i)}return c}class F{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:i,unblockSelector:o,maxCanvasSize:s,recordCanvas:a,dataURLOptions:c,errorHandler:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,this.options=e,u&&v(u),e.enableManualSnapshot||y((()=>{a&&"all"===t&&this.initCanvasMutationObserver(n,r,i,o),a&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,i,o,s,{dataURLOptions:c})}))()}initCanvasFPSObserver(e,t,n,r,i,o,s){const a=C(t,n,r,i,!0),c=this.takeSnapshot(!1,e,t,n,r,i,o,s.dataURLOptions);this.resetObservers=()=>{a(),cancelAnimationFrame(c)}}initCanvasMutationObserver(e,t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=C(e,t,n,r,!1),o=function(e,t,n,r,i){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of s)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const s=l(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...s){return d(this.canvas,n,r,i,!0)||g((()=>{const n=x(s,t,this);e(this.canvas,{type:m["2D"],property:a,args:n})}),0),o.apply(this,s)}}));o.push(s)}catch(n){const r=u(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:m["2D"],property:a,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r),s=function(e,t,n,r,i){const o=[];return o.push(...A(t.WebGLRenderingContext.prototype,m.WebGL,e,n,r,i,0,t)),void 0!==t.WebGL2RenderingContext&&o.push(...A(t.WebGL2RenderingContext.prototype,m.WebGL2,e,n,r,i,0,t)),()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,r,this.mirror);this.resetObservers=()=>{i(),o(),s()}}snapshot(e){const{options:t}=this,n=this.takeSnapshot(!0,"all"===t.sampling?2:t.sampling||2,t.win,t.blockClass,t.blockSelector,t.unblockSelector,t.maxCanvasSize,t.dataURLOptions,e);this.resetObservers=()=>{cancelAnimationFrame(n)}}takeSnapshot(e,t,n,i,o,s,a,c,u){const l=new Map,p=new Worker(function(){const e=new Blob(['for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};']);return URL.createObjectURL(e)}());p.onmessage=e=>{const t=e.data,{id:n}=t;if(l.set(n,!1),!("base64"in t))return;const{base64:r,type:i,width:o,height:s}=t;this.mutationCb({id:n,type:m["2D"],commands:[{property:"clearRect",args:[0,0,o,s]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:r}],type:i}]},0,0,o,s]}]})};const f=1e3/t;let g,_=0;const v=t=>{_&&t-_<f||(_=t,(e=>{if(e)return[e];const t=[];return n.document.querySelectorAll("canvas").forEach((e=>{d(e,i,o,s,!0)||t.push(e)})),t})(u).forEach((t=>{const n=this.mirror.getId(t);if(!l.get(n)&&t.width&&t.height){if(l.set(n,!0),!e&&["webgl","webgl2"].includes(t.__context)){const e=t.getContext(t.__context);!1===r([e,"optionalAccess",e=>e.getContextAttributes,"call",e=>e(),"optionalAccess",e=>e.preserveDrawingBuffer])&&e.clear(e.COLOR_BUFFER_BIT)}createImageBitmap(t).then((e=>{p.postMessage({id:n,bitmap:e,width:t.width,height:t.height,dataURLOptions:c,maxCanvasSize:a},[e])})).catch((e=>{y((()=>{throw e}))()}))}}))),g=h(v)};return g=h(v),g}startPendingCanvasMutationFlusher(){h((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,h(e)};h(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),h((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const{type:t,...n}=e;return n})),{type:i}=n[0];this.mutationCb({id:t,type:i,commands:r}),this.pendingCanvasMutations.delete(e)}}const R={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},O=1280,P=i.defineIntegration(((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,O):O,n?Math.min(n,O):O]};let i;const o=new Promise((e=>i=e));return{name:"ReplayCanvas",getOptions(){const{quality:e,enableManualSnapshot:t,maxCanvasSize:n}=r;return{enableManualSnapshot:t,recordCanvas:!0,getCanvasManager:e=>{const r=new F({...e,enableManualSnapshot:t,maxCanvasSize:n,errorHandler:e=>{try{"object"==typeof e&&(e.__rrweb__=!0)}catch(e){}}});return i(r),r},...R[e||"medium"]||R.medium}},async snapshot(e){(await o).snapshot(e)}}}));t.replayCanvasIntegration=P},9657:(e,t,n)=>{var{_nullishCoalesce:r,_optionalChain:i}=n(9837);Object.defineProperty(t,"__esModule",{value:!0});const o=n(1663),s=n(9837),a=n(6900),c=s.GLOBAL_OBJ,u="sentryReplaySession",l="replay_event",d="Unable to send Replay",p=15e4,f=5e3,h=2e7,g=36e5;function m(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}var _;function v(e){const t=m([e,"optionalAccess",e=>e.host]);return Boolean(m([t,"optionalAccess",e=>e.shadowRoot])===e)}function y(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function S(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,b).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(e){return null}var t}function b(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=S(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(_||(_={}));class E{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=m([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return r=()=>-1,null!=(n=t)?n:r();var n,r}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function w({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function T({isMasked:e,element:t,value:n,maskInputFn:r}){let i=n||"";return e?(r&&(i=r(i,t)),"*".repeat(i.length)):i}function I(e){return e.toLowerCase()}function x(e){return e.toUpperCase()}const k="__rrweb_original__";function C(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?I(t):null}function A(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let F=1;const R=new RegExp("[^a-z0-9-_:]"),O=-2;function P(){return F++}let M,N;const D=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,L=/^(?:[a-z+]+:)?\/\//i,U=/^www\..*/i,B=/^(data:)([^,]*),(.*)/i;function j(e,t){return(e||"").replace(D,((e,n,r,i,o,s)=>{const a=r||o||s,c=n||i||"";if(!a)return e;if(L.test(a)||U.test(a))return`url(${c}${a}${c})`;if(B.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const u=t.split("/"),l=a.split("/");u.pop();for(const e of l)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${c}${u.join("/")}${c})`}))}const H=/^[^ \t\n\r\u000c]+/,W=/^[, \t\n\r\u000c]+/;function V(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function q(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function K(){const e=document.createElement("a");return e.href="",e.href}function $(e,t,n,r,i,o){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?V(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const i=e.exec(t.substring(n));return i?(r=i[0],n+=r.length,r):""}const i=[];for(;r(W),!(n>=t.length);){let o=r(H);if(","===o.slice(-1))o=V(e,o.substring(0,o.length-1)),i.push(o);else{let r="";o=V(e,o);let s=!1;for(;;){const e=t.charAt(n);if(""===e){i.push((o+r).trim());break}if(s)")"===e&&(s=!1);else{if(","===e){n+=1,i.push((o+r).trim());break}"("===e&&(s=!0)}r+=e,n+=1}}}return i.join(", ")}(e,r):"style"===n?j(r,K()):"object"===t&&"data"===n?V(e,r):"function"==typeof o?o(n,r,i):r:V(e,r):r}function z(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function G(e,t,n=1/0,r=0){return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:G(e.parentNode,t,n,r+1):-1}function J(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"==typeof e){if(r.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(e){return!1}}}function Y(e,t,n,r,i,o){try{const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===s)return!1;if("INPUT"===s.tagName){const e=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(o){if(c=G(s,J(r,i)),c<0)return!0;a=G(s,J(t,n),c>=0?c:1/0)}else{if(a=G(s,J(t,n)),a<0)return!1;c=G(s,J(r,i),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!o}catch(e){}return!!o}function X(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:h={},maskTextFn:g,maskInputFn:v,dataURLOptions:y={},inlineImages:b,recordCanvas:E,keepIframeSrcFn:F,newlyAddedElement:O=!1}=t,P=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:_.Document,childNodes:[],compatMode:e.compatMode}:{type:_.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:_.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:P};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:o,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:l={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:f,newlyAddedElement:h=!1,rootId:g,maskAllText:m,maskTextClass:v,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:E}=t,F=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,i,o),O=function(e){if(e instanceof HTMLFormElement)return"form";const t=I(e.tagName);return R.test(t)?"div":t}(e);let P={};const D=e.attributes.length;for(let t=0;t<D;t++){const r=e.attributes[t];r.name&&!z(O,r.name,r.value)&&(P[r.name]=$(n,O,I(r.name),r.value,e,c))}if("link"===O&&s){const t=Array.from(n.styleSheets).find((t=>t.href===e.href));let r=null;t&&(r=S(t)),r&&(delete P.rel,delete P.href,P._cssText=j(r,t.href))}if("style"===O&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=S(e.sheet);t&&(P._cssText=j(t,K()))}if("input"===O||"textarea"===O||"select"===O||"option"===O){const t=e,n=C(t),r=A(t,x(O),n),i=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Y(t,v,b,y,E,w({type:n,tagName:x(O),maskInputOptions:a}));P.value=T({isMasked:e,element:t,value:r,maskInputFn:u})}i&&(P.checked=i)}"option"===O&&(e.selected&&!a.select?P.selected=!0:delete P.selected);if("canvas"===O&&p)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const i=t.getImageData,o=k in i?i[k]:i;if(new Uint32Array(o.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((e=>0!==e)))return!1}return!0})(e)||(P.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const t=e.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(l.type,l.quality)&&(P.rr_dataURL=t)}if("img"===O&&d){M||(M=n.createElement("canvas"),N=M.getContext("2d"));const t=e,r=t.crossOrigin;t.crossOrigin="anonymous";const i=()=>{t.removeEventListener("load",i);try{M.width=t.naturalWidth,M.height=t.naturalHeight,N.drawImage(t,0,0),P.rr_dataURL=M.toDataURL(l.type,l.quality)}catch(e){}r?P.crossOrigin=r:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}"audio"!==O&&"video"!==O||(P.rr_mediaState=e.paused?"paused":"played",P.rr_mediaCurrentTime=e.currentTime);h||(e.scrollLeft&&(P.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(P.rr_scrollTop=e.scrollTop));if(F){const{width:t,height:n}=e.getBoundingClientRect();P={class:P.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==O||f(P.src)||(e.contentDocument||(P.rr_src=P.src),delete P.src);let L;try{customElements.get(O)&&(L=!0)}catch(e){}return{type:_.Element,tagName:O,attributes:P,childNodes:[],isSVG:q(e)||void 0,needBlock:F,rootId:g,isCustom:L}}(e,{doc:n,blockClass:i,blockSelector:o,unblockSelector:s,inlineStylesheet:f,maskAttributeFn:c,maskInputOptions:h,maskInputFn:v,dataURLOptions:y,inlineImages:b,recordCanvas:E,keepIframeSrcFn:F,newlyAddedElement:O,rootId:P,maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:i,maskTextSelector:o,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:l}=t,d=e.parentNode&&e.parentNode.tagName;let p=e.textContent;const f="STYLE"===d||void 0,h="SCRIPT"===d||void 0,g="TEXTAREA"===d||void 0;if(f&&p){try{e.nextSibling||e.previousSibling||m([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(p=S(e.parentNode.sheet))}catch(e){}p=j(p,K())}h&&(p="SCRIPT_PLACEHOLDER");const v=Y(e,r,o,i,s,n);f||h||g||!p||!v||(p=a?a(p,e.parentElement):p.replace(/[\S]/g,"*"));g&&p&&(c.textarea||v)&&(p=u?u(p,e.parentNode):p.replace(/[\S]/g,"*"));if("OPTION"===d&&p){p=T({isMasked:Y(e,r,o,i,s,w({type:null,tagName:d,maskInputOptions:c})),element:e,value:p,maskInputFn:u})}return{type:_.Text,textContent:p||"",isStyle:f,rootId:l}}(e,{maskAllText:a,maskTextClass:u,unmaskTextClass:l,maskTextSelector:d,unmaskTextSelector:p,maskTextFn:g,maskInputOptions:h,maskInputFn:v,rootId:P});case e.CDATA_SECTION_NODE:return{type:_.CDATA,textContent:"",rootId:P};case e.COMMENT_NODE:return{type:_.Comment,textContent:e.textContent||"",rootId:P};default:return!1}}function Z(e){return null==e?"":e.toLowerCase()}function Q(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p=!1,inlineStylesheet:f=!0,maskInputOptions:h={},maskAttributeFn:g,maskTextFn:m,maskInputFn:S,slimDOMOptions:b,dataURLOptions:E={},inlineImages:w=!1,recordCanvas:T=!1,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:k=5e3,onStylesheetLoad:C,stylesheetLoadTimeout:A=5e3,keepIframeSrcFn:F=()=>!1,newlyAddedElement:R=!1}=t;let{preserveWhiteSpace:M=!0}=t;const N=X(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:S,dataURLOptions:E,inlineImages:w,recordCanvas:T,keepIframeSrcFn:F,newlyAddedElement:R});if(!N)return null;let D;D=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===_.Comment)return!0;if(e.type===_.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Z(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Z(e.attributes.name)||"icon"===Z(e.attributes.rel)||"apple-touch-icon"===Z(e.attributes.rel)||"shortcut icon"===Z(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Z(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Z(e.attributes.property).match(/^(og|twitter|fb):/)||Z(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Z(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Z(e.attributes.name)||"googlebot"===Z(e.attributes.name)||"bingbot"===Z(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Z(e.attributes.name)||"generator"===Z(e.attributes.name)||"framework"===Z(e.attributes.name)||"publisher"===Z(e.attributes.name)||"progid"===Z(e.attributes.name)||Z(e.attributes.property).match(/^article:/)||Z(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Z(e.attributes.name)||"yandex-verification"===Z(e.attributes.name)||"csrf-token"===Z(e.attributes.name)||"p:domain_verify"===Z(e.attributes.name)||"verify-v1"===Z(e.attributes.name)||"verification"===Z(e.attributes.name)||"shopify-checkout-api-token"===Z(e.attributes.name)))return!0}}return!1}(N,b)&&(M||N.type!==_.Text||N.isStyle||N.textContent.replace(/^\s+|\s+$/gm,"").length)?P():O;const L=Object.assign(N,{id:D});if(r.add(e,L),D===O)return null;I&&I(e);let U=!p;if(L.type===_.Element){U=U&&!L.needBlock,delete L.needBlock;const t=e.shadowRoot;t&&y(t)&&(L.isShadowHost=!0)}if((L.type===_.Document||L.type===_.Element)&&U){b.headWhitespace&&L.type===_.Element&&"head"===L.tagName&&(M=!1);const t={doc:n,mirror:r,blockClass:i,blockSelector:o,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:p,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:S,slimDOMOptions:b,dataURLOptions:E,inlineImages:w,recordCanvas:T,preserveWhiteSpace:M,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:k,onStylesheetLoad:C,stylesheetLoadTimeout:A,keepIframeSrcFn:F};for(const n of Array.from(e.childNodes)){const e=Q(n,t);e&&L.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Q(n,t);r&&(y(e.shadowRoot)&&(r.isShadow=!0),L.childNodes.push(r))}}return e.parentNode&&v(e.parentNode)&&y(e.parentNode)&&(L.isShadow=!0),L.type===_.Element&&"iframe"===L.tagName&&function(e,t,n){const r=e.contentWindow;if(!r)return;let i,o=!1;try{i=r.document.readyState}catch(e){return}if("complete"!==i){const r=setTimeout((()=>{o||(t(),o=!0)}),n);return void e.addEventListener("load",(()=>{clearTimeout(r),o=!0,t()}))}const s="about:blank";if(r.location.href!==s||e.src===s||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,(()=>{const t=e.contentDocument;if(t&&x){const n=Q(t,{doc:t,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:S,slimDOMOptions:b,dataURLOptions:E,inlineImages:w,recordCanvas:T,preserveWhiteSpace:M,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:k,onStylesheetLoad:C,stylesheetLoadTimeout:A,keepIframeSrcFn:F});n&&x(e,n)}}),k),L.type===_.Element&&"link"===L.tagName&&"stylesheet"===L.attributes.rel&&function(e,t,n){let r,i=!1;try{r=e.sheet}catch(e){return}if(r)return;const o=setTimeout((()=>{i||(t(),i=!0)}),n);e.addEventListener("load",(()=>{clearTimeout(o),i=!0,t()}))}(e,(()=>{if(C){const t=Q(e,{doc:n,mirror:r,blockClass:i,blockSelector:o,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:l,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:f,maskInputOptions:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:S,slimDOMOptions:b,dataURLOptions:E,inlineImages:w,recordCanvas:T,preserveWhiteSpace:M,onSerialize:I,onIframeLoad:x,iframeLoadTimeout:k,onStylesheetLoad:C,stylesheetLoadTimeout:A,keepIframeSrcFn:F});t&&C(e,t)}}),A),L}function ee(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}function te(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}let ne={map:{},getId:()=>-1,getNode:()=>null,removeNodeFromMap(){},has:()=>!1,reset(){}};function re(e,t,n={}){let r=null,i=0;return function(...o){const s=Date.now();i||!1!==n.leading||(i=s);const a=t-(s-i),c=this;a<=0||a>t?(r&&(!function(...e){we("clearTimeout")(...e)}(r),r=null),i=s,e.apply(c,o)):r||!1===n.trailing||(r=Te((()=>{i=!1===n.leading?0:Date.now(),r=null,e.apply(c,o)}),a))}}function ie(e,t,n,r,i=window){const o=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(e){Te((()=>{n.set.call(this,e)}),0),o&&o.set&&o.set.call(this,e)}}),()=>ie(e,t,o||{},!0)}function oe(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],i=n(r);return"function"==typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ne=new Proxy(ne,{get:(e,t,n)=>Reflect.get(e,t,n)}));let se=Date.now;function ae(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:ee([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||ee([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||ee([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:ee([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||ee([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||ee([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function ce(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ue(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function le(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function de(e,t,n,r,i){if(!e)return!1;const o=le(e);if(!o)return!1;const s=J(t,n);if(!i){const e=r&&o.matches(r);return s(o)&&!e}const a=G(o,s);let c=-1;return!(a<0)&&(r&&(c=G(o,J(null,r))),a>-1&&c<0||a<c)}function pe(e,t){return t.getId(e)===O}function fe(e,t){if(v(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||fe(e.parentNode,t))}function he(e){return Boolean(e.changedTouches)}function ge(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function me(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function _e(e){return Boolean(ee([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(se=()=>(new Date).getTime());class ve{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return r(this.styleIDMap.get(e),(()=>-1))}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ye(e){let t=null;return ee([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function Se(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=ye(n);)n=t;return n}(e);return t.contains(n)}function be(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Se(e))}const Ee={};function we(e){const t=Ee[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const i=t.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(t)}catch(e){}return Ee[e]=r.bind(window)}function Te(...e){return we("setTimeout")(...e)}var Ie=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Ie||{}),xe=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(xe||{}),ke=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ke||{}),Ce=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Ce||{});function Ae(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}function Fe(e){return"__ln"in e}class Re{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Ae([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Fe(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Fe(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Oe=(e,t)=>`${e}@${t}`;class Pe{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Re,r=e=>{let t=e,n=O;for(;n===O;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},i=i=>{if(!i.parentNode||!be(i))return;const o=v(i.parentNode)?this.mirror.getId(ye(i)):this.mirror.getId(i.parentNode),s=r(i);if(-1===o||-1===s)return n.addNode(i);const a=Q(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{ge(e,this.mirror)&&this.iframeManager.addIframe(e),me(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),_e(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:o,nextId:s,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)Ne(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||i(e);for(const e of this.addedSet)Le(this.droppedSet,e)||Ne(this.removes,e,this.mirror)?Le(this.movedSet,e)?i(e):this.droppedSet.add(e):i(e);let o=null;for(;n.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==t&&-1!==n&&(e=o)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}o=e.previous,n.removeNode(e.value),i(e.value)}const s={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.processMutation=e=>{if(!pe(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;de(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Y(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,le(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.attributeName,r=e.target.getAttribute(n);if("value"===n){const n=C(t),i=t.tagName;r=A(t,i,n);const o=w({maskInputOptions:this.maskInputOptions,tagName:i,type:n});r=T({isMasked:Y(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,o),element:t,value:r,maskInputFn:this.maskInputFn})}if(de(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===t.tagName&&"src"===n&&!this.keepIframeSrcFn(r)){if(t.contentDocument)return;n="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===n&&"INPUT"===t.tagName&&"password"===(e.oldValue||"").toLowerCase()&&t.setAttribute("data-rr-is-password","true"),!z(t.tagName,n)&&(i.attributes[n]=$(this.doc,I(t.tagName),I(n),r,t,this.maskAttributeFn),"style"===n)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const n=this.unattachedDoc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue);for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),o=t.style.getPropertyPriority(e);r!==n.style.getPropertyValue(e)||o!==n.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?r:[r,o]:i._unchangedStyles[e]=[r,o]}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(de(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=v(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);de(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||pe(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Me(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||fe(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Oe(n,r)]?Me(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!v(e.target)||!y(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(pe(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[Oe(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);de(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),_e(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Me(e,t){e.delete(t),t.childNodes.forEach((t=>Me(e,t)))}function Ne(e,t,n){return 0!==e.length&&De(e,t,n)}function De(e,t,n){const{parentNode:r}=t;if(!r)return!1;const i=n.getId(r);return!!e.some((e=>e.id===i))||De(e,r,n)}function Le(e,t){return 0!==e.size&&Ue(e,t)}function Ue(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Ue(e,n))}let Be;function je(e){Be=e}function He(){Be=void 0}const We=e=>{if(!Be)return e;return(...t)=>{try{return e(...t)}catch(e){if(Be&&!0===Be(e))return()=>{};throw e}}};function Ve(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}const qe=[];function Ke(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function $e(e,t){const n=new Pe;qe.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const i=Ve([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);i&&window[i]&&(r=window[i]);const o=new r(We((t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)})));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function ze({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,sampling:s}){if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,c=[];let u=null;return Object.keys(ke).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((s=>{let a=I(s);const l=(t=>s=>{const a=Ke(s);if(de(a,r,i,o,!0))return;let c=null,l=t;if("pointerType"in s){switch(s.pointerType){case"mouse":c=Ce.Mouse;break;case"touch":c=Ce.Touch;break;case"pen":c=Ce.Pen}c===Ce.Touch?ke[t]===ke.MouseDown?l="TouchStart":ke[t]===ke.MouseUp&&(l="TouchEnd"):Ce.Pen}else he(s)&&(c=Ce.Touch);null!==c?(u=c,(l.startsWith("Touch")&&c===Ce.Touch||l.startsWith("Mouse")&&c===Ce.Mouse)&&(c=null)):ke[t]===ke.Click&&(c=u,u=null);const d=he(s)?s.changedTouches[0]:s;if(!d)return;const p=n.getId(a),{clientX:f,clientY:h}=d;We(e)({type:ke[l],id:p,x:f,y:h,...null!==c&&{pointerType:c}})})(s);if(window.PointerEvent)switch(ke[s]){case ke.MouseDown:case ke.MouseUp:a=a.replace("mouse","pointer");break;case ke.TouchStart:case ke.TouchEnd:return}c.push(te(a,l,t))})),We((()=>{c.forEach((e=>e()))}))}function Ge({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,sampling:s}){return te("scroll",We(re(We((s=>{const a=Ke(s);if(!a||de(a,r,i,o,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=ae(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})})),s.scroll||100)),t)}const Je=["INPUT","TEXTAREA","SELECT"],Ye=new WeakMap;function Xe({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:l,userTriggeredOnInput:d,maskTextClass:p,unmaskTextClass:f,maskTextSelector:h,unmaskTextSelector:g}){function m(e){let n=Ke(e);const l=e.isTrusted,m=n&&x(n.tagName);if("OPTION"===m&&(n=n.parentElement),!n||!m||Je.indexOf(m)<0||de(n,r,i,o,!0))return;const v=n;if(v.classList.contains(s)||a&&v.matches(a))return;const y=C(n);let S=A(v,m,y),b=!1;const E=w({maskInputOptions:c,tagName:m,type:y}),I=Y(n,p,h,f,g,E);"radio"!==y&&"checkbox"!==y||(b=n.checked),S=T({isMasked:I,element:n,value:S,maskInputFn:u}),_(n,d?{text:S,isChecked:b,userTriggered:l}:{text:S,isChecked:b});const k=n.name;"radio"===y&&k&&b&&t.querySelectorAll(`input[type="radio"][name="${k}"]`).forEach((e=>{if(e!==n){const t=T({isMasked:I,element:e,value:A(e,m,y),maskInputFn:u});_(e,d?{text:t,isChecked:!b,userTriggered:!1}:{text:t,isChecked:!b})}}))}function _(t,r){const i=Ye.get(t);if(!i||i.text!==r.text||i.isChecked!==r.isChecked){Ye.set(t,r);const i=n.getId(t);We(e)({...r,id:i})}}const v=("last"===l.input?["change"]:["input","change"]).map((e=>te(e,We(m),t))),y=t.defaultView;if(!y)return()=>{v.forEach((e=>e()))};const S=y.Object.getOwnPropertyDescriptor(y.HTMLInputElement.prototype,"value"),b=[[y.HTMLInputElement.prototype,"value"],[y.HTMLInputElement.prototype,"checked"],[y.HTMLSelectElement.prototype,"value"],[y.HTMLTextAreaElement.prototype,"value"],[y.HTMLSelectElement.prototype,"selectedIndex"],[y.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&v.push(...b.map((e=>ie(e[0],e[1],{set(){We(m)({target:this,isTrusted:!1})}},!1,y)))),We((()=>{v.forEach((e=>e()))}))}function Ze(e){return function(e,t){if(nt("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||nt("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||nt("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||nt("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Qe(e,t,n){let r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function et({mirror:e,stylesheetManager:t},n){let r=null;r="#document"===n.nodeName?e.getId(n):e.getId(n.host);const i="#document"===n.nodeName?Ve([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Ve([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),o=Ve([i,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Ve([i,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==r&&-1!==r&&i&&o?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return Ve([o,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Ve([o,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==r&&-1!==r)try{t.adoptStyleSheets(e,r)}catch(e){}return n}}),We((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))):()=>{}}function tt(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=$e(e,e.doc),i=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const i="number"==typeof t.mousemove?t.mousemove:50,o="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let s,a=[];const c=re(We((t=>{const n=Date.now()-s;e(a.map((e=>(e.timeOffset-=n,e))),t),a=[],s=null})),o),u=We(re(We((e=>{const t=Ke(e),{clientX:n,clientY:i}=he(e)?e.changedTouches[0]:e;s||(s=se()),a.push({x:n,y:i,id:r.getId(t),timeOffset:se()-s}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?xe.Drag:e instanceof MouseEvent?xe.MouseMove:xe.TouchMove)})),i,{trailing:!1})),l=[te("mousemove",u,n),te("touchmove",u,n),te("drag",u,n)];return We((()=>{l.forEach((e=>e()))}))}(e),o=ze(e),s=Ge(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return te("resize",We(re(We((()=>{const t=ce(),i=ue();n===t&&r===i||(e({width:Number(i),height:Number(t)}),n=t,r=i)})),200)),t)}(e,{win:n}),c=Xe(e),u=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:i,sampling:o,doc:s}){const a=We((s=>re(We((o=>{const a=Ke(o);if(!a||de(a,t,n,r,!0))return;const{currentTime:c,volume:u,muted:l,playbackRate:d}=a;e({type:s,id:i.getId(a),currentTime:c,volume:u,muted:l,playbackRate:d})})),o.media||500))),c=[te("play",a(0),s),te("pause",a(1),s),te("seeked",a(2),s),te("volumechange",a(3),s),te("ratechange",a(4),s)];return We((()=>{c.forEach((e=>e()))}))}(e),l=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:We(((r,i,o)=>{const[s,a]=o,{id:c,styleId:u}=Qe(i,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:a}]}),r.apply(i,o)}))});const o=r.CSSStyleSheet.prototype.deleteRule;let s,a;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:We(((r,i,o)=>{const[s]=o,{id:a,styleId:c}=Qe(i,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:s}]}),r.apply(i,o)}))}),r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:We(((r,i,o)=>{const[s]=o,{id:a,styleId:c}=Qe(i,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:s}),r.apply(i,o)}))})),r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:We(((r,i,o)=>{const[s]=o,{id:a,styleId:c}=Qe(i,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:s}),r.apply(i,o)}))}));const c={};rt("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(rt("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),rt("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),rt("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach((([r,i])=>{u[r]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(u[r].insertRule,{apply:We(((r,i,o)=>{const[s,a]=o,{id:c,styleId:u}=Qe(i.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||u&&-1!==u)&&e({id:c,styleId:u,adds:[{rule:s,index:[...Ze(i),a||0]}]}),r.apply(i,o)}))}),i.prototype.deleteRule=new Proxy(u[r].deleteRule,{apply:We(((r,i,o)=>{const[s]=o,{id:a,styleId:c}=Qe(i.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...Ze(i),s]}]}),r.apply(i,o)}))})})),We((()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=o,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=u[e].insertRule,t.prototype.deleteRule=u[e].deleteRule}))}))}(e,{win:n}),d=et(e,e.doc),p=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:We(((i,s,a)=>{const[c,u,l]=a;if(n.has(c))return o.apply(s,[c,u,l]);const{id:d,styleId:p}=Qe(Ve([s,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(d&&-1!==d||p&&-1!==p)&&e({id:d,styleId:p,set:{property:c,value:u,priority:l},index:Ze(s.parentRule)}),i.apply(s,a)}))});const s=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:We(((i,o,a)=>{const[c]=a;if(n.has(c))return s.apply(o,[c]);const{id:u,styleId:l}=Qe(Ve([o,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,r.styleMirror);return(u&&-1!==u||l&&-1!==l)&&e({id:u,styleId:l,remove:{property:c},index:Ze(o.parentRule)}),i.apply(o,a)}))}),We((()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=s}))}(e,{win:n}),f=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,o=n.FontFace;n.FontFace=function(e,t,n){const r=new o(e,t,n);return i.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const s=oe(t.fonts,"add",(function(t){return function(n){return Te(We((()=>{const t=i.get(n);t&&(e(t),i.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=o})),r.push(s),We((()=>{r.forEach((e=>e()))}))}(e):()=>{},h=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,selectionCb:s}=e;let a=!0;const c=We((()=>{const e=t.getSelection();if(!e||a&&Ve([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],u=e.rangeCount||0;for(let t=0;t<u;t++){const s=e.getRangeAt(t),{startContainer:a,startOffset:u,endContainer:l,endOffset:d}=s;de(a,r,i,o,!0)||de(l,r,i,o,!0)||c.push({start:n.getId(a),startOffset:u,end:n.getId(l),endOffset:d})}s({ranges:c})}));return c(),te("selectionchange",c)}(e),g=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?oe(n.customElements,"define",(function(e){return function(n,r,i){try{t({define:{name:n}})}catch(e){}return e.apply(this,[n,r,i])}})):()=>{}}(e),m=[];for(const t of e.plugins)m.push(t.observer(t.callback,n,t.options));return We((()=>{qe.forEach((e=>e.reset())),r.disconnect(),i(),o(),s(),a(),c(),u(),l(),d(),p(),f(),h(),g(),m.forEach((e=>e()))}))}function nt(e){return void 0!==window[e]}function rt(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class it{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const i=n||this.getIdToRemoteIdMap(e),o=r||this.getRemoteIdToIdMap(e);let s=i.get(t);return s||(s=this.generateIdFn(),i.set(t,s),o.set(s,t)),s}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const i=r.get(t);return i||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function ot(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}class st{constructor(){this.crossOriginIframeMirror=new it(P),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class at{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new it(P),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new it(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),ot([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Ie.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Ie.IncrementalSnapshot,data:{source:xe.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ie.Meta:case Ie.Load:case Ie.DomContentLoaded:return!1;case Ie.Plugin:return t;case Ie.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Ie.IncrementalSnapshot:switch(t.data.source){case xe.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case xe.Drag:case xe.TouchMove:case xe.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case xe.ViewportResize:return!1;case xe.MediaInteraction:case xe.MouseInteraction:case xe.Scroll:case xe.CanvasMutation:case xe.Input:return this.replaceIds(t.data,e,["id"]),t;case xe.StyleSheetRule:case xe.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case xe.Font:return t;case xe.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case xe.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),ot([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t((t=>{this.replaceStyleIds(t,e,["styleId"])}))]),t}}return!1}replace(e,t,n,r){for(const i of r)(Array.isArray(t[i])||"number"==typeof t[i])&&(Array.isArray(t[i])?t[i]=e.getIds(n,t[i]):t[i]=e.getId(n,t[i]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===_.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class ct{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class ut{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!y(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=$e({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ge({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Te((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(et({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(oe(e.prototype,"attachShadow",(function(e){return function(r){const i=e.call(this,r);return this.shadowRoot&&be(this)&&n.addShadowRoot(this.shadowRoot,t),i}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class lt{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class dt{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new ve,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;this.styleMirror.has(t)?e=this.styleMirror.getId(t):(e=this.styleMirror.add(t),r.push({styleId:e,rules:Array.from(t.rules||CSSRule,((e,t)=>({rule:b(e),index:t})))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class pt{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){we("requestAnimationFrame")(...e)}((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let ft,ht;const gt=new E;function mt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:a=null,ignoreClass:c="rr-ignore",ignoreSelector:u=null,maskAllText:l=!1,maskTextClass:d="rr-mask",unmaskTextClass:p=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:g=!0,maskAllInputs:m,maskInputOptions:_,slimDOMOptions:v,maskAttributeFn:y,maskInputFn:S,maskTextFn:b,maxCanvasSize:w=null,packFn:T,sampling:I={},dataURLOptions:x={},mousemoveWait:k,recordCanvas:C=!1,recordCrossOriginIframes:A=!1,recordAfter:F=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:R=!1,collectFonts:O=!1,inlineImages:P=!1,plugins:M,keepIframeSrcFn:N=()=>!1,ignoreCSSAttributes:D=new Set([]),errorHandler:L,onMutation:U,getCanvasManager:B}=e;je(L);const j=!A||window.parent===window;let H=!1;if(!j)try{window.parent.document&&(H=!1)}catch(e){H=!0}if(j&&!t)throw new Error("emit function is required");void 0!==k&&void 0===I.mousemove&&(I.mousemove=k),gt.reset();const W=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==_?_:{},V=!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===v,headMetaDescKeywords:"all"===v}:v||{};let q;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let K=0;const $=e=>{for(const t of M||[])t.eventProcessor&&(e=t.eventProcessor(e));return T&&!H&&(e=T(e)),e};ft=(e,o)=>{const s=e;if(s.timestamp=se(),!i([qe,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||s.type===Ie.FullSnapshot||s.type===Ie.IncrementalSnapshot&&s.data.source===xe.Mutation||qe.forEach((e=>e.unfreeze())),j)i([t,"optionalCall",e=>e($(s),o)]);else if(H){const e={type:"rrweb",event:$(s),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(s.type===Ie.FullSnapshot)q=s,K=0;else if(s.type===Ie.IncrementalSnapshot){if(s.data.source===xe.Mutation&&s.data.isAttachIframe)return;K++;const e=r&&K>=r,t=n&&q&&s.timestamp-q.timestamp>n;(e||t)&&re(!0)}};const z=e=>{ft({type:Ie.IncrementalSnapshot,data:{source:xe.Mutation,...e}})},G=e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.Scroll,...e}}),J=e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.CanvasMutation,...e}}),Y=new dt({mutationCb:z,adoptedStyleSheetCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.AdoptedStyleSheet,...e}})}),X="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new st:new at({mirror:gt,mutationCb:z,stylesheetManager:Y,recordCrossOriginIframes:A,wrappedEmit:ft});for(const e of M||[])e.getMirror&&e.getMirror({nodeMirror:gt,crossOriginIframeMirror:X.crossOriginIframeMirror,crossOriginIframeStyleMirror:X.crossOriginIframeStyleMirror});const Z=new pt,ee=function(e,t){try{return e?e(t):new lt}catch(e){return new lt}}(B,{mirror:gt,win:window,mutationCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.CanvasMutation,...e}}),recordCanvas:C,blockClass:o,blockSelector:s,unblockSelector:a,maxCanvasSize:w,sampling:I.canvas,dataURLOptions:x,errorHandler:L}),ne="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ct:new ut({mutationCb:z,scrollCb:G,bypassOptions:{onMutation:U,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskInputOptions:W,dataURLOptions:x,maskAttributeFn:y,maskTextFn:b,maskInputFn:S,recordCanvas:C,inlineImages:P,sampling:I,slimDOMOptions:V,iframeManager:X,stylesheetManager:Y,canvasManager:ee,keepIframeSrcFn:N,processedNodeManager:Z},mirror:gt}),re=(e=!1)=>{ft({type:Ie.Meta,data:{href:window.location.href,width:ue(),height:ce()}},e),Y.reset(),ne.init(),qe.forEach((e=>e.lock()));const t=function(e,t){const{mirror:n=new E,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:o=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:l=null,inlineStylesheet:d=!0,inlineImages:p=!1,recordCanvas:f=!1,maskAllInputs:h=!1,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOM:v=!1,dataURLOptions:y,preserveWhiteSpace:S,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:T,onStylesheetLoad:I,stylesheetLoadTimeout:x,keepIframeSrcFn:k=()=>!1}=t||{};return Q(e,{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===h?{}:h,maskAttributeFn:g,maskTextFn:m,maskInputFn:_,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:y,inlineImages:p,recordCanvas:f,preserveWhiteSpace:S,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:T,onStylesheetLoad:I,stylesheetLoadTimeout:x,keepIframeSrcFn:k,newlyAddedElement:!1})}(document,{mirror:gt,blockClass:o,blockSelector:s,unblockSelector:a,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:g,maskAllInputs:W,maskAttributeFn:y,maskInputFn:S,maskTextFn:b,slimDOM:V,dataURLOptions:x,recordCanvas:C,inlineImages:P,onSerialize:e=>{ge(e,gt)&&X.addIframe(e),me(e,gt)&&Y.trackLinkElement(e),_e(e)&&ne.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{X.attachIframe(e,t),ne.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{Y.attachLinkElement(e,t)},keepIframeSrcFn:N});t&&(ft({type:Ie.FullSnapshot,data:{node:t,initialOffset:ae(window)}}),qe.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Y.adoptStyleSheets(document.adoptedStyleSheets,gt.getId(document)))};ht=re;try{const e=[],t=e=>We(tt)({onMutation:U,mutationCb:z,mousemoveCb:(e,t)=>ft({type:Ie.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.MouseInteraction,...e}}),scrollCb:G,viewportResizeCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.ViewportResize,...e}}),inputCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.Input,...e}}),mediaInteractionCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.MediaInteraction,...e}}),styleSheetRuleCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.StyleSheetRule,...e}}),styleDeclarationCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>ft({type:Ie.IncrementalSnapshot,data:{source:xe.Font,...e}}),selectionCb:e=>{ft({type:Ie.IncrementalSnapshot,data:{source:xe.Selection,...e}})},customElementCb:e=>{ft({type:Ie.IncrementalSnapshot,data:{source:xe.CustomElement,...e}})},blockClass:o,ignoreClass:c,ignoreSelector:u,maskAllText:l,maskTextClass:d,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:W,inlineStylesheet:g,sampling:I,recordCanvas:C,inlineImages:P,userTriggeredOnInput:R,collectFonts:O,doc:e,maskAttributeFn:y,maskInputFn:S,maskTextFn:b,keepIframeSrcFn:N,blockSelector:s,unblockSelector:a,slimDOMOptions:V,dataURLOptions:x,mirror:gt,iframeManager:X,stylesheetManager:Y,shadowDomManager:ne,processedNodeManager:Z,canvasManager:ee,ignoreCSSAttributes:D,plugins:i([M,"optionalAccess",e=>e.filter,"call",e=>e((e=>e.observer)),"optionalAccess",e=>e.map,"call",e=>e((e=>({observer:e.observer,options:e.options,callback:t=>ft({type:Ie.Plugin,data:{plugin:e.name,payload:t}})})))])||[]},{});X.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){}}));const n=()=>{re(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(te("DOMContentLoaded",(()=>{ft({type:Ie.DomContentLoaded,data:{}}),"DOMContentLoaded"===F&&n()}))),e.push(te("load",(()=>{ft({type:Ie.Load,data:{}}),"load"===F&&n()}),window))),()=>{e.forEach((e=>e())),Z.destroy(),ht=void 0,He()}}catch(e){}}mt.mirror=gt,mt.takeFullSnapshot=function(e){if(!ht)throw new Error("please take full snapshot after start recording");ht(e)};const _t=3;function vt(e){return e>9999999999?e:1e3*e}function yt(e){return e>9999999999?e/1e3:e}function St(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate((()=>(e.throttledAddEvent({type:Ie.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:s.normalize(t,10,1e3)}}),"console"===t.category))))}const bt="button,a";function Et(e){return e.closest(bt)||e}function wt(e){const t=Tt(e);return t&&t instanceof Element?Et(t):t}function Tt(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let It;function xt(e){return It||(It=[],s.fill(c,"open",(function(e){return function(...t){if(It)try{It.forEach((e=>e()))}catch(e){}return e.apply(c,t)}}))),It.push(e),()=>{const t=It?It.indexOf(e):-1;t>-1&&It.splice(t,1)}}class kt{constructor(e,t,n=St){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=xt((()=>{this._lastMutation=At()}));this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!Ct.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:yt(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some((e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1))||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=yt(e)}registerScroll(e=Date.now()){this._lastScroll=yt(e)}registerClick(e){const t=Et(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach((e=>{e.clickCount++}))}_getClicks(e){return this._clicks.filter((t=>t.node===e))}_checkClicks(){const e=[],t=At();this._clicks.forEach((n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)}));for(const t of e){const e=this._clicks.indexOf(t);e>-1&&(this._generateBreadcrumbs(t),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,i=!n&&!r,{clickCount:o,clickBreadcrumb:s}=e;if(i){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",i={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.slowClickDetected",data:{...s.data,url:c.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:o||1}};this._addBreadcrumbEvent(t,i)}else if(o>1){const e={type:"default",message:s.message,timestamp:s.timestamp,category:"ui.multiClick",data:{...s.data,url:c.location.href,route:t.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=a.setTimeout((()=>this._checkClicks()),1e3)}}const Ct=["A","BUTTON","INPUT"];function At(){return Date.now()/1e3}function Ft(e,t){try{if(!function(e){return e.type===_t}(t))return;const{source:n}=t.data;if(n===xe.Mutation&&e.registerMutation(t.timestamp),n===xe.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===xe.MouseInteraction}(t)){const{type:n,id:r}=t.data,i=mt.mirror.getNode(r);i instanceof HTMLElement&&n===ke.Click&&e.registerClick(i)}}catch(e){}}function Rt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var Ot;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Ot||(Ot={}));const Pt=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Mt(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(Pt.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const Nt=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?wt(e.event):Tt(e.event),n=s.htmlTreeAsString(r,{maxStringLength:200})||"<unknown>"}catch(e){n="<unknown>"}return{target:r,message:n}}(e);return Rt({category:`ui.${e.name}`,...Dt(t,n)})}(t);if(!n)return;const r="click"===t.name,i=r?t.event:void 0;var o,a,c;!(r&&e.clickDetector&&i&&i.target)||i.altKey||i.metaKey||i.ctrlKey||i.shiftKey||(o=e.clickDetector,a=n,c=wt(t.event),o.handleClick(a,c)),St(e,n)};function Dt(e,t){const n=mt.mirror.getId(e),r=n&&mt.mirror.getNode(n),i=r&&mt.mirror.getMeta(r),o=i&&function(e){return e.type===Ot.Element}(i)?i:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map((e=>e.type===Ot.Text&&e.textContent)).filter(Boolean).map((e=>e.trim())).join(""),attributes:Mt(o.attributes)}}:{}}}function Lt(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:o,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!o)return null;const c=t||r||i,u=1===o.length;if(!c&&u)return null;const l=s.htmlTreeAsString(a,{maxStringLength:200})||"<unknown>",d=Dt(a,l);return Rt({category:"ui.keyDown",message:l,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:o}})}(t);n&&St(e,n)}const Ut={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:i,startTime:o,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:Ht(o),end:Ht(i),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:i}=e,o=Ht(i);return{type:n,name:r,start:o,end:o+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:i,domComplete:o,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:l,loadEventEnd:d,redirectCount:p,startTime:f,transferSize:h,type:g}=e;if(0===i)return null;return{type:`${t}.${g}`,start:Ht(f),end:Ht(o),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:s,duration:i,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:l,loadEventEnd:d,domComplete:o,redirectCount:p}}}};function Bt(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function jt(e){const t=Ut[e.entryType];return t?t(e):null}function Ht(e){return((s.browserPerformanceTimeOrigin||c.performance.timeOrigin)+e)/1e3}function Wt(e){const t=e.entries[e.entries.length-1];return $t(e,"largest-contentful-paint",t?t.element:void 0)}function Vt(e){const t=e.entries[0];return $t(e,"cumulative-layout-shift",t&&t.sources&&t.sources[0]?t.sources[0].node:void 0)}function qt(e){const t=e.entries[e.entries.length-1];return $t(e,"first-input-delay",t?t.target:void 0)}function Kt(e){const t=e.entries[e.entries.length-1];return $t(e,"interaction-to-next-paint",t?t.target:void 0)}function $t(e,t,n){const r=e.value,i=e.rating,o=Ht(r);return{type:"web-vital",name:t,start:o,end:o,data:{value:r,size:r,rating:i,nodeId:n?mt.mirror.getId(n):void 0}}}const zt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Gt='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(J)return J.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function Jt(e,t){zt&&(s.logger.info(e),t&&Xt(e))}function Yt(e,t){zt&&(s.logger.info(e),t&&a.setTimeout((()=>{Xt(e)}),0))}function Xt(e){o.addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Zt extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class Qt{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>h)throw new Zt;this.events.push(e)}finish(){return new Promise((e=>{const t=this.events;this.clear(),e(JSON.stringify(t))}))}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map((e=>e.timestamp)).sort()[0];return e?vt(e):null}}class en{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise(((e,t)=>{this._worker.addEventListener("message",(({data:n})=>{n.success?e():t()}),{once:!0}),this._worker.addEventListener("error",(e=>{t(e)}),{once:!0})}))),this._ensureReadyPromise}destroy(){Jt("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise(((r,i)=>{const o=({data:t})=>{const a=t;if(a.method===e&&a.id===n){if(this._worker.removeEventListener("message",o),!a.success)return zt&&s.logger.error("[Replay]",a.response),void i(new Error("Error in compression worker"));r(a.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:n,method:e,arg:t})}))}_getAndIncrementId(){return this._id++}}class tn{constructor(e){this._worker=new en(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=vt(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>h?Promise.reject(new Zt):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,(e=>{zt&&s.logger.warn('[Replay] Sending "clear" message to worker failed',e)}))}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class nn{constructor(e){this._fallback=new Qt,this._compression=new tn(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void Jt("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const t of e)n.push(this._compression.addEvent(t));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(e){zt&&s.logger.warn("[Replay] Failed to add events when switching buffers.",e)}}}function rn({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob([Gt]);return URL.createObjectURL(e)}();return""}();if(!t)return;Jt("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new nn(n)}catch(e){Jt("[Replay] Failed to create compression worker")}}(t);if(e)return e}return Jt("[Replay] Using simple buffer"),new Qt}function on(){try{return"sessionStorage"in c&&!!c.sessionStorage}catch(e){return!1}}function sn(e){!function(){if(!on())return;try{c.sessionStorage.removeItem(u)}catch(e){}}(),e.session=void 0}function an(e){return void 0!==e&&Math.random()<e}function cn(e){const t=Date.now();return{id:e.id||s.uuid4(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function un(e){if(on())try{c.sessionStorage.setItem(u,JSON.stringify(e))}catch(e){}}function ln({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const i=function(e,t){return an(e)?"session":!!t&&"buffer"}(e,t),o=cn({sampled:i,previousSessionId:r});return n&&un(o),o}function dn(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function pn(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return dn(e.started,t,r)||dn(e.lastActivity,n,r)}function fn(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!pn(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function hn({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},i){const o=i.stickySession&&function(e){if(!on())return null;try{const t=c.sessionStorage.getItem(u);if(!t)return null;const n=JSON.parse(t);return Yt("[Replay] Loading existing session",e),cn(n)}catch(e){return null}}(e);return o?fn(o,{sessionIdleExpire:t,maxReplayDuration:n})?(Yt("[Replay] Session in sessionStorage is expired, creating new one..."),ln(i,{previousSessionId:o.id})):o:(Yt("[Replay] Creating new session",e),ln(i,{previousSessionId:r}))}function gn(e,t,n){return!!_n(e,t)&&(mn(e,t,n),!0)}async function mn(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Ie.Custom}(e))return t(e)}catch(e){return zt&&s.logger.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",e),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!r)return;return await e.eventBuffer.addEvent(r)}catch(t){const n=t&&t instanceof Zt?"addEventSizeExceeded":"addEvent";zt&&s.logger.error(t),await e.stop({reason:n});const r=o.getClient();r&&r.recordDroppedEvent("internal_sdk_error","replay")}}function _n(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=vt(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(Yt(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function vn(e){return!e.type}function yn(e){return"transaction"===e.type}function Sn(e){return"feedback"===e.type}function bn(e){return(t,n)=>{if(!e.isEnabled()||!vn(t)&&!yn(t))return;const r=n&&n.statusCode;!r||r<200||r>=300||(yn(t)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"==typeof r&&!r(t))return;a.setTimeout((()=>{e.sendBufferedReplayOrFlush()}))}(e,t))}}function En(e){return t=>{e.isEnabled()&&vn(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0]&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){St(e,Rt({category:"replay.hydrate-error",data:{url:s.getLocationHref()}}))}}(e,t)}}function wn(e){const t=o.getClient();t&&t.on("beforeAddBreadcrumb",(t=>function(e,t){if(!e.isEnabled()||!Tn(t))return;const n=function(e){if(!Tn(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return Rt(e);let n=!1;const r=t.map((e=>{if(!e)return e;if("string"==typeof e)return e.length>f?(n=!0,`${e.slice(0,f)}`):e;if("object"==typeof e)try{const t=s.normalize(e,7);return JSON.stringify(t).length>f?(n=!0,`${JSON.stringify(t,null,2).slice(0,f)}`):t}catch(e){}return e}));return Rt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(e);return Rt(e)}(t);n&&St(e,n)}(e,t)))}function Tn(e){return!!e.category}function In(e){return Object.assign(((t,n)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!vn(t)&&!yn(t)&&!Sn(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(Sn(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate((()=>!t.timestamp||(e.throttledAddEvent({type:Ie.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1)))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return zt&&s.logger.log("[Replay] Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==d&&!(!t.exception||t.type)&&an(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),t}),{id:"Replay"})}function xn(e,t){return t.map((({type:t,start:n,end:r,name:i,data:o})=>{const s=e.throttledAddEvent({type:Ie.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:i,startTimestamp:n,endTimestamp:r,data:o}}});return"string"==typeof s?Promise.resolve(null):s}))}function kn(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate((()=>(xn(e,[n]),!1))))}}function Cn(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!zt||!e.getOptions()._experiments.traceInternals)&&o.isSentryRequestUrl(t,o.getClient())}(e,t.name)||e.addUpdate((()=>(xn(e,[t]),!0))))}function An(e){if(!e)return;const t=new TextEncoder;try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Ln(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(e){}}function Fn(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Rn(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Ln(e)];if(!e)return[void 0]}catch(t){return zt&&s.logger.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return zt&&s.logger.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function On(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Pn(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:o,statusCode:a,request:c,response:u}=t;return{type:e,start:n/1e3,end:r/1e3,name:i,data:s.dropUndefinedKeys({method:o,statusCode:a,request:c,response:u})}}function Mn(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Nn(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:i,warnings:o}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>p,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,p);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(e){}return{body:e}}(n);return r.body=i,o&&o.length>0&&(r._meta={warnings:o}),r}function Dn(e,t){return Object.entries(e).reduce(((n,[r,i])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=i),n}),{})}function Ln(e){return new URLSearchParams(e).toString()}function Un(e,t){const n=function(e,t=c.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(c.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return s.stringMatchesSomePattern(n,t)}async function Bn(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:o=r}=t,{url:c,method:u,status_code:l=0,request_body_size:d,response_body_size:p}=e.data,f=Un(c,n.networkDetailAllowUrls)&&!Un(c,n.networkDetailDenyUrls),h=f?function({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const i=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Wn(e[0],t);if(2===e.length)return Wn(e[1],t);return{}}(n,t):{};if(!e)return Nn(i,r,void 0);const o=jn(n),[s,a]=Rn(o),c=Nn(i,r,s);if(a)return On(c,a);return c}(n,t.input,d):Mn(d),g=await async function(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,i){if(!e&&void 0!==i)return Mn(i);const o=r?Hn(r.headers,n):{};if(!r||!t&&void 0!==i)return Nn(o,i,void 0);const[c,u]=await async function(e){const t=function(e){try{return e.clone()}catch(e){zt&&s.logger.warn("[Replay] Failed to clone response body",e)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise(((t,n)=>{const r=a.setTimeout((()=>n(new Error("Timeout while trying to read response body"))),500);(async function(e){return await e.text()})(e).then((e=>t(e)),(e=>n(e))).finally((()=>clearTimeout(r)))}))}(t);return[e]}catch(e){return zt&&s.logger.warn("[Replay] Failed to get text body from response",e),[void 0,"BODY_PARSE_ERROR"]}}(r),l=function(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:i}){try{const o=e&&e.length&&void 0===n?An(e):n;return r?Nn(i,o,t?e:void 0):Mn(o)}catch(e){return zt&&s.logger.warn("[Replay] Failed to serialize response body",e),Nn(i,n,void 0)}}(c,{networkCaptureBodies:t,responseBodySize:i,captureDetails:e,headers:o});if(u)return On(l,u);return l}(f,n,t.response,p);return{startTimestamp:i,endTimestamp:o,url:c,method:u,statusCode:l,request:h,response:g}}(e,t,n),i=Pn("resource.fetch",r);Cn(n.replay,i)}catch(e){zt&&s.logger.error("[Replay] Failed to capture fetch breadcrumb",e)}}function jn(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Hn(e,t){const n={};return t.forEach((t=>{e.get(t)&&(n[t]=e.get(t))})),n}function Wn(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Hn(n,t):Array.isArray(n)?{}:Dn(n,t):{}}async function Vn(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:o=r,input:c,xhr:u}=t,{url:l,method:d,status_code:p=0,request_body_size:f,response_body_size:h}=e.data;if(!l)return null;if(!u||!Un(l,n.networkDetailAllowUrls)||Un(l,n.networkDetailDenyUrls)){return{startTimestamp:i,endTimestamp:o,url:l,method:d,statusCode:p,request:Mn(f),response:Mn(h)}}const g=u[a.SENTRY_XHR_DATA_KEY],m=g?Dn(g.request_headers,n.networkRequestHeaders):{},_=Dn(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e}),{})}(u),n.networkResponseHeaders),[v,y]=n.networkCaptureBodies?Rn(c):[void 0],[S,b]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(e){t.push(e)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(t){return zt&&s.logger.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return zt&&s.logger.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(e){t.push(e)}return zt&&s.logger.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(u):[void 0],E=Nn(m,f,v),w=Nn(_,h,S);return{startTimestamp:i,endTimestamp:o,url:l,method:d,statusCode:p,request:y?On(E,y):E,response:b?On(w,b):w}}(e,t,n),i=Pn("resource.xhr",r);Cn(n.replay,i)}catch(e){zt&&s.logger.error("[Replay] Failed to capture xhr breadcrumb",e)}}function qn(e,t){const{xhr:n,input:r}=t;if(!n)return;const i=An(r),o=n.getResponseHeader("content-length")?Fn(n.getResponseHeader("content-length")):function(e,t){try{return An("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e)}catch(e){return}}(n.response,n.responseType);void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}function Kn(e){const t=o.getClient();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),c={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};t&&t.on("beforeAddBreadcrumb",((e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(qn(t,n),Vn(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t){const{input:n,response:r}=t,i=An(n?jn(n):void 0),o=r?Fn(r.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}(t,n),Bn(t,n,e))}catch(e){zt&&s.logger.warn("Error when enriching network breadcrumb")}}(c,e,t)))}catch(e){}}function $n(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function zn(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(zt&&s.logger.warn("[Replay] Received replay event after session expired."));const i=r||!t;t=!0,e.clickDetector&&Ft(e.clickDetector,n),e.addUpdate((()=>{if("buffer"===e.recordingMode&&i&&e.setInitialState(),!gn(e,n,i))return!0;if(!i)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;gn(e,function(e){const t=e.getOptions();return{type:Ie.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,i),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(Jt(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&un(e.session))}return"session"===e.recordingMode&&e.flush(),!0}))}}async function Gn({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:i,session:a}){const c=function({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${r}${e}`;else{const t=(new TextEncoder).encode(r);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:u,errorIds:p,traceIds:f,initialTimestamp:h}=r,g=o.getClient(),m=o.getCurrentScope(),_=g&&g.getTransport(),v=g&&g.getDsn();if(!(g&&_&&v&&a.sampled))return s.resolvedSyncPromise({});const y={type:l,replay_start_timestamp:h/1e3,timestamp:i/1e3,error_ids:p,trace_ids:f,urls:u,replay_id:t,segment_id:n,replay_type:a.sampled},S=await async function({client:e,scope:t,replayId:n,event:r}){const i={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit("preprocessEvent",r,i);const s=await o.prepareEvent(e.getOptions(),r,i,t,e,o.getIsolationScope());if(!s)return null;s.platform=s.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u}=a&&a.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0"},s}({scope:m,client:g,replayId:t,event:y});if(!S)return g.recordDroppedEvent("event_processor","replay",y),Jt("An event processor returned `null`, will not send event."),s.resolvedSyncPromise({});delete S.sdkProcessingMetadata;const b=function(e,t,n,r){return s.createEnvelope(s.createEventEnvelopeHeaders(e,s.getSdkMetadataForEnvelopeHeader(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(S,c,v,g.getOptions().tunnel);let E;try{E=await _.send(b)}catch(e){const t=new Error(d);try{t.cause=e}catch(e){}throw t}if("number"==typeof E.statusCode&&(E.statusCode<200||E.statusCode>=300))throw new Jn(E.statusCode);const w=s.updateRateLimits({},E);if(s.isRateLimited(w,"replay"))throw new Yn(w);return E}class Jn extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Yn extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Xn(e,t={count:0,interval:5e3}){const{recordingData:n,options:r}=e;if(n.length)try{return await Gn(e),!0}catch(n){if(n instanceof Jn||n instanceof Yn)throw n;if(o.setContext("Replays",{_retryCount:t.count}),zt&&r._experiments&&r._experiments.captureExceptions&&o.captureException(n),t.count>=3){const e=new Error(`${d} - max retries exceeded`);try{e.cause=n}catch(e){}throw e}return t.interval*=++t.count,new Promise(((n,r)=>{a.setTimeout((async()=>{try{await Xn(e,t),n(!0)}catch(e){r(e)}}),t.interval)}))}}const Zn="__THROTTLED";function Qn(e,t,n){const r=new Map;let i=!1;return(...o)=>{const s=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach(((e,n)=>{n<t&&r.delete(n)}))})(s),[...r.values()].reduce(((e,t)=>e+t),0)>=t){const e=i;return i=!0,e?"__SKIPPED":Zn}i=!1;const a=r.get(s)||0;return r.set(s,a+1),e(...o)}}class er{constructor({options:e,recordingOptions:t}){er.prototype.__init.call(this),er.prototype.__init2.call(this),er.prototype.__init3.call(this),er.prototype.__init4.call(this),er.prototype.__init5.call(this),er.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let r,i,o;const s=n&&n.maxWait?Math.max(n.maxWait,t):0;function c(){return u(),r=e(),r}function u(){void 0!==i&&clearTimeout(i),void 0!==o&&clearTimeout(o),i=o=void 0}function l(){return i&&clearTimeout(i),i=a.setTimeout(c,t),s&&void 0===o&&(o=a.setTimeout(c,s)),r}return l.cancel=u,l.flush=function(){return void 0!==i||void 0!==o?c():r},l}((()=>this._flush()),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Qn(((e,t)=>function(e,t,n){return _n(e,t)?mn(e,t,n):Promise.resolve(null)}(this,e,t)),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:r}=this.getOptions(),i=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:r?r.join(","):""}:void 0;i&&(this.clickDetector=new kt(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",Yt(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Yt("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=hn({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Yt("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=hn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=mt({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:zn(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{Jt("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,sn(this)}catch(e){this._handleException(e)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Jt("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),Jt("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();Jt("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&dn(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${c.location.pathname}${c.location.hash}${c.location.search}`,t=`${c.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Zn){const e=Rt({category:"replay.throttled"});this.addUpdate((()=>!gn(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}})))}return n}getCurrentRoute(){const e=this.lastActiveSpan||o.getActiveSpan(),t=e&&o.getRootSpan(e),n=(t&&o.spanToJSON(t).data||{})[o.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];if(t&&n&&["route","custom"].includes(n))return o.spanToJSON(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=rn({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){zt&&s.logger.error("[Replay]",e),zt&&this._options._experiments&&this._options._experiments.captureExceptions&&o.captureException(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=hn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!fn(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{c.document.addEventListener("visibilitychange",this._handleVisibilityChange),c.addEventListener("blur",this._handleWindowBlur),c.addEventListener("focus",this._handleWindowFocus),c.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(!function(e){const t=o.getClient();a.addClickKeypressInstrumentationHandler(Nt(e)),a.addHistoryInstrumentationHandler(kn(e)),wn(e),Kn(e);const n=In(e);o.addEventProcessor(n),t&&(t.on("beforeSendEvent",En(e)),t.on("afterSendEvent",bn(e)),t.on("createDsc",(t=>{const n=e.getSessionId();n&&e.isEnabled()&&"session"===e.recordingMode&&e.checkAndHandleExpiredSession()&&(t.replay_id=n)})),t.on("spanStart",(t=>{e.lastActiveSpan=t})),t.on("spanEnd",(t=>{e.lastActiveSpan=t})),t.on("beforeSendFeedback",((t,n)=>{const r=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&r&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=r)})))}(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const r=[];return["navigation","paint","resource"].forEach((e=>{r.push(a.addPerformanceInstrumentationHandler(e,n))})),r.push(a.addLcpInstrumentationHandler(Bt(Wt,e)),a.addClsInstrumentationHandler(Bt(Vt,e)),a.addFidInstrumentationHandler(Bt(qt,e)),a.addInpInstrumentationHandler(Bt(Kt,e))),()=>{r.forEach((e=>e()))}}(this)}_removeListeners(){try{c.document.removeEventListener("visibilitychange",this._handleVisibilityChange),c.removeEventListener("blur",this._handleWindowBlur),c.removeEventListener("focus",this._handleWindowFocus),c.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===c.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Rt({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Rt({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{Lt(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;pn(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):Jt("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate((()=>{this.throttledAddEvent({type:Ie.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})}))}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(jt).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(xn(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(xn(e,[$n(c.performance.memory)]))}catch(e){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Xn({replayId:e,recordingData:i,segmentId:r,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(e){this._handleException(e),this.stop({reason:"sendReplay"});const t=o.getClient();t&&t.recordDroppedEvent("send_error","replay")}}else zt&&s.logger.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(zt&&s.logger.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,i=n>this._options.maxReplayDuration+5e3;if(r||i)return Jt(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${r?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(r&&this._debouncedFlush());const o=this.eventBuffer;if(o&&0===this.session.segmentId&&!o.hasCheckout&&Jt("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(e){zt&&s.logger.error(e)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&un(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,r=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||r){const e=Rt({category:"replay.mutations",data:{count:t,limit:r}});this._createCustomBreadcrumb(e)}return!r||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function tr(e,t){return[...e,...t].join(",")}const nr='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',rr=["content-length","content-type","accept"];let ir=!1;class or{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:r=36e5,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:l=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:_=[],networkDetailDenyUrls:v=[],networkCaptureBodies:y=!0,networkRequestHeaders:S=[],networkResponseHeaders:b=[],mask:E=[],maskAttributes:w=["title","placeholder"],unmask:T=[],block:I=[],unblock:x=[],ignore:k=[],maskFn:C,beforeAddRecordingEvent:A,beforeErrorSampling:F}={}){this.name=or.id;const R=function({mask:e,unmask:t,block:n,unblock:r,ignore:i}){return{maskTextSelector:tr(e,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:tr(t,[]),blockSelector:tr(n,[".sentry-block","[data-sentry-block]",'base[href="/"]']),unblockSelector:tr(r,[]),ignoreSelector:tr(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:E,unmask:T,block:I,unblock:x,ignore:k});if(this._recordingOptions={maskAllInputs:l,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:i,value:o}){return r?i.unmaskTextSelector&&e.matches(i.unmaskTextSelector)?o:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o:o}({maskAttributes:w,maskAllText:u,privacyOptions:R,key:e,value:t,el:n}),...R,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(e){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,g),stickySession:i,useCompression:o,workerUrl:a,blockAllMedia:d,maskAllInputs:l,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:_,networkDetailDenyUrls:v,networkCaptureBodies:y,networkRequestHeaders:sr(S),networkResponseHeaders:sr(b),beforeAddRecordingEvent:A,beforeErrorSampling:F,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${nr}`:nr),this._isInitialized&&s.isBrowser())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return ir}set _isInitialized(e){ir=e}afterAllSetup(e){s.isBrowser()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...s.dropUndefinedKeys(e)},i=o.parseSampleRate(n.replaysSessionSampleRate),a=o.parseSampleRate(n.replaysOnErrorSampleRate);null==i&&null==a&&s.consoleSandbox((()=>{}));null!=i&&(r.sessionSampleRate=i);null!=a&&(r.errorSampleRate=a);return r}(this._initialOptions,e);this._replay=new er({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(e){}}}function sr(e){return[...rr,...e.map((e=>e.toLowerCase()))]}or.__initStatic(),t.getReplay=function(){const e=o.getClient();return e&&e.getIntegrationByName("Replay")},t.replayIntegration=e=>new or(e)},8739:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(8504),s=n(5115),a=n(3755),c=n(1580);class u extends r.BaseClient{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e},n=a.WINDOW.SENTRY_SDK_SOURCE||i.getSDKSource();r.applySdkMetadata(t,"browser",["browser"],n),super(t),t.sendClientReports&&a.WINDOW.document&&a.WINDOW.document.addEventListener("visibilitychange",(()=>{"hidden"===a.WINDOW.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return s.eventFromException(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return s.eventFromMessage(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(o.DEBUG_BUILD&&i.logger.warn("SDK not enabled, will not capture user feedback."));const t=c.createUserFeedbackEnvelope(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(o.DEBUG_BUILD&&i.logger.log("No outcomes to send"));if(!this._dsn)return void(o.DEBUG_BUILD&&i.logger.log("No dsn provided, will not send outcomes"));o.DEBUG_BUILD&&i.logger.log("Sending outcomes:",e);const t=i.createClientReportEnvelope(e,this._options.tunnel&&i.dsnToString(this._dsn));this.sendEnvelope(t)}}t.BrowserClient=u},8504:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},5115:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837);function o(e,t){const n=c(e,t),r={type:t&&t.name,value:l(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function s(e,t,n,s){const a=r.getClient(),u=a&&a.getOptions().normalizeDepth,l=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),d={__serialized__:i.normalizeToSize(t,u)};if(l)return{exception:{values:[o(e,l)]},extra:d};const p={exception:{values:[{type:i.isEvent(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:f(t,{isUnhandledRejection:s})}]},extra:d};if(n){const t=c(e,n);t.length&&(p.exception.values[0].stacktrace={frames:t})}return p}function a(e,t){return{exception:{values:[o(e,t)]}}}function c(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&u.test(e.message))return 1;return 0}(t),i=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,i)}catch(e){}return[]}const u=/Minified React error #\d+;/i;function l(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function d(e,t,n,r,o){let c;if(i.isErrorEvent(t)&&t.error){return a(e,t.error)}if(i.isDOMError(t)||i.isDOMException(t)){const o=t;if("stack"in t)c=a(e,t);else{const t=o.name||(i.isDOMError(o)?"DOMError":"DOMException"),s=o.message?`${t}: ${o.message}`:t;c=p(e,s,n,r),i.addExceptionTypeValue(c,s)}return"code"in o&&(c.tags={...c.tags,"DOMException.code":`${o.code}`}),c}if(i.isError(t))return a(e,t);if(i.isPlainObject(t)||i.isEvent(t)){return c=s(e,t,n,o),i.addExceptionMechanism(c,{synthetic:!0}),c}return c=p(e,t,n,r),i.addExceptionTypeValue(c,`${t}`,void 0),i.addExceptionMechanism(c,{synthetic:!0}),c}function p(e,t,n,r){const o={};if(r&&n){const r=c(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(i.isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function f(e,{isUnhandledRejection:t}){const n=i.extractExceptionKeysForMessage(e),r=t?"promise rejection":"exception";if(i.isErrorEvent(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(i.isEvent(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}t.eventFromException=function(e,t,n,r){const o=d(e,t,n&&n.syntheticException||void 0,r);return i.addExceptionMechanism(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),i.resolvedSyncPromise(o)},t.eventFromMessage=function(e,t,n="info",r,o){const s=p(e,t,r&&r.syntheticException||void 0,o);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),i.resolvedSyncPromise(s)},t.eventFromUnknownInput=d,t.exceptionFromError=o},811:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9581),i=n(8120),o=r.buildFeedbackIntegration({lazyLoadIntegration:i.lazyLoadIntegration});t.feedbackAsyncIntegration=o},7544:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9581),i=n(8120),o=r.buildFeedbackIntegration({lazyLoadIntegration:i.lazyLoadIntegration,getModalIntegration:()=>r.feedbackModalIntegration,getScreenshotIntegration:()=>r.feedbackScreenshotIntegration});t.feedbackSyncIntegration=o},3755:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=i.GLOBAL_OBJ;let s=0;function a(){s++,setTimeout((()=>{s--}))}t.WINDOW=o,t.ignoreNextOnError=a,t.shouldIgnoreOnError=function(){return s>0},t.wrap=function e(t,n={},o){if("function"!=typeof t)return t;try{const e=t.__sentry_wrapped__;if(e)return e;if(i.getOriginalFunction(t))return t}catch(e){return t}const s=function(){const s=Array.prototype.slice.call(arguments);try{o&&"function"==typeof o&&o.apply(this,arguments);const r=s.map((t=>e(t,n)));return t.apply(this,r)}catch(e){throw a(),r.withScope((t=>{t.addEventProcessor((e=>(n.mechanism&&(i.addExceptionTypeValue(e,void 0,void 0),i.addExceptionMechanism(e,n.mechanism)),e.extra={...e.extra,arguments:s},e))),r.captureException(e)})),e}};try{for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e])}catch(e){}i.markFunctionWrapped(s,t),i.addNonEnumerableProperty(t,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:()=>t.name})}catch(e){}return s}},1962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(3755),o=n(8739),s=n(97),a=n(1235),c=n(5115),u=n(1580),l=n(4014),d=n(1694),p=n(9212),f=n(6539),h=n(1652),g=n(1601),m=n(8120),_=n(4516),v=n(9745),y=n(9020),S=n(9657),b=n(1672),E=n(811),w=n(7544),T=n(9581),I=n(4483),x=n(9694),k=n(8959),C=n(6534),A=n(6141);t.SDK_VERSION=r.SDK_VERSION,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=r.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=r.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=r.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.Scope=r.Scope,t.addBreadcrumb=r.addBreadcrumb,t.addEventProcessor=r.addEventProcessor,t.addIntegration=r.addIntegration,t.addTracingExtensions=r.addTracingExtensions,t.captureConsoleIntegration=r.captureConsoleIntegration,t.captureEvent=r.captureEvent,t.captureException=r.captureException,t.captureFeedback=r.captureFeedback,t.captureMessage=r.captureMessage,t.captureSession=r.captureSession,t.close=r.close,t.continueTrace=r.continueTrace,t.createTransport=r.createTransport,t.debugIntegration=r.debugIntegration,t.dedupeIntegration=r.dedupeIntegration,t.endSession=r.endSession,t.extraErrorDataIntegration=r.extraErrorDataIntegration,t.flush=r.flush,t.functionToStringIntegration=r.functionToStringIntegration,t.getActiveSpan=r.getActiveSpan,t.getClient=r.getClient,t.getCurrentHub=r.getCurrentHub,t.getCurrentScope=r.getCurrentScope,t.getGlobalScope=r.getGlobalScope,t.getIsolationScope=r.getIsolationScope,t.getRootSpan=r.getRootSpan,t.getSpanDescendants=r.getSpanDescendants,t.getSpanStatusFromHttpCode=r.getSpanStatusFromHttpCode,t.inboundFiltersIntegration=r.inboundFiltersIntegration,t.isInitialized=r.isInitialized,t.lastEventId=r.lastEventId,t.makeMultiplexedTransport=r.makeMultiplexedTransport,t.moduleMetadataIntegration=r.moduleMetadataIntegration,t.parameterize=r.parameterize,t.registerSpanErrorInstrumentation=r.registerSpanErrorInstrumentation,t.rewriteFramesIntegration=r.rewriteFramesIntegration,t.sessionTimingIntegration=r.sessionTimingIntegration,t.setContext=r.setContext,t.setCurrentClient=r.setCurrentClient,t.setExtra=r.setExtra,t.setExtras=r.setExtras,t.setHttpStatus=r.setHttpStatus,t.setMeasurement=r.setMeasurement,t.setTag=r.setTag,t.setTags=r.setTags,t.setUser=r.setUser,t.spanToBaggageHeader=r.spanToBaggageHeader,t.spanToJSON=r.spanToJSON,t.spanToTraceHeader=r.spanToTraceHeader,t.startInactiveSpan=r.startInactiveSpan,t.startNewTrace=r.startNewTrace,t.startSession=r.startSession,t.startSpan=r.startSpan,t.startSpanManual=r.startSpanManual,t.thirdPartyErrorFilterIntegration=r.thirdPartyErrorFilterIntegration,t.withActiveSpan=r.withActiveSpan,t.withIsolationScope=r.withIsolationScope,t.withScope=r.withScope,t.zodErrorsIntegration=r.zodErrorsIntegration,t.WINDOW=i.WINDOW,t.BrowserClient=o.BrowserClient,t.makeFetchTransport=s.makeFetchTransport,t.chromeStackLineParser=a.chromeStackLineParser,t.defaultStackLineParsers=a.defaultStackLineParsers,t.defaultStackParser=a.defaultStackParser,t.geckoStackLineParser=a.geckoStackLineParser,t.opera10StackLineParser=a.opera10StackLineParser,t.opera11StackLineParser=a.opera11StackLineParser,t.winjsStackLineParser=a.winjsStackLineParser,t.eventFromException=c.eventFromException,t.eventFromMessage=c.eventFromMessage,t.exceptionFromError=c.exceptionFromError,t.createUserFeedbackEnvelope=u.createUserFeedbackEnvelope,t.captureUserFeedback=l.captureUserFeedback,t.forceLoad=l.forceLoad,t.getDefaultIntegrations=l.getDefaultIntegrations,t.init=l.init,t.onLoad=l.onLoad,t.showReportDialog=l.showReportDialog,t.breadcrumbsIntegration=d.breadcrumbsIntegration,t.globalHandlersIntegration=p.globalHandlersIntegration,t.httpContextIntegration=f.httpContextIntegration,t.linkedErrorsIntegration=h.linkedErrorsIntegration,t.browserApiErrorsIntegration=g.browserApiErrorsIntegration,t.lazyLoadIntegration=m.lazyLoadIntegration,t.reportingObserverIntegration=_.reportingObserverIntegration,t.httpClientIntegration=v.httpClientIntegration,t.contextLinesIntegration=y.contextLinesIntegration,t.getReplay=S.getReplay,t.replayIntegration=S.replayIntegration,t.replayCanvasIntegration=b.replayCanvasIntegration,t.feedbackAsyncIntegration=E.feedbackAsyncIntegration,t.feedbackIntegration=w.feedbackSyncIntegration,t.feedbackSyncIntegration=w.feedbackSyncIntegration,t.getFeedback=T.getFeedback,t.sendFeedback=T.sendFeedback,t.metrics=I.metrics,t.defaultRequestInstrumentationOptions=x.defaultRequestInstrumentationOptions,t.instrumentOutgoingRequests=x.instrumentOutgoingRequests,t.browserTracingIntegration=k.browserTracingIntegration,t.startBrowserTracingNavigationSpan=k.startBrowserTracingNavigationSpan,t.startBrowserTracingPageLoadSpan=k.startBrowserTracingPageLoadSpan,t.makeBrowserOfflineTransport=C.makeBrowserOfflineTransport,t.browserProfilingIntegration=A.browserProfilingIntegration},1694:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6900),i=n(1663),o=n(9837),s=n(8504),a=n(3755),c=1024,u=i.defineIntegration(((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&o.addConsoleInstrumentationHandler(function(e){return function(t){if(i.getClient()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:o.severityLevelFromString(t.level),message:o.safeJoin(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${o.safeJoin(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}i.addBreadcrumb(n,{input:t.args,level:t.level})}}(e)),t.dom&&r.addClickKeypressInstrumentationHandler(function(e,t){return function(n){if(i.getClient()!==e)return;let r,a,u="object"==typeof t?t.serializeAttribute:void 0,l="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;l&&l>c&&(s.DEBUG_BUILD&&o.logger.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${l} was configured. Sentry will use 1024 instead.`),l=c),"string"==typeof u&&(u=[u]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=o.htmlTreeAsString(t,{keyAttrs:u,maxStringLength:l}),a=o.getComponentName(t)}catch(e){r="<unknown>"}if(0===r.length)return;const d={category:`ui.${n.name}`,message:r};a&&(d.data={"ui.component_name":a}),i.addBreadcrumb(d,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&r.addXhrInstrumentationHandler(function(e){return function(t){if(i.getClient()!==e)return;const{startTimestamp:n,endTimestamp:o}=t,s=t.xhr[r.SENTRY_XHR_DATA_KEY];if(!n||!o||!s)return;const{method:a,url:c,status_code:u,body:l}=s,d={method:a,url:c,status_code:u},p={xhr:t.xhr,input:l,startTimestamp:n,endTimestamp:o};i.addBreadcrumb({category:"xhr",data:d,type:"http"},p)}}(e)),t.fetch&&o.addFetchInstrumentationHandler(function(e){return function(t){if(i.getClient()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){const e=t.fetchData,o={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r};i.addBreadcrumb({category:"fetch",data:e,level:"error",type:"http"},o)}else{const e=t.response,o={...t.fetchData,status_code:e&&e.status},s={input:t.args,response:e,startTimestamp:n,endTimestamp:r};i.addBreadcrumb({category:"fetch",data:o,type:"http"},s)}}}(e)),t.history&&r.addHistoryInstrumentationHandler(function(e){return function(t){if(i.getClient()!==e)return;let n=t.from,r=t.to;const s=o.parseUrl(a.WINDOW.location.href);let c=n?o.parseUrl(n):void 0;const u=o.parseUrl(r);c&&c.path||(c=s),s.protocol===u.protocol&&s.host===u.host&&(r=u.relative),s.protocol===c.protocol&&s.host===c.host&&(n=c.relative),i.addBreadcrumb({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){i.getClient()===e&&i.addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:o.getEventDescription(t)},{event:t})}}(e))}}}));t.breadcrumbsIntegration=u},1601:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(3755),s=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],a=r.defineIntegration(((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&i.fill(o.WINDOW,"setTimeout",c),t.setInterval&&i.fill(o.WINDOW,"setInterval",c),t.requestAnimationFrame&&i.fill(o.WINDOW,"requestAnimationFrame",u),t.XMLHttpRequest&&"XMLHttpRequest"in o.WINDOW&&i.fill(XMLHttpRequest.prototype,"send",l);const e=t.eventTarget;if(e){(Array.isArray(e)?e:s).forEach(d)}}}}));function c(e){return function(...t){const n=t[0];return t[0]=o.wrap(n,{mechanism:{data:{function:i.getFunctionName(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function u(e){return function(t){return e.apply(this,[o.wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:i.getFunctionName(e)},handled:!1,type:"instrument"}})])}}function l(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&i.fill(n,e,(function(t){const n={mechanism:{data:{function:e,handler:i.getFunctionName(t)},handled:!1,type:"instrument"}},r=i.getOriginalFunction(t);return r&&(n.mechanism.data.handler=i.getFunctionName(r)),o.wrap(t,n)}))})),e.apply(this,t)}}function d(e){const t=o.WINDOW,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(i.fill(n,"addEventListener",(function(t){return function(n,r,s){try{"function"==typeof r.handleEvent&&(r.handleEvent=o.wrap(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:i.getFunctionName(r),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[n,o.wrap(r,{mechanism:{data:{function:"addEventListener",handler:i.getFunctionName(r),target:e},handled:!1,type:"instrument"}}),s])}})),i.fill(n,"removeEventListener",(function(e){return function(t,n,r){const i=n;try{const n=i&&i.__sentry_wrapped__;n&&e.call(this,t,n,r)}catch(e){}return e.call(this,t,i,r)}})))}t.browserApiErrorsIntegration=a},9020:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=i.GLOBAL_OBJ,s=r.defineIntegration(((e={})=>{const t=null!=e.frameContextLines?e.frameContextLines:7;return{name:"ContextLines",processEvent:e=>function(e,t){const n=o.document,r=o.location&&i.stripUrlQueryAndFragment(o.location.href);if(!n||!r)return e;const s=e.exception&&e.exception.values;if(!s||!s.length)return e;const c=n.documentElement.innerHTML;if(!c)return e;const u=["<!DOCTYPE html>","<html>",...c.split("\n"),"</html>"];return s.forEach((e=>{const n=e.stacktrace;n&&n.frames&&(n.frames=n.frames.map((e=>a(e,u,r,t))))})),e}(e,t)}}));function a(e,t,n,r){return e.filename===n&&e.lineno&&t.length?(i.addContextToFrame(t,e,r),e):e}t.applySourceContextToFrame=a,t.contextLinesIntegration=s},9212:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(8504),s=n(5115),a=n(3755),c=r.defineIntegration(((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){i.addGlobalErrorInstrumentationHandler((t=>{const{stackParser:n,attachStacktrace:o}=l();if(r.getClient()!==e||a.shouldIgnoreOnError())return;const{msg:c,url:u,line:d,column:p,error:f}=t,h=function(e,t,n,r){const o=e.exception=e.exception||{},s=o.values=o.values||[],a=s[0]=s[0]||{},c=a.stacktrace=a.stacktrace||{},u=c.frames=c.frames||[],l=isNaN(parseInt(r,10))?void 0:r,d=isNaN(parseInt(n,10))?void 0:n,p=i.isString(t)&&t.length>0?t:i.getLocationHref();0===u.length&&u.push({colno:l,filename:p,function:i.UNKNOWN_FUNCTION,in_app:!0,lineno:d});return e}(s.eventFromUnknownInput(n,f||c,void 0,o,!1),u,d,p);h.level="error",r.captureEvent(h,{originalException:f,mechanism:{handled:!1,type:"onerror"}})}))}(e),u("onerror")),t.onunhandledrejection&&(!function(e){i.addGlobalUnhandledRejectionInstrumentationHandler((t=>{const{stackParser:n,attachStacktrace:o}=l();if(r.getClient()!==e||a.shouldIgnoreOnError())return;const c=function(e){if(i.isPrimitive(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(t),u=i.isPrimitive(c)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(c)}`}]}}:s.eventFromUnknownInput(n,c,void 0,o,!0);u.level="error",r.captureEvent(u,{originalException:c,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),u("onunhandledrejection"))}}}));function u(e){o.DEBUG_BUILD&&i.logger.log(`Global Handler attached: ${e}`)}function l(){const e=r.getClient();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}t.globalHandlersIntegration=c},9745:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6900),i=n(1663),o=n(9837),s=n(8504),a=i.defineIntegration(((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:"HttpClient",setup(e){!function(e,t){if(!o.supportsNativeFetch())return;o.addFetchInstrumentationHandler((n=>{if(i.getClient()!==e)return;const{response:r,args:o}=n,[s,a]=o;r&&function(e,t,n,r){if(d(e,n.status,n.url)){const e=function(e,t){if(!t&&e instanceof Request)return e;if(e instanceof Request&&e.bodyUsed)return e;return new Request(e,t)}(t,r);let o,s,a,u;f()&&([o,a]=c("Cookie",e),[s,u]=c("Set-Cookie",n));const l=p({url:e.url,method:e.method,status:n.status,requestHeaders:o,responseHeaders:s,requestCookies:a,responseCookies:u});i.captureEvent(l)}}(t,s,r,a)}))}(e,t),function(e,t){if(!("XMLHttpRequest"in o.GLOBAL_OBJ))return;r.addXhrInstrumentationHandler((n=>{if(i.getClient()!==e)return;const a=n.xhr,c=a[r.SENTRY_XHR_DATA_KEY];if(!c)return;const{method:u,request_headers:h}=c;try{!function(e,t,n,r){if(d(e,t.status,t.responseURL)){let e,a,c;if(f()){try{const e=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;e&&(a=l(e))}catch(e){s.DEBUG_BUILD&&o.logger.log("Could not extract cookies from response headers")}try{c=function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce(((e,t)=>{const[n,r]=t.split(": ");return n&&r&&(e[n]=r),e}),{})}(t)}catch(e){s.DEBUG_BUILD&&o.logger.log("Could not extract headers from response")}e=r}const u=p({url:t.responseURL,method:n,status:t.status,requestHeaders:e,responseHeaders:c,responseCookies:a});i.captureEvent(u)}}(t,a,u,h)}catch(e){s.DEBUG_BUILD&&o.logger.warn("Error while extracting response event form XHR response",e)}}))}(e,t)}}}));function c(e,t){const n=function(e){const t={};return e.forEach(((e,n)=>{t[n]=e})),t}(t.headers);let r;try{const t=n[e]||n[e.toLowerCase()]||void 0;t&&(r=l(t))}catch(t){s.DEBUG_BUILD&&o.logger.log(`Could not extract cookies from header ${e}`)}return[n,r]}function u(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function l(e){return e.split("; ").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r&&(e[n]=r),e}),{})}function d(e,t,n){return function(e,t){return e.some((e=>"number"==typeof e?e===t:t>=e[0]&&t<=e[1]))}(e.failedRequestStatusCodes,t)&&(r=e.failedRequestTargets,o=n,r.some((e=>"string"==typeof e?o.includes(e):e.test(o))))&&!i.isSentryRequestUrl(n,i.getClient());var r,o}function p(e){const t=`HTTP Client Error with status code: ${e.status}`,n={message:t,exception:{values:[{type:"Error",value:t}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:u(e.responseHeaders)}}};return o.addExceptionMechanism(n,{type:"http.client",handled:!1}),n}function f(){const e=i.getClient();return!!e&&Boolean(e.getOptions().sendDefaultPii)}t.httpClientIntegration=a},6539:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(3755),o=r.defineIntegration((()=>({name:"HttpContext",preprocessEvent(e){if(!i.WINDOW.navigator&&!i.WINDOW.location&&!i.WINDOW.document)return;const t=e.request&&e.request.url||i.WINDOW.location&&i.WINDOW.location.href,{referrer:n}=i.WINDOW.document||{},{userAgent:r}=i.WINDOW.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:o};e.request=s}})));t.httpContextIntegration=o},1652:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(5115),s=r.defineIntegration(((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,s){const a=s.getOptions();i.applyAggregateErrorsToEvent(o.exceptionFromError,a.stackParser,a.maxValueLength,n,t,e,r)}}}));t.linkedErrorsIntegration=s},4516:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=i.GLOBAL_OBJ,s=new WeakMap,a=r.defineIntegration(((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(e){if(s.has(r.getClient()))for(const t of e)r.withScope((e=>{e.setExtra("url",t.url);const n=`ReportingObserver [${t.type}]`;let i="No details available";if(t.body){const n={};for(const e in t.body)n[e]=t.body[e];if(e.setExtra("body",n),"crash"===t.type){const e=t.body;i=[e.crashId||"",e.reason||""].join(" ").trim()||i}else{i=t.body.message||i}}r.captureMessage(`${n}: ${i}`)}))}return{name:"ReportingObserver",setupOnce(){if(!i.supportsReportingObserver())return;new o.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(e){s.set(e,!0)}}}));t.reportingObserverIntegration=a},4483:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663);const i={increment:function(e,t=1,n){r.metrics.increment(r.BrowserMetricsAggregator,e,t,n)},distribution:function(e,t,n){r.metrics.distribution(r.BrowserMetricsAggregator,e,t,n)},set:function(e,t,n){r.metrics.set(r.BrowserMetricsAggregator,e,t,n)},gauge:function(e,t,n){r.metrics.gauge(r.BrowserMetricsAggregator,e,t,n)},timing:function(e,t,n="second",i){return r.metrics.timing(r.BrowserMetricsAggregator,e,t,n,i)}};t.metrics=i},6141:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(8504),s=n(819),a=n(7734),c=r.defineIntegration((()=>({name:"BrowserProfiling",setup(e){const t=r.getActiveSpan(),n=t&&r.getRootSpan(t);n&&a.isAutomatedPageLoadSpan(n)&&a.shouldProfileSpan(n)&&s.startProfileForSpan(n),e.on("spanStart",(e=>{e===r.getRootSpan(e)&&a.shouldProfileSpan(e)&&s.startProfileForSpan(e)})),e.on("beforeEnvelope",(e=>{if(!a.getActiveProfilesCount())return;const t=a.findProfiledTransactionsFromEnvelope(e);if(!t.length)return;const n=[];for(const e of t){const t=e&&e.contexts,r=t&&t.profile&&t.profile.profile_id,s=t&&t.profile&&t.profile.start_timestamp;if("string"!=typeof r){o.DEBUG_BUILD&&i.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!r){o.DEBUG_BUILD&&i.logger.log("[Profiling] cannot find profile for a span without a profile context");continue}t&&t.profile&&delete t.profile;const c=a.takeProfileFromGlobalCache(r);if(!c){o.DEBUG_BUILD&&i.logger.log(`[Profiling] Could not retrieve profile for span: ${r}`);continue}const u=a.createProfilingEvent(r,s,c,e);u&&n.push(u)}a.addProfilesToEnvelope(e,n)}))}})));t.browserProfilingIntegration=c},819:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(8504),s=n(3755),a=n(7734);t.startProfileForSpan=function(e){let t;a.isAutomatedPageLoadSpan(e)&&(t=1e3*i.timestampInSeconds());const n=a.startJSSelfProfile();if(!n)return;o.DEBUG_BUILD&&i.logger.log(`[Profiling] started profiling span: ${r.spanToJSON(e).description}`);const c=i.uuid4();async function u(){if(e&&n)return n.stop().then((t=>{l&&(s.WINDOW.clearTimeout(l),l=void 0),o.DEBUG_BUILD&&i.logger.log(`[Profiling] stopped profiling of span: ${r.spanToJSON(e).description}`),t?a.addProfileToGlobalCache(c,t):o.DEBUG_BUILD&&i.logger.log(`[Profiling] profiler returned null profile for: ${r.spanToJSON(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started")})).catch((e=>{o.DEBUG_BUILD&&i.logger.log("[Profiling] error while stopping profiler:",e)}))}r.getCurrentScope().setContext("profile",{profile_id:c,start_timestamp:t});let l=s.WINDOW.setTimeout((()=>{o.DEBUG_BUILD&&i.logger.log("[Profiling] max profile duration elapsed, stopping profiling for:",r.spanToJSON(e).description),u()}),a.MAX_PROFILE_DURATION_MS);const d=e.end.bind(e);e.end=function(){return e?(u().then((()=>{d()}),(()=>{d()})),e):d()}}},7734:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(8504),s=n(3755),a=1e6,c=String(0),u="main";let l="",d="",p="",f=s.WINDOW.navigator&&s.WINDOW.navigator.userAgent||"",h="";const g=s.WINDOW.navigator&&s.WINDOW.navigator.language||s.WINDOW.navigator&&s.WINDOW.navigator.languages&&s.WINDOW.navigator.languages[0]||"";const m=s.WINDOW.navigator&&s.WINDOW.navigator.userAgentData;var _;function v(e){return function(e){return!("thread_metadata"in e)}(e)?S(e):e}function y(e,t,n,a){if("transaction"!==a.type)throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(null==n)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const u=function(e){const t=e&&e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id;return"string"==typeof t&&32!==t.length&&o.DEBUG_BUILD&&i.logger.log(`[Profiling] Invalid traceId: ${t} on profiled event`),"string"!=typeof t?"":t}(a),m=v(n),_=t||("number"==typeof a.start_timestamp?1e3*a.start_timestamp:1e3*i.timestampInSeconds()),y="number"==typeof a.timestamp?1e3*a.timestamp:1e3*i.timestampInSeconds();return{event_id:e,timestamp:new Date(_).toISOString(),platform:"javascript",version:"1",release:a.release||"",environment:a.environment||r.DEFAULT_ENVIRONMENT,runtime:{name:"javascript",version:s.WINDOW.navigator.userAgent},os:{name:l,version:d,build_number:f},device:{locale:g,model:h,manufacturer:f,architecture:p,is_emulator:!1},debug_meta:{images:E(n.resources)},profile:m,transactions:[{name:a.transaction||"",id:a.event_id||i.uuid4(),trace_id:u,active_thread_id:c,relative_start_ns:"0",relative_end_ns:(1e6*(y-_)).toFixed(0)}]}}function S(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[c]:{name:u}}},o=e.samples[0];if(!o)return r;const s=o.timestamp,l="number"==typeof performance.timeOrigin?performance.timeOrigin:i.browserPerformanceTimeOrigin||0,d=l-(i.browserPerformanceTimeOrigin||l);return e.samples.forEach(((i,o)=>{if(void 0===i.stackId)return void 0===t&&(t=n,r.stacks[t]=[],n++),void(r.samples[o]={elapsed_since_start_ns:((i.timestamp+d-s)*a).toFixed(0),stack_id:t,thread_id:c});let u=e.stacks[i.stackId];const l=[];for(;u;){l.push(u.frameId);const t=e.frames[u.frameId];t&&void 0===r.frames[u.frameId]&&(r.frames[u.frameId]={function:t.name,abs_path:"number"==typeof t.resourceId?e.resources[t.resourceId]:void 0,lineno:t.line,colno:t.column}),u=void 0===u.parentId?void 0:e.stacks[u.parentId]}const p={elapsed_since_start_ns:((i.timestamp+d-s)*a).toFixed(0),stack_id:n,thread_id:c};r.stacks[n]=l,r.samples[o]=p,n++})),r}"object"==typeof(_=m)&&null!==_&&"getHighEntropyValues"in _&&m.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then((e=>{if(l=e.platform||"",p=e.architecture||"",h=e.model||"",d=e.platformVersion||"",e.fullVersionList&&e.fullVersionList.length>0){const t=e.fullVersionList[e.fullVersionList.length-1];f=`${t.brand} ${t.version}`}})).catch((e=>{}));const b=new WeakMap;function E(e){const t=i.GLOBAL_OBJ._sentryDebugIds;if(!t)return[];const n=r.getClient(),o=n&&n.getOptions(),s=o&&o.stackParser;if(!s)return[];let a;const c=b.get(s);c?a=c:(a=new Map,b.set(s,a));const u=Object.keys(t).reduce(((e,n)=>{let r;const i=a.get(n);i?r=i:(r=s(n),a.set(n,r));for(let i=r.length-1;i>=0;i--){const o=r[i],s=o&&o.filename;if(o&&s){e[s]=t[n];break}}return e}),{}),l=[];for(const t of e)t&&u[t]&&l.push({type:"sourcemap",code_file:t,debug_id:u[t]});return l}function w(e){return"number"!=typeof e&&"boolean"!=typeof e||"number"==typeof e&&isNaN(e)?(o.DEBUG_BUILD&&i.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!0===e||!1===e||(!(e<0||e>1)||(o.DEBUG_BUILD&&i.logger.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1))}let T=!1;const I=new Map;t.MAX_PROFILE_DURATION_MS=3e4,t.addProfileToGlobalCache=function(e,t){if(I.set(e,t),I.size>30){const e=I.keys().next().value;I.delete(e)}},t.addProfilesToEnvelope=function(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e},t.applyDebugMetadata=E,t.convertJSSelfProfileToSampledFormat=S,t.createProfilePayload=y,t.createProfilingEvent=function(e,t,n,r){return function(e){return e.samples.length<2?(o.DEBUG_BUILD&&i.logger.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):!!e.frames.length||(o.DEBUG_BUILD&&i.logger.log("[Profiling] Discarding profile because it contains no frames"),!1)}(n)?y(e,t,n,r):null},t.enrichWithThreadInformation=v,t.findProfiledTransactionsFromEnvelope=function(e){const t=[];return i.forEachEnvelopeItem(e,((e,n)=>{if("transaction"===n)for(let n=1;n<e.length;n++){const r=e[n];r&&r.contexts&&r.contexts.profile&&r.contexts.profile.profile_id&&t.push(e[n])}})),t},t.getActiveProfilesCount=function(){return I.size},t.isAutomatedPageLoadSpan=function(e){return"pageload"===r.spanToJSON(e).op},t.isValidSampleRate=w,t.shouldProfileSpan=function(e){if(T)return o.DEBUG_BUILD&&i.logger.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return o.DEBUG_BUILD&&i.logger.log("[Profiling] Discarding profile because transaction was not sampled."),!1;const t=r.getClient(),n=t&&t.getOptions();if(!n)return o.DEBUG_BUILD&&i.logger.log("[Profiling] Profiling disabled, no options found."),!1;const s=n.profilesSampleRate;return w(s)?s?!!(!0===s||Math.random()<s)||(o.DEBUG_BUILD&&i.logger.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),!1):(o.DEBUG_BUILD&&i.logger.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(o.DEBUG_BUILD&&i.logger.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)},t.startJSSelfProfile=function(){const e=s.WINDOW.Profiler;if("function"!=typeof e)return void(o.DEBUG_BUILD&&i.logger.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."));const t=Math.floor(3e3);try{return new e({sampleInterval:10,maxBufferSize:t})}catch(e){o.DEBUG_BUILD&&(i.logger.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),i.logger.log("[Profiling] Disabling profiling for current user session.")),T=!0}},t.takeProfileFromGlobalCache=function(e){const t=I.get(e);return t&&I.delete(e),t}},4014:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(6900),s=n(8739),a=n(8504),c=n(3755),u=n(1694),l=n(1601),d=n(9212),p=n(6539),f=n(1652),h=n(1235),g=n(97);function m(e){return[r.inboundFiltersIntegration(),r.functionToStringIntegration(),l.browserApiErrorsIntegration(),u.breadcrumbsIntegration(),d.globalHandlersIntegration(),f.linkedErrorsIntegration(),r.dedupeIntegration(),p.httpContextIntegration()]}t.captureUserFeedback=function(e){const t=r.getClient();t&&t.captureUserFeedback(e)},t.forceLoad=function(){},t.getDefaultIntegrations=m,t.init=function(e={}){const t=function(e={}){return{defaultIntegrations:m(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:c.WINDOW.SENTRY_RELEASE&&c.WINDOW.SENTRY_RELEASE.id?c.WINDOW.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0,...e}}(e);if(function(){const e=c.WINDOW,t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=c.WINDOW.location&&c.WINDOW.location.href||"",i=!!n&&c.WINDOW===c.WINDOW.top&&["chrome-extension:","moz-extension:","ms-browser-extension:"].some((e=>r.startsWith(`${e}//`)));return!!n&&!i}())return void i.consoleSandbox((()=>{}));a.DEBUG_BUILD&&(i.supportsFetch()||i.logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:i.stackParserFromStackParserOptions(t.stackParser||h.defaultStackParser),integrations:r.getIntegrationsToSetup(t),transport:t.transport||g.makeFetchTransport},u=r.initAndBind(s.BrowserClient,n);return t.autoSessionTracking&&function(){if(void 0===c.WINDOW.document)return void(a.DEBUG_BUILD&&i.logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));r.startSession({ignoreDuration:!0}),r.captureSession(),o.addHistoryInstrumentationHandler((({from:e,to:t})=>{void 0!==e&&e!==t&&(r.startSession({ignoreDuration:!0}),r.captureSession())}))}(),u},t.onLoad=function(e){e()},t.showReportDialog=function(e={}){if(!c.WINDOW.document)return void(a.DEBUG_BUILD&&i.logger.error("Global document not defined in showReportDialog call"));const t=r.getCurrentScope(),n=t.getClient(),o=n&&n.getDsn();if(!o)return void(a.DEBUG_BUILD&&i.logger.error("DSN not configured for showReportDialog call"));if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const t=r.lastEventId();t&&(e.eventId=t)}const s=c.WINDOW.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=r.getReportDialogEndpoint(o,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:u}=e;if(u){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{u()}finally{c.WINDOW.removeEventListener("message",e)}};c.WINDOW.addEventListener("message",e)}const l=c.WINDOW.document.head||c.WINDOW.document.body;l?l.appendChild(s):a.DEBUG_BUILD&&i.logger.error("Not injecting report dialog. No injection point found in HTML")}},1235:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);function i(e,t,n,i){const o={filename:e,function:"<anonymous>"===t?r.UNKNOWN_FUNCTION:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==i&&(o.colno=i),o}const o=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,s=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/\((\S*)(?::(\d+))(?::(\d+))\)/,c=[30,e=>{const t=o.exec(e);if(t){const[,e,n,o]=t;return i(e,r.UNKNOWN_FUNCTION,+n,+o)}const n=s.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=a.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=S(n[1]||r.UNKNOWN_FUNCTION,n[2]);return i(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],u=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,l=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,d=[50,e=>{const t=u.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=l.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||r.UNKNOWN_FUNCTION;return[n,e]=S(n,e),i(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],p=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=[40,e=>{const t=p.exec(e);return t?i(t[2],t[1]||r.UNKNOWN_FUNCTION,+t[3],t[4]?+t[4]:void 0):void 0}],h=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,g=[10,e=>{const t=h.exec(e);return t?i(t[2],t[3]||r.UNKNOWN_FUNCTION,+t[1]):void 0}],m=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,_=[20,e=>{const t=m.exec(e);return t?i(t[5],t[3]||t[4]||r.UNKNOWN_FUNCTION,+t[1],+t[2]):void 0}],v=[c,d],y=r.createStackParser(...v),S=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),i=-1!==e.indexOf("safari-web-extension");return n||i?[-1!==e.indexOf("@")?e.split("@")[0]:r.UNKNOWN_FUNCTION,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};t.chromeStackLineParser=c,t.defaultStackLineParsers=v,t.defaultStackParser=y,t.geckoStackLineParser=d,t.opera10StackLineParser=g,t.opera11StackLineParser=_,t.winjsStackLineParser=f},3180:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(8504),s=n(3755);t.registerBackgroundTabDetection=function(){s.WINDOW&&s.WINDOW.document?s.WINDOW.document.addEventListener("visibilitychange",(()=>{const e=r.getActiveSpan();if(!e)return;const t=r.getRootSpan(e);if(s.WINDOW.document.hidden&&t){const e="cancelled",{op:n,status:s}=r.spanToJSON(t);o.DEBUG_BUILD&&i.logger.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),s||t.setStatus({code:r.SPAN_STATUS_ERROR,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):o.DEBUG_BUILD&&i.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}},8959:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6900),i=n(1663),o=n(9837),s=n(8504),a=n(3755),c=n(3180),u=n(9694),l="BrowserTracing",d={...i.TRACING_DEFAULTS,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableInp:!0,_experiments:{},...u.defaultRequestInstrumentationOptions};function p(e,t,n){e.emit("startPageLoadSpan",t,n),i.getCurrentScope().setTransactionName(t.name);const r=i.getActiveSpan();return"pageload"===(r&&i.spanToJSON(r).op)?r:void 0}function f(e,t){i.getIsolationScope().setPropagationContext(o.generatePropagationContext()),i.getCurrentScope().setPropagationContext(o.generatePropagationContext()),e.emit("startNavigationSpan",t),i.getCurrentScope().setTransactionName(t.name);const n=i.getActiveSpan();return"navigation"===(n&&i.spanToJSON(n).op)?n:void 0}function h(e){const t=o.getDomElement(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}t.BROWSER_TRACING_INTEGRATION_ID=l,t.browserTracingIntegration=(e={})=>{i.registerSpanErrorInstrumentation();const{enableInp:t,enableLongTask:n,_experiments:{enableInteractions:g},beforeStartSpan:m,idleTimeout:_,finalTimeout:v,childSpanTimeout:y,markBackgroundSpan:S,traceFetch:b,traceXHR:E,shouldCreateSpanForRequest:w,enableHTTPTimings:T,instrumentPageLoad:I,instrumentNavigation:x}={...d,...e},k=r.startTrackingWebVitals();t&&r.startTrackingINP(),n&&r.startTrackingLongTasks(),g&&r.startTrackingInteractions();const C={name:void 0,source:void 0};function A(e,t){const n="pageload"===t.op,o=m?m(t):t,s=o.attributes||{};t.name!==o.name&&(s[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]="custom",o.attributes=s),C.name=o.name,C.source=s[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];const c=i.startIdleSpan(o,{idleTimeout:_,finalTimeout:v,childSpanTimeout:y,disableAutoFinish:n,beforeSpanEnd:e=>{k(),r.addPerformanceEntries(e)}});function u(){["interactive","complete"].includes(a.WINDOW.document.readyState)&&e.emit("idleSpanEnableAutoFinish",c)}return n&&a.WINDOW.document&&(a.WINDOW.document.addEventListener("readystatechange",(()=>{u()})),u()),c}return{name:l,afterAllSetup(e){let n,l=a.WINDOW.location&&a.WINDOW.location.href;e.on("startNavigationSpan",(t=>{i.getClient()===e&&(n&&(s.DEBUG_BUILD&&o.logger.log(`[Tracing] Finishing current root span with op: ${i.spanToJSON(n).op}`),n.end()),n=A(e,{op:"navigation",...t}))})),e.on("startPageLoadSpan",((t,r={})=>{if(i.getClient()!==e)return;n&&(s.DEBUG_BUILD&&o.logger.log(`[Tracing] Finishing current root span with op: ${i.spanToJSON(n).op}`),n.end());const a=r.sentryTrace||h("sentry-trace"),c=r.baggage||h("baggage"),u=o.propagationContextFromHeaders(a,c);i.getCurrentScope().setPropagationContext(u),n=A(e,{op:"pageload",...t})})),e.on("spanEnd",(e=>{const t=i.spanToJSON(e).op;if(e!==i.getRootSpan(e)||"navigation"!==t&&"pageload"!==t)return;const n=i.getCurrentScope(),r=n.getPropagationContext();n.setPropagationContext({...r,sampled:void 0!==r.sampled?r.sampled:i.spanIsSampled(e),dsc:r.dsc||i.getDynamicSamplingContextFromSpan(e)})})),a.WINDOW.location&&(I&&p(e,{name:a.WINDOW.location.pathname,startTime:o.browserPerformanceTimeOrigin?o.browserPerformanceTimeOrigin/1e3:void 0,attributes:{[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.pageload.browser"}}),x&&r.addHistoryInstrumentationHandler((({to:t,from:n})=>{void 0===n&&l&&-1!==l.indexOf(t)?l=void 0:n!==t&&(l=void 0,f(e,{name:a.WINDOW.location.pathname,attributes:{[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"url",[i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.navigation.browser"}}))}))),S&&c.registerBackgroundTabDetection(),g&&function(e,t,n,r){let c;const u=()=>{const a="ui.action.click",u=i.getActiveSpan(),l=u&&i.getRootSpan(u);if(l){const e=i.spanToJSON(l).op;if(["navigation","pageload"].includes(e))return void(s.DEBUG_BUILD&&o.logger.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`))}c&&(c.setAttribute(i.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,"interactionInterrupted"),c.end(),c=void 0),r.name?c=i.startIdleSpan({name:r.name,op:a,attributes:{[i.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n}):s.DEBUG_BUILD&&o.logger.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`)};a.WINDOW.document&&addEventListener("click",u,{once:!1,capture:!0})}(_,v,y,C),t&&r.registerInpInteractionListener(C),u.instrumentOutgoingRequests({traceFetch:b,traceXHR:E,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:w,enableHTTPTimings:T})}}},t.getMetaContent=h,t.startBrowserTracingNavigationSpan=f,t.startBrowserTracingPageLoadSpan=p},9694:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6900),i=n(1663),o=n(9837),s=n(3755),a={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0};function c(e){const{url:t}=i.spanToJSON(e).data||{};if(!t||"string"!=typeof t)return;const n=r.addPerformanceInstrumentationHandler("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=u(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!o.browserPerformanceTimeOrigin)return r;return[...r,["http.request.redirect_start",l(e.redirectStart)],["http.request.fetch_start",l(e.fetchStart)],["http.request.domain_lookup_start",l(e.domainLookupStart)],["http.request.domain_lookup_end",l(e.domainLookupEnd)],["http.request.connect_start",l(e.connectStart)],["http.request.secure_connection_start",l(e.secureConnectionStart)],["http.request.connection_end",l(e.connectEnd)],["http.request.request_start",l(e.requestStart)],["http.request.response_start",l(e.responseStart)],["http.request.response_end",l(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function u(e){let t="unknown",n="unknown",r="";for(const i of e){if("/"===i){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}function l(e=0){return((o.browserPerformanceTimeOrigin||performance.timeOrigin)+e)/1e3}function d(e,t){const n=s.WINDOW.location&&s.WINDOW.location.href;if(n){let r,i;try{r=new URL(e,n),i=new URL(n).origin}catch(e){return!1}const s=r.origin===i;return t?o.stringMatchesSomePattern(r.toString(),t)||s&&o.stringMatchesSomePattern(r.pathname,t):s}{const n=!!e.match(/^\/(?!\/)/);return t?o.stringMatchesSomePattern(e,t):n}}function p(e,t,n,s){const a=e.xhr,c=a&&a[r.SENTRY_XHR_DATA_KEY];if(!a||a.__sentry_own_request__||!c)return;const u=i.hasTracingEnabled()&&t(c.url);if(e.endTimestamp&&u){const e=a.__sentry_xhr_span_id__;if(!e)return;const t=s[e];return void(t&&void 0!==c.status_code&&(i.setHttpStatus(t,c.status_code),t.end(),delete s[e]))}const l=f(c.url),d=l?o.parseUrl(l).host:void 0,p=!!i.getActiveSpan(),h=u&&p?i.startInactiveSpan({name:`${c.method} ${c.url}`,attributes:{type:"xhr","http.method":c.method,"http.url":l,url:c.url,"server.address":d,[i.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser",[i.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new i.SentryNonRecordingSpan;a.__sentry_xhr_span_id__=h.spanContext().spanId,s[a.__sentry_xhr_span_id__]=h;const g=i.getClient();return a.setRequestHeader&&n(c.url)&&g&&function(e,t,n){const r=i.getCurrentScope(),s=i.getIsolationScope(),{traceId:a,spanId:c,sampled:u,dsc:l}={...s.getPropagationContext(),...r.getPropagationContext()},d=n&&i.hasTracingEnabled()?i.spanToTraceHeader(n):o.generateSentryTraceHeader(a,c,u),p=o.dynamicSamplingContextToSentryBaggageHeader(l||(n?i.getDynamicSamplingContextFromSpan(n):i.getDynamicSamplingContextFromClient(a,t)));!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(o.BAGGAGE_HEADER_NAME,n)}catch(e){}}(e,d,p)}(a,g,i.hasTracingEnabled()&&p?h:void 0),h}function f(e){try{return new URL(e,s.WINDOW.location.origin).href}catch(e){return}}t.defaultRequestInstrumentationOptions=a,t.extractNetworkProtocol=u,t.instrumentOutgoingRequests=function(e){const{traceFetch:t,traceXHR:n,shouldCreateSpanForRequest:s,enableHTTPTimings:u,tracePropagationTargets:l}={traceFetch:a.traceFetch,traceXHR:a.traceXHR,...e},h="function"==typeof s?s:e=>!0,g=e=>d(e,l),m={};t&&o.addFetchInstrumentationHandler((e=>{const t=i.instrumentFetchRequest(e,h,g,m);if(t){const n=f(e.fetchData.url),r=n?o.parseUrl(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r})}u&&t&&c(t)})),n&&r.addXhrInstrumentationHandler((e=>{const t=p(e,h,g,m);u&&t&&c(t)}))},t.shouldAttachHeaders=d,t.xhrCallback=p},97:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6900),i=n(1663),o=n(9837);t.makeFetchTransport=function(e,t=r.getNativeImplementation("fetch")){let n=0,s=0;return i.createTransport(e,(function(i){const a=i.body.length;n+=a,s++;const c={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&s<15,...e.fetchOptions};if(!t)return r.clearCachedImplementation("fetch"),o.rejectedSyncPromise("No fetch implementation available");try{return t(e.url,c).then((e=>(n-=a,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return r.clearCachedImplementation("fetch"),n-=a,s--,o.rejectedSyncPromise(e)}}))}},6534:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(9837),o=n(97);function s(e){return new Promise(((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)}))}function a(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=s(n);return e=>r.then((n=>e(n.transaction(t,"readwrite").objectStore(t))))}function c(e){return s(e.getAllKeys())}function u(e,t,n){return e((e=>c(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.max(...r,0)+1),s(e.transaction)}))))}function l(e,t,n){return e((e=>c(e).then((r=>{if(!(r.length>=n))return e.put(t,Math.min(...r,0)-1),s(e.transaction)}))))}function d(e){return e((e=>c(e).then((t=>{const n=t[0];if(null!=n)return s(e.get(n)).then((t=>(e.delete(n),s(e.transaction).then((()=>t)))))}))))}function p(e){let t;function n(){return null==t&&(t=a(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async t=>{try{const r=await i.serializeEnvelope(t);await u(n(),r,e.maxQueueSize||30)}catch(e){}},unshift:async t=>{try{const r=await i.serializeEnvelope(t);await l(n(),r,e.maxQueueSize||30)}catch(e){}},shift:async()=>{try{const e=await d(n());if(e)return i.parseEnvelope(e)}catch(e){}}}}t.createStore=a,t.makeBrowserOfflineTransport=function(e=o.makeFetchTransport){return function(e){return t=>e({...t,createStore:p})}(r.makeOfflineTransport(e))},t.push=u,t.shift=d,t.unshift=l},1580:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);t.createUserFeedbackEnvelope=function(e,{metadata:t,tunnel:n,dsn:i}){const o={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!i&&{dsn:r.dsnToString(i)}},s=function(e){return[{type:"user_report"},e]}(e);return r.createEnvelope(o,[s])}},8120:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1663),i=n(3755),o={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",debugIntegration:"debug",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",sessionTimingIntegration:"sessiontiming",browserProfilingIntegration:"browserprofiling"},s=i.WINDOW;t.lazyLoadIntegration=async function(e){const t=o[e],n=s.Sentry=s.Sentry||{};if(!t)throw new Error(`Cannot lazy load integration: ${e}`);const a=n[e];if("function"==typeof a)return a;const c=function(e){const t=r.getClient(),n=t&&t.getOptions(),i=n&&n.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${r.SDK_VERSION}/${e}.min.js`,i).toString()}(t),u=i.WINDOW.document.createElement("script");u.src=c,u.crossOrigin="anonymous",u.referrerPolicy="origin";const l=new Promise(((e,t)=>{u.addEventListener("load",(()=>e())),u.addEventListener("error",t)}));i.WINDOW.document.body.appendChild(u);try{await l}catch(t){throw new Error(`Error when loading integration: ${e}`)}const d=n[e];if("function"!=typeof d)throw new Error(`Could not load integration: ${e}`);return d}},5147:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i="7";function o(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}t.getEnvelopeEndpointWithUrlEncodedAuth=function(e,t,n){return t||`${function(e){return`${o(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r.urlEncode({sentry_key:e.publicKey,sentry_version:i,...t&&{sentry_client:`${t.name}/${t.version}`}})}(e,n)}`},t.getReportDialogEndpoint=function(e,t){const n=r.makeDsn(e);if(!n)return"";const i=`${o(n)}embed/error-page/`;let s=`dsn=${r.dsnToString(n)}`;for(const e in t)if("dsn"!==e&&"onClose"!==e)if("user"===e){const e=t.user;if(!e)continue;e.name&&(s+=`&name=${encodeURIComponent(e.name)}`),e.email&&(s+=`&email=${encodeURIComponent(e.email)}`)}else s+=`&${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`;return`${i}?${s}`}},2711:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6031),i=n(3346);t.getAsyncContextStrategy=function(e){const t=r.getSentryCarrier(e);return t.acs?t.acs:i.getStackAsyncContextStrategy()},t.setAsyncContextStrategy=function(e){const t=r.getMainCarrier();r.getSentryCarrier(t).acs=e}},3346:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(6331),o=n(39),s=n(6031);class a{constructor(e,t){let n,r;n=e||new o.Scope,r=t||new o.Scope,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(e){throw this._popScope(),e}return r.isThenable(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function c(){const e=s.getMainCarrier(),t=s.getSentryCarrier(e);return t.stack=t.stack||new a(i.getDefaultCurrentScope(),i.getDefaultIsolationScope())}function u(e){return c().withScope(e)}function l(e,t){const n=c();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function d(e){return c().withScope((()=>e(c().getIsolationScope())))}t.AsyncContextStack=a,t.getStackAsyncContextStrategy=function(){return{withIsolationScope:d,withScope:u,withSetScope:l,withSetIsolationScope:(e,t)=>d(t),getCurrentScope:()=>c().getScope(),getIsolationScope:()=>c().getIsolationScope()}}},8981:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(5147),o=n(1443),s=n(8589),a=n(9071),c=n(9985),u=n(9983),l=n(2043),d=n(8270),p=n(6360),f="Not capturing exception because it's already been captured.";function h(e){return void 0===e.type}function g(e){return"transaction"===e.type}t.BaseClient=class{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=r.makeDsn(e.dsn):s.DEBUG_BUILD&&r.logger.warn("No DSN provided, client will not send events."),this._dsn){const t=i.getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){const i=r.uuid4();if(r.checkOrSetAlreadyCaught(e))return s.DEBUG_BUILD&&r.logger.log(f),i;const o={event_id:i,...t};return this._process(this.eventFromException(e,o).then((e=>this._captureEvent(e,o,n)))),o.event_id}captureMessage(e,t,n,i){const o={event_id:r.uuid4(),...n},s=r.isParameterizedString(e)?e:String(e),a=r.isPrimitive(e)?this.eventFromMessage(s,t,o):this.eventFromException(e,o);return this._process(a.then((e=>this._captureEvent(e,o,i)))),o.event_id}captureEvent(e,t,n){const i=r.uuid4();if(t&&t.originalException&&r.checkOrSetAlreadyCaught(t.originalException))return s.DEBUG_BUILD&&r.logger.log(f),i;const o={event_id:i,...t},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,a||n)),o.event_id}captureSession(e){"string"!=typeof e.release?s.DEBUG_BUILD&&r.logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),u.updateSession(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):r.resolvedSyncPromise(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];c.setupIntegration(this,e,this._integrations),t||c.afterSetupIntegrations(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=a.createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])n=r.addItemToEnvelope(n,r.createAttachmentEnvelopeItem(e));const i=this.sendEnvelope(n);i&&i.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=a.createSessionEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const n=`${e}:${t}`;s.DEBUG_BUILD&&r.logger.log(`Adding outcome: "${n}"`),this._outcomes[n]=(this._outcomes[n]||0)+1}}on(e,t){return this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t),()=>{const n=this._hooks[e];if(n){const e=n.indexOf(t);n.splice(e,1)}}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(s.DEBUG_BUILD&&r.logger.error("Error while sending event:",e),e))):(s.DEBUG_BUILD&&r.logger.error("Transport disabled"),r.resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=c.setupIntegrations(this,e),c.afterSetupIntegrations(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const i=t.exception&&t.exception.values;if(i){r=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&n)&&(u.updateSession(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new r.SyncPromise((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,i=o.getIsolationScope()){const s=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),e.type||i.setLastEventId(e.event_id||t.event_id),p.prepareEvent(s,e,t,n,this,i).then((e=>{if(null===e)return e;const t={...i.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:s}=t;e.contexts={trace:r.dropUndefinedKeys({trace_id:n,span_id:i,parent_span_id:o}),...e.contexts};const a=s||l.getDynamicSamplingContextFromClient(n,this);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(s.DEBUG_BUILD){const t=e;"log"===t.logLevel?r.logger.log(t.message):r.logger.warn(t)}}))}_processEvent(e,t,n){const i=this.getOptions(),{sampleRate:o}=i,s=g(e),a=h(e),c=e.type||"error",u=`before send for type \`${c}\``,l=void 0===o?void 0:d.parseSampleRate(o);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",e),r.rejectedSyncPromise(new r.SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const p="replay_event"===c?"replay":c,f=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,f).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",p,e),new r.SentryError("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const o=function(e,t,n,r){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s}=t;if(h(n)&&i)return i(n,r);if(g(n)){if(n.spans&&s){const t=[];for(const r of n.spans){const n=s(r);n?t.push(n):e.recordDroppedEvent("before_send","span")}n.spans=t}if(o)return o(n,r)}return n}(this,i,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(r.isThenable(e))return e.then((e=>{if(!r.isPlainObject(e)&&null!==e)throw new r.SentryError(n);return e}),(e=>{throw new r.SentryError(`${t} rejected with ${e}`)}));if(!r.isPlainObject(e)&&null!==e)throw new r.SentryError(n);return e}(o,u)})).then((i=>{if(null===i){if(this.recordDroppedEvent("before_send",p,e),g(e)){const t=1+(e.spans||[]).length;this._outcomes.span=(this._outcomes.span||0)+t}throw new r.SentryError(`${u} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();!s&&o&&this._updateSessionFromEvent(o,i);const a=i.transaction_info;if(s&&a&&i.transaction!==e.transaction){const e="custom";i.transaction_info={...a,source:e}}return this.sendEvent(i,t),i})).then(null,(e=>{if(e instanceof r.SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new r.SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}}},9133:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=100;t.addBreadcrumb=function(e,t){const n=i.getClient(),s=i.getIsolationScope();if(!n)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:c=o}=n.getOptions();if(c<=0)return;const u={timestamp:r.dateTimestampInSeconds(),...e},l=a?r.consoleSandbox((()=>a(u,t))):u;null!==l&&(n.emit&&n.emit("beforeAddBreadcrumb",l,t),s.addBreadcrumb(l,c))}},6031:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);function i(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||r.SDK_VERSION,t[r.SDK_VERSION]=t[r.SDK_VERSION]||{}}t.getMainCarrier=function(){return i(r.GLOBAL_OBJ),r.GLOBAL_OBJ},t.getSentryCarrier=i},4608:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);t.createCheckInEnvelope=function(e,t,n,i,o){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),i&&o&&(s.dsn=r.dsnToString(o)),t&&(s.trace=r.dropUndefinedKeys(t));const a=function(e){return[{type:"check_in"},e]}(e);return r.createEnvelope(s,[a])}},3394:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.DEFAULT_ENVIRONMENT="production"},1443:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(2711),o=n(6031),s=n(39);function a(){const e=o.getMainCarrier();return i.getAsyncContextStrategy(e).getCurrentScope()}t.getClient=function(){return a().getClient()},t.getCurrentScope=a,t.getGlobalScope=function(){return r.getGlobalSingleton("globalScope",(()=>new s.Scope))},t.getIsolationScope=function(){const e=o.getMainCarrier();return i.getAsyncContextStrategy(e).getIsolationScope()},t.withIsolationScope=function(...e){const t=o.getMainCarrier(),n=i.getAsyncContextStrategy(t);if(2===e.length){const[t,r]=e;return t?n.withSetIsolationScope(t,r):n.withIsolationScope(r)}return n.withIsolationScope(e[0])},t.withScope=function(...e){const t=o.getMainCarrier(),n=i.getAsyncContextStrategy(t);if(2===e.length){const[t,r]=e;return t?n.withSetScope(t,r):n.withScope(r)}return n.withScope(e[0])}},8589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},6331:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(39);t.getDefaultCurrentScope=function(){return r.getGlobalSingleton("defaultCurrentScope",(()=>new i.Scope))},t.getDefaultIsolationScope=function(){return r.getGlobalSingleton("defaultIsolationScope",(()=>new i.Scope))}},9071:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(2043),o=n(9180);t.createEventEnvelope=function(e,t,n,i){const o=r.getSdkMetadataForEnvelopeHeader(n),s=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const a=r.createEventEnvelopeHeaders(e,o,i,t);delete e.sdkProcessingMetadata;const c=[{type:s},e];return r.createEnvelope(a,[c])},t.createSessionEnvelope=function(e,t,n,i){const o=r.getSdkMetadataForEnvelopeHeader(n),s={sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!i&&t&&{dsn:r.dsnToString(t)}},a="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return r.createEnvelope(s,[a])},t.createSpanEnvelope=function(e,t){const n=i.getDynamicSamplingContextFromSpan(e[0]),s=t&&t.getDsn(),a=t&&t.getOptions().tunnel,c={sent_at:(new Date).toISOString(),...function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n},...!!a&&s&&{dsn:r.dsnToString(s)}},u=t&&t.getOptions().beforeSendSpan,l=u?e=>u(o.spanToJSON(e)):e=>o.spanToJSON(e),d=[];for(const t of e){const e=l(t);e&&d.push(r.createSpanEnvelopeItem(e))}return r.createEnvelope(c,d)}},6770:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589);t.notifyEventProcessors=function e(t,n,o,s=0){return new r.SyncPromise(((a,c)=>{const u=t[s];if(null===n||"function"!=typeof u)a(n);else{const l=u({...n},o);i.DEBUG_BUILD&&u.id&&null===l&&r.logger.log(`Event processor "${u.id}" dropped event`),r.isThenable(l)?l.then((n=>e(t,n,o,s+1).then(a))).then(null,c):e(t,l,o,s+1).then(a).then(null,c)}}))}},4776:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(3394),o=n(1443),s=n(8589),a=n(9983),c=n(6360);function u(e,t){const n=o.getCurrentScope(),i=o.getClient();if(i){if(i.captureCheckIn)return i.captureCheckIn(e,t,n);s.DEBUG_BUILD&&r.logger.warn("Cannot capture check-in. Client does not support sending check-ins.")}else s.DEBUG_BUILD&&r.logger.warn("Cannot capture check-in. No client defined.");return r.uuid4()}function l(){const e=o.getIsolationScope(),t=o.getCurrentScope(),n=t.getSession()||e.getSession();n&&a.closeSession(n),d(),e.setSession(),t.setSession()}function d(){const e=o.getIsolationScope(),t=o.getCurrentScope(),n=o.getClient(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}t.addEventProcessor=function(e){o.getIsolationScope().addEventProcessor(e)},t.captureCheckIn=u,t.captureEvent=function(e,t){return o.getCurrentScope().captureEvent(e,t)},t.captureException=function(e,t){return o.getCurrentScope().captureException(e,c.parseEventHintOrCaptureContext(t))},t.captureMessage=function(e,t){const n="string"==typeof t?t:void 0,r="string"!=typeof t?{captureContext:t}:void 0;return o.getCurrentScope().captureMessage(e,n,r)},t.captureSession=function(e=!1){e?l():d()},t.close=async function(e){const t=o.getClient();return t?t.close(e):(s.DEBUG_BUILD&&r.logger.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))},t.endSession=l,t.flush=async function(e){const t=o.getClient();return t?t.flush(e):(s.DEBUG_BUILD&&r.logger.warn("Cannot flush events. No client defined."),Promise.resolve(!1))},t.isEnabled=function(){const e=o.getClient();return!!e&&!1!==e.getOptions().enabled&&!!e.getTransport()},t.isInitialized=function(){return!!o.getClient()},t.lastEventId=function(){return o.getIsolationScope().lastEventId()},t.setContext=function(e,t){o.getIsolationScope().setContext(e,t)},t.setExtra=function(e,t){o.getIsolationScope().setExtra(e,t)},t.setExtras=function(e){o.getIsolationScope().setExtras(e)},t.setTag=function(e,t){o.getIsolationScope().setTag(e,t)},t.setTags=function(e){o.getIsolationScope().setTags(e)},t.setUser=function(e){o.getIsolationScope().setUser(e)},t.startSession=function(e){const t=o.getClient(),n=o.getIsolationScope(),s=o.getCurrentScope(),{release:c,environment:u=i.DEFAULT_ENVIRONMENT}=t&&t.getOptions()||{},{userAgent:d}=r.GLOBAL_OBJ.navigator||{},p=a.makeSession({release:c,environment:u,user:s.getUser()||n.getUser(),...d&&{userAgent:d},...e}),f=n.getSession();return f&&"ok"===f.status&&a.updateSession(f,{status:"exited"}),l(),n.setSession(p),s.setSession(p),p},t.withMonitor=function(e,t,n){const i=u({monitorSlug:e,status:"in_progress"},n),s=r.timestampInSeconds();function a(t){u({monitorSlug:e,status:t,checkInId:i,duration:r.timestampInSeconds()-s})}return o.withIsolationScope((()=>{let e;try{e=t()}catch(e){throw a("error"),e}return r.isThenable(e)?Promise.resolve(e).then((()=>{a("ok")}),(()=>{a("error")})):a("ok"),e}))}},5792:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443);t.captureFeedback=function(e,t={},n=i.getCurrentScope()){const{message:o,name:s,email:a,url:c,source:u,associatedEventId:l,tags:d}=e,p={contexts:{feedback:r.dropUndefinedKeys({contact_email:a,name:s,message:o,url:c,source:u,associated_event_id:l})},type:"feedback",level:"info",tags:d},f=n&&n.getClient()||i.getClient();return f&&f.emit("beforeSendFeedback",p,t),n.captureEvent(p,t)}},2739:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(8578);n(4487),n(8589);const s=n(4602),a=n(9180),c=n(8469),u=n(6938),l=n(5311),d=n(2043);function p(e,t,n,o,s){const c=i.getIsolationScope(),{traceId:u,spanId:l,sampled:p,dsc:f}={...c.getPropagationContext(),...n.getPropagationContext()},h=s?a.spanToTraceHeader(s):r.generateSentryTraceHeader(u,l,p),g=r.dynamicSamplingContextToSentryBaggageHeader(f||(s?d.getDynamicSamplingContextFromSpan(s):d.getDynamicSamplingContextFromClient(u,t))),m=o.headers||("undefined"!=typeof Request&&r.isInstanceOf(e,Request)?e.headers:void 0);if(m){if("undefined"!=typeof Headers&&r.isInstanceOf(m,Headers)){const e=new Headers(m);return e.append("sentry-trace",h),g&&e.append(r.BAGGAGE_HEADER_NAME,g),e}if(Array.isArray(m)){const e=[...m,["sentry-trace",h]];return g&&e.push([r.BAGGAGE_HEADER_NAME,g]),e}{const e="baggage"in m?m.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),g&&t.push(g),{...m,"sentry-trace":h,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":h,baggage:g}}t.addTracingHeadersToFetchRequest=p,t.instrumentFetchRequest=function(e,t,n,d,f="auto.http.browser"){if(!e.fetchData)return;const h=s.hasTracingEnabled()&&t(e.fetchData.url);if(e.endTimestamp&&h){const t=e.fetchData.__span;if(!t)return;const n=d[t];return void(n&&(!function(e,t){if(t.response){u.setHttpStatus(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:u.SPAN_STATUS_ERROR,message:"internal_error"});e.end()}(n,e),delete d[t]))}const g=i.getCurrentScope(),m=i.getClient(),{method:_,url:v}=e.fetchData,y=function(e){try{return new URL(e).href}catch(e){return}}(v),S=y?r.parseUrl(y).host:void 0,b=!!a.getActiveSpan(),E=h&&b?l.startInactiveSpan({name:`${_} ${v}`,attributes:{url:v,type:"fetch","http.method":_,"http.url":y,"server.address":S,[o.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:f,[o.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"http.client"}}):new c.SentryNonRecordingSpan;if(e.fetchData.__span=E.spanContext().spanId,d[E.spanContext().spanId]=E,n(e.fetchData.url)&&m){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=p(t,m,g,n,s.hasTracingEnabled()&&b?E:void 0)}return E}},2974:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9133),i=n(1443),o=n(4776);function s(){return{bindClient(e){i.getCurrentScope().setClient(e)},withScope:i.withScope,getClient:()=>i.getClient(),getScope:i.getCurrentScope,getIsolationScope:i.getIsolationScope,captureException:(e,t)=>i.getCurrentScope().captureException(e,t),captureMessage:(e,t,n)=>i.getCurrentScope().captureMessage(e,t,n),captureEvent:o.captureEvent,addBreadcrumb:r.addBreadcrumb,setUser:o.setUser,setTags:o.setTags,setTag:o.setTag,setExtra:o.setExtra,setExtras:o.setExtras,setContext:o.setContext,getIntegration(e){const t=i.getClient();return t&&t.getIntegrationByName(e.id)||null},startSession:o.startSession,endSession:o.endSession,captureSession(e){if(e)return o.endSession();!function(){const e=i.getCurrentScope(),t=i.getClient(),n=e.getSession();t&&n&&t.captureSession(n)}()}}}const a=s;t.getCurrentHub=a,t.getCurrentHubShim=s},1663:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4487),i=n(9699),o=n(8183),s=n(3118),a=n(3187),c=n(8469),u=n(6938),l=n(5311),d=n(2043),p=n(3554),f=n(7917),h=n(7187),g=n(8578),m=n(9071),_=n(4776),v=n(1443),y=n(6331),S=n(2711),b=n(6031),E=n(9983),w=n(114),T=n(39),I=n(6770),x=n(5147),k=n(8981),C=n(7269),A=n(6455),F=n(1609),R=n(2189),O=n(2195),P=n(9985),M=n(5882),N=n(6360),D=n(4608),L=n(4602),U=n(6799),B=n(5403),j=n(46),H=n(9180),W=n(8270),V=n(3916),q=n(3394),K=n(9133),$=n(7939),z=n(1099),G=n(1821),J=n(9350),Y=n(554),X=n(9784),Z=n(2772),Q=n(9348),ee=n(9759),te=n(9141),ne=n(8025),re=n(9217),ie=n(3310),oe=n(1826),se=n(8754),ae=n(2023),ce=n(2852),ue=n(2739),le=n(5888),de=n(5792),pe=n(2974),fe=n(9837);t.registerSpanErrorInstrumentation=r.registerSpanErrorInstrumentation,t.getCapturedScopesOnSpan=i.getCapturedScopesOnSpan,t.setCapturedScopesOnSpan=i.setCapturedScopesOnSpan,t.addTracingExtensions=o.addTracingExtensions,t.TRACING_DEFAULTS=s.TRACING_DEFAULTS,t.startIdleSpan=s.startIdleSpan,t.SentrySpan=a.SentrySpan,t.SentryNonRecordingSpan=c.SentryNonRecordingSpan,t.SPAN_STATUS_ERROR=u.SPAN_STATUS_ERROR,t.SPAN_STATUS_OK=u.SPAN_STATUS_OK,t.SPAN_STATUS_UNSET=u.SPAN_STATUS_UNSET,t.getSpanStatusFromHttpCode=u.getSpanStatusFromHttpCode,t.setHttpStatus=u.setHttpStatus,t.continueTrace=l.continueTrace,t.startInactiveSpan=l.startInactiveSpan,t.startNewTrace=l.startNewTrace,t.startSpan=l.startSpan,t.startSpanManual=l.startSpanManual,t.suppressTracing=l.suppressTracing,t.withActiveSpan=l.withActiveSpan,t.getDynamicSamplingContextFromClient=d.getDynamicSamplingContextFromClient,t.getDynamicSamplingContextFromSpan=d.getDynamicSamplingContextFromSpan,t.spanToBaggageHeader=d.spanToBaggageHeader,t.setMeasurement=p.setMeasurement,t.timedEventsToMeasurements=p.timedEventsToMeasurements,t.sampleSpan=f.sampleSpan,t.logSpanEnd=h.logSpanEnd,t.logSpanStart=h.logSpanStart,t.SEMANTIC_ATTRIBUTE_CACHE_HIT=g.SEMANTIC_ATTRIBUTE_CACHE_HIT,t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE=g.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE,t.SEMANTIC_ATTRIBUTE_CACHE_KEY=g.SEMANTIC_ATTRIBUTE_CACHE_KEY,t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME=g.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME,t.SEMANTIC_ATTRIBUTE_PROFILE_ID=g.SEMANTIC_ATTRIBUTE_PROFILE_ID,t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON=g.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT,t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE=g.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE,t.SEMANTIC_ATTRIBUTE_SENTRY_OP=g.SEMANTIC_ATTRIBUTE_SENTRY_OP,t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN=g.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE=g.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE=g.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,t.createEventEnvelope=m.createEventEnvelope,t.createSessionEnvelope=m.createSessionEnvelope,t.createSpanEnvelope=m.createSpanEnvelope,t.addEventProcessor=_.addEventProcessor,t.captureCheckIn=_.captureCheckIn,t.captureEvent=_.captureEvent,t.captureException=_.captureException,t.captureMessage=_.captureMessage,t.captureSession=_.captureSession,t.close=_.close,t.endSession=_.endSession,t.flush=_.flush,t.isEnabled=_.isEnabled,t.isInitialized=_.isInitialized,t.lastEventId=_.lastEventId,t.setContext=_.setContext,t.setExtra=_.setExtra,t.setExtras=_.setExtras,t.setTag=_.setTag,t.setTags=_.setTags,t.setUser=_.setUser,t.startSession=_.startSession,t.withMonitor=_.withMonitor,t.getClient=v.getClient,t.getCurrentScope=v.getCurrentScope,t.getGlobalScope=v.getGlobalScope,t.getIsolationScope=v.getIsolationScope,t.withIsolationScope=v.withIsolationScope,t.withScope=v.withScope,t.getDefaultCurrentScope=y.getDefaultCurrentScope,t.getDefaultIsolationScope=y.getDefaultIsolationScope,t.setAsyncContextStrategy=S.setAsyncContextStrategy,t.getMainCarrier=b.getMainCarrier,t.closeSession=E.closeSession,t.makeSession=E.makeSession,t.updateSession=E.updateSession,t.SessionFlusher=w.SessionFlusher,t.Scope=T.Scope,t.notifyEventProcessors=I.notifyEventProcessors,t.getEnvelopeEndpointWithUrlEncodedAuth=x.getEnvelopeEndpointWithUrlEncodedAuth,t.getReportDialogEndpoint=x.getReportDialogEndpoint,t.BaseClient=k.BaseClient,t.ServerRuntimeClient=C.ServerRuntimeClient,t.initAndBind=A.initAndBind,t.setCurrentClient=A.setCurrentClient,t.createTransport=F.createTransport,t.makeOfflineTransport=R.makeOfflineTransport,t.makeMultiplexedTransport=O.makeMultiplexedTransport,t.addIntegration=P.addIntegration,t.defineIntegration=P.defineIntegration,t.getIntegrationsToSetup=P.getIntegrationsToSetup,t.applyScopeDataToEvent=M.applyScopeDataToEvent,t.mergeScopeData=M.mergeScopeData,t.prepareEvent=N.prepareEvent,t.createCheckInEnvelope=D.createCheckInEnvelope,t.hasTracingEnabled=L.hasTracingEnabled,t.isSentryRequestUrl=U.isSentryRequestUrl,t.handleCallbackErrors=B.handleCallbackErrors,t.parameterize=j.parameterize,t.addChildSpanToSpan=H.addChildSpanToSpan,t.getActiveSpan=H.getActiveSpan,t.getRootSpan=H.getRootSpan,t.getSpanDescendants=H.getSpanDescendants,t.getStatusMessage=H.getStatusMessage,t.spanIsSampled=H.spanIsSampled,t.spanTimeInputToSeconds=H.spanTimeInputToSeconds,t.spanToJSON=H.spanToJSON,t.spanToTraceContext=H.spanToTraceContext,t.spanToTraceHeader=H.spanToTraceHeader,t.parseSampleRate=W.parseSampleRate,t.applySdkMetadata=V.applySdkMetadata,t.DEFAULT_ENVIRONMENT=q.DEFAULT_ENVIRONMENT,t.addBreadcrumb=K.addBreadcrumb,t.functionToStringIntegration=$.functionToStringIntegration,t.inboundFiltersIntegration=z.inboundFiltersIntegration,t.linkedErrorsIntegration=G.linkedErrorsIntegration,t.moduleMetadataIntegration=J.moduleMetadataIntegration,t.requestDataIntegration=Y.requestDataIntegration,t.captureConsoleIntegration=X.captureConsoleIntegration,t.debugIntegration=Z.debugIntegration,t.dedupeIntegration=Q.dedupeIntegration,t.extraErrorDataIntegration=ee.extraErrorDataIntegration,t.rewriteFramesIntegration=te.rewriteFramesIntegration,t.sessionTimingIntegration=ne.sessionTimingIntegration,t.zodErrorsIntegration=re.zodErrorsIntegration,t.thirdPartyErrorFilterIntegration=ie.thirdPartyErrorFilterIntegration,t.metrics=oe.metrics,t.metricsDefault=se.metricsDefault,t.BrowserMetricsAggregator=ae.BrowserMetricsAggregator,t.getMetricSummaryJsonForSpan=ce.getMetricSummaryJsonForSpan,t.addTracingHeadersToFetchRequest=ue.addTracingHeadersToFetchRequest,t.instrumentFetchRequest=ue.instrumentFetchRequest,t.trpcMiddleware=le.trpcMiddleware,t.captureFeedback=de.captureFeedback,t.getCurrentHub=pe.getCurrentHub,t.getCurrentHubShim=pe.getCurrentHubShim,t.SDK_VERSION=fe.SDK_VERSION},9985:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(8589),s=[];function a(e,t,n){if(n[t.name])o.DEBUG_BUILD&&r.logger.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===s.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),s.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}o.DEBUG_BUILD&&r.logger.log(`Integration installed: ${t.name}`)}}t.addIntegration=function(e){const t=i.getClient();t?t.addIntegration(e):o.DEBUG_BUILD&&r.logger.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`)},t.afterSetupIntegrations=function(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)},t.defineIntegration=function(e){return e},t.getIntegrationsToSetup=function(e){const t=e.defaultIntegrations||[],n=e.integrations;let i;t.forEach((e=>{e.isDefaultInstance=!0})),i=Array.isArray(n)?[...t,...n]:"function"==typeof n?r.arrayify(n(t)):t;const o=function(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}(i),s=o.findIndex((e=>"Debug"===e.name));if(s>-1){const[e]=o.splice(s,1);o.push(e)}return o},t.installedIntegrations=s,t.setupIntegration=a,t.setupIntegrations=function(e,t){const n={};return t.forEach((t=>{t&&a(e,t,n)})),n}},9784:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(4776),s=n(9985),a=s.defineIntegration(((e={})=>{const t=e.levels||r.CONSOLE_LEVELS;return{name:"CaptureConsole",setup(e){"console"in r.GLOBAL_OBJ&&r.addConsoleInstrumentationHandler((({args:n,level:s})=>{i.getClient()===e&&t.includes(s)&&function(e,t){const n={level:r.severityLevelFromString(t),extra:{arguments:e}};i.withScope((i=>{if(i.addEventProcessor((e=>(e.logger="console",r.addExceptionMechanism(e,{handled:!1,type:"console"}),e))),"assert"===t){if(!e[0]){const t=`Assertion failed: ${r.safeJoin(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),o.captureMessage(t,n)}return}const s=e.find((e=>e instanceof Error));if(s)return void o.captureException(s,n);const a=r.safeJoin(e," ");o.captureMessage(a,n)}))}(n,s)}))}}}));t.captureConsoleIntegration=a},2772:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=i.defineIntegration(((e={})=>{const t={debugger:!1,stringify:!1,...e};return{name:"Debug",setup(e){e.on("beforeSendEvent",((e,n)=>{t.debugger,r.consoleSandbox((()=>{t.stringify,n&&Object.keys(n).length}))}))}}}));t.debugIntegration=o},9348:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=n(8589),s=i.defineIntegration((()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(a(t,e))return o.DEBUG_BUILD&&r.logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}}));function a(e,t){return!!t&&(!!function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!u(e,t))return!1;if(!c(e,t))return!1;return!0}(e,t)||!!function(e,t){const n=l(t),r=l(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!u(e,t))return!1;if(!c(e,t))return!1;return!0}(e,t))}function c(e,t){let n=r.getFramesFromEvent(e),i=r.getFramesFromEvent(t);if(!n&&!i)return!0;if(n&&!i||!n&&i)return!1;if(i.length!==n.length)return!1;for(let e=0;e<i.length;e++){const t=i[e],r=n[e];if(t.filename!==r.filename||t.lineno!==r.lineno||t.colno!==r.colno||t.function!==r.function)return!1}return!0}function u(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(e){return!1}}function l(e){return e.exception&&e.exception.values&&e.exception.values[0]}t._shouldDropEvent=a,t.dedupeIntegration=s},9759:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=n(8589),s=i.defineIntegration(((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:"ExtraErrorData",processEvent(e,i,s){const{maxValueLength:a=250}=s.getOptions();return function(e,t={},n,i,s){if(!t.originalException||!r.isError(t.originalException))return e;const a=t.originalException.name||t.originalException.constructor.name,c=function(e,t,n){try{const i=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const t of Object.keys(e)){if(-1!==i.indexOf(t))continue;const s=e[t];o[t]=r.isError(s)||"string"==typeof s?r.truncate(`${s}`,n):s}if(t&&void 0!==e.cause&&(o.cause=r.isError(e.cause)?e.cause.toString():e.cause),"function"==typeof e.toJSON){const t=e.toJSON();for(const e of Object.keys(t)){const n=t[e];o[e]=r.isError(n)?n.toString():n}}return o}catch(e){o.DEBUG_BUILD&&r.logger.error("Unable to extract extra data from the Error object:",e)}return null}(t.originalException,i,s);if(c){const t={...e.contexts},i=r.normalize(c,n);return r.isPlainObject(i)&&(r.addNonEnumerableProperty(i,"__sentry_skip_normalization__",!0),t[a]=i),{...e,contexts:t}}return e}(e,i,t,n,a)}}}));t.extraErrorDataIntegration=s},7939:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(9985);let s;const a=new WeakMap,c=o.defineIntegration((()=>({name:"FunctionToString",setupOnce(){s=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=r.getOriginalFunction(this),n=a.has(i.getClient())&&void 0!==t?t:this;return s.apply(n,e)}}catch(e){}},setup(e){a.set(e,!0)}})));t.functionToStringIntegration=c},1099:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589),o=n(9985),s=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],a=o.defineIntegration(((e={})=>({name:"InboundFilters",processEvent(t,n,o){const a=o.getOptions(),u=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:s],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,a);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e))return i.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${r.getEventDescription(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(e){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));return t}(e).some((e=>r.stringMatchesSomePattern(e,t)))}(e,t.ignoreErrors))return i.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${r.getEventDescription(e)}`),!0;if(function(e){if(e.type)return!1;if(!e.exception||!e.exception.values||0===e.exception.values.length)return!1;return!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))}(e))return i.DEBUG_BUILD&&r.logger.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${r.getEventDescription(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&r.stringMatchesSomePattern(n,t)}(e,t.ignoreTransactions))return i.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${r.getEventDescription(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=c(e);return!!n&&r.stringMatchesSomePattern(n,t)}(e,t.denyUrls))return i.DEBUG_BUILD&&r.logger.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${r.getEventDescription(e)}.\nUrl: ${c(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=c(e);return!n||r.stringMatchesSomePattern(n,t)}(e,t.allowUrls))return i.DEBUG_BUILD&&r.logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${r.getEventDescription(e)}.\nUrl: ${c(e)}`),!0;return!1}(t,u)?null:t}})));function c(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(t):null}catch(t){return i.DEBUG_BUILD&&r.logger.error(`Cannot extract url for event ${r.getEventDescription(e)}`),null}}t.inboundFiltersIntegration=a},1821:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=i.defineIntegration(((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,i,o){const s=o.getOptions();r.applyAggregateErrorsToEvent(r.exceptionFromError,s.stackParser,s.maxValueLength,n,t,e,i)}}}));t.linkedErrorsIntegration=o},9350:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=n(5202),s=i.defineIntegration((()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",(e=>{r.forEachEnvelopeItem(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(o.stripMetadataFromStackFrames(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(void 0!==t.type)return;const n=e.getOptions().stackParser;o.addMetadataToStackFrames(n,t)}))}})));t.moduleMetadataIntegration=s},554:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o={include:{cookies:!0,data:!0,headers:!0,ip:!1,query_string:!0,url:!0,user:{id:!0,username:!0,email:!0}},transactionNamingScheme:"methodPath"},s=i.defineIntegration(((e={})=>{const t={...o,...e,include:{...o.include,...e.include,user:e.include&&"boolean"==typeof e.include.user?e.include.user:{...o.include.user,...(e.include||{}).user}}};return{name:"RequestData",processEvent(e){const{sdkProcessingMetadata:n={}}=e,i=n.request;if(!i)return e;const o=function(e){const{transactionNamingScheme:t,include:{ip:n,user:r,...i}}=e,o=["method"];for(const[e,t]of Object.entries(i))t&&o.push(e);let s;if(void 0===r)s=!0;else if("boolean"==typeof r)s=r;else{const e=[];for(const[t,n]of Object.entries(r))n&&e.push(t);s=e}return{include:{ip:n,user:s,request:0!==o.length?o:void 0,transaction:t}}}(t);return r.addRequestDataToEvent(e,i,o)}}}));t.requestDataIntegration=s},9141:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=i.defineIntegration(((e={})=>{const t=e.root,n=e.prefix||"app:///",i="window"in r.GLOBAL_OBJ&&void 0!==r.GLOBAL_OBJ.window,o=e.iteratee||s({isBrowser:i,root:t,prefix:n});return{name:"RewriteFrames",processEvent(e){let t=e;return e.exception&&Array.isArray(e.exception.values)&&(t=function(e){try{return{...e,exception:{...e.exception,values:e.exception.values.map((e=>{return{...e,...e.stacktrace&&{stacktrace:(t=e.stacktrace,{...t,frames:t&&t.frames&&t.frames.map((e=>o(e)))})}};var t}))}}}catch(t){return e}}(t)),t}}}));function s({isBrowser:e,root:t,prefix:n}){return i=>{if(!i.filename)return i;const o=/^[a-zA-Z]:\\/.test(i.filename)||i.filename.includes("\\")&&!i.filename.includes("/"),s=/^\//.test(i.filename);if(e){if(t){const e=i.filename;0===e.indexOf(t)&&(i.filename=e.replace(t,n))}}else if(o||s){const e=o?i.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):i.filename,s=t?r.relative(t,e):r.basename(e);i.filename=`${n}${s}`}return i}}t.generateIteratee=s,t.rewriteFramesIntegration=o},8025:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=i.defineIntegration((()=>{const e=1e3*r.timestampInSeconds();return{name:"SessionTiming",processEvent(t){const n=1e3*r.timestampInSeconds();return{...t,extra:{...t.extra,"session:start":e,"session:duration":n-e,"session:end":n}}}}}));t.sessionTimingIntegration=o},3310:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985),o=n(5202),s=i.defineIntegration((e=>({name:"ThirdPartyErrorsFilter",setup(e){e.on("beforeEnvelope",(e=>{r.forEachEnvelopeItem(e,((e,t)=>{if("event"===t){const t=Array.isArray(e)?e[1]:void 0;t&&(o.stripMetadataFromStackFrames(t),e[1]=t)}}))})),e.on("applyFrameMetadata",(t=>{if(void 0!==t.type)return;const n=e.getOptions().stackParser;o.addMetadataToStackFrames(n,t)}))},processEvent(t){const n=function(e){const t=r.getFramesFromEvent(e);if(!t)return;return t.filter((e=>!!e.filename)).map((e=>e.module_metadata?Object.keys(e.module_metadata).filter((e=>e.startsWith(a))).map((e=>e.slice(a.length))):[]))}(t);if(n){if(n["drop-error-if-contains-third-party-frames"===e.behaviour||"apply-tag-if-contains-third-party-frames"===e.behaviour?"some":"every"]((t=>!t.some((t=>e.filterKeys.includes(t)))))){if("drop-error-if-contains-third-party-frames"===e.behaviour||"drop-error-if-exclusively-contains-third-party-frames"===e.behaviour)return null;t.tags={...t.tags,third_party_code:!0}}}return t}})));const a="_sentryBundlerPluginAppKey:";t.thirdPartyErrorFilterIntegration=s},9217:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9985);function o(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function s(e){const t=new Set;for(const n of e.issues)n.path&&n.path[0]&&t.add(n.path[0]);const n=Array.from(t);return`Failed to validate keys: ${r.truncate(n.join(", "),100)}`}function a(e,t,n){return t.exception&&t.exception.values&&n&&n.originalException&&(i=n.originalException,r.isError(i)&&"ZodError"===i.name&&Array.isArray(i.errors))&&0!==n.originalException.issues.length?{...t,exception:{...t.exception,values:[{...t.exception.values[0],value:s(n.originalException)},...t.exception.values.slice(1)]},extra:{...t.extra,"zoderror.issues":n.originalException.errors.slice(0,e).map(o)}}:t;var i}const c=i.defineIntegration(((e={})=>{const t=e.limit||10;return{name:"ZodErrors",processEvent:(e,n)=>a(t,e,n)}}));t.applyZodErrorsToEvent=a,t.zodErrorsIntegration=c},5202:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=new Map,o=new Set;function s(e,t){return function(e){if(r.GLOBAL_OBJ._sentryModuleMetadata)for(const t of Object.keys(r.GLOBAL_OBJ._sentryModuleMetadata)){const n=r.GLOBAL_OBJ._sentryModuleMetadata[t];if(o.has(t))continue;o.add(t);const s=e(t);for(const e of s.reverse())if(e.filename){i.set(e.filename,n);break}}}(e),i.get(t)}t.addMetadataToStackFrames=function(e,t){try{t.exception.values.forEach((t=>{if(t.stacktrace)for(const n of t.stacktrace.frames||[]){if(!n.filename||n.module_metadata)continue;const t=s(e,n.filename);t&&(n.module_metadata=t)}}))}catch(e){}},t.getMetadataForUrl=s,t.stripMetadataFromStackFrames=function(e){try{e.exception.values.forEach((e=>{if(e.stacktrace)for(const t of e.stacktrace.frames||[])delete t.module_metadata}))}catch(e){}}},5720:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9180),o=n(7640),s=n(9741),a=n(7710),c=n(3308);t.MetricsAggregator=class{constructor(e){this._client=e,this._buckets=new Map,this._bucketsTotalWeight=0,this._interval=setInterval((()=>this._flush()),o.DEFAULT_FLUSH_INTERVAL),this._interval.unref&&this._interval.unref(),this._flushShift=Math.floor(Math.random()*o.DEFAULT_FLUSH_INTERVAL/1e3),this._forceFlush=!1}add(e,t,n,s="none",u={},l=r.timestampInSeconds()){const d=Math.floor(l),p=c.sanitizeMetricKey(t),f=c.sanitizeTags(u),h=c.sanitizeUnit(s),g=c.getBucketKey(e,p,h,f);let m=this._buckets.get(g);const _=m&&e===o.SET_METRIC_TYPE?m.metric.weight:0;m?(m.metric.add(n),m.timestamp<d&&(m.timestamp=d)):(m={metric:new a.METRIC_MAP[e](n),timestamp:d,metricType:e,name:p,unit:h,tags:f},this._buckets.set(g,m));const v="string"==typeof n?m.metric.weight-_:n;i.updateMetricSummaryOnActiveSpan(e,p,v,h,u,g),this._bucketsTotalWeight+=m.metric.weight,this._bucketsTotalWeight>=o.MAX_WEIGHT&&this.flush()}flush(){this._forceFlush=!0,this._flush()}close(){this._forceFlush=!0,clearInterval(this._interval),this._flush()}_flush(){if(this._forceFlush)return this._forceFlush=!1,this._bucketsTotalWeight=0,this._captureMetrics(this._buckets),void this._buckets.clear();const e=Math.floor(r.timestampInSeconds())-o.DEFAULT_FLUSH_INTERVAL/1e3-this._flushShift,t=new Map;for(const[n,r]of this._buckets)r.timestamp<=e&&(t.set(n,r),this._bucketsTotalWeight-=r.metric.weight);for(const[e]of t)this._buckets.delete(e);this._captureMetrics(t)}_captureMetrics(e){if(e.size>0){const t=Array.from(e).map((([,e])=>e));s.captureAggregateMetrics(this._client,t)}}}},2023:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9180),o=n(7640),s=n(9741),a=n(7710),c=n(3308);t.BrowserMetricsAggregator=class{constructor(e){this._client=e,this._buckets=new Map,this._interval=setInterval((()=>this.flush()),o.DEFAULT_BROWSER_FLUSH_INTERVAL)}add(e,t,n,s="none",u={},l=r.timestampInSeconds()){const d=Math.floor(l),p=c.sanitizeMetricKey(t),f=c.sanitizeTags(u),h=c.sanitizeUnit(s),g=c.getBucketKey(e,p,h,f);let m=this._buckets.get(g);const _=m&&e===o.SET_METRIC_TYPE?m.metric.weight:0;m?(m.metric.add(n),m.timestamp<d&&(m.timestamp=d)):(m={metric:new a.METRIC_MAP[e](n),timestamp:d,metricType:e,name:p,unit:h,tags:f},this._buckets.set(g,m));const v="string"==typeof n?m.metric.weight-_:n;i.updateMetricSummaryOnActiveSpan(e,p,v,h,u,g)}flush(){if(0===this._buckets.size)return;const e=Array.from(this._buckets.values());s.captureAggregateMetrics(this._client,e),this._buckets.clear()}close(){clearInterval(this._interval),this.flush()}}},7640:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.COUNTER_METRIC_TYPE="c",t.DEFAULT_BROWSER_FLUSH_INTERVAL=5e3,t.DEFAULT_FLUSH_INTERVAL=1e4,t.DISTRIBUTION_METRIC_TYPE="d",t.GAUGE_METRIC_TYPE="g",t.MAX_WEIGHT=1e4,t.SET_METRIC_TYPE="s"},9741:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(3308);function o(e,t,n,o){const s={sent_at:(new Date).toISOString()};n&&n.sdk&&(s.sdk={name:n.sdk.name,version:n.sdk.version}),o&&t&&(s.dsn=r.dsnToString(t));const a=function(e){const t=i.serializeMetricBuckets(e);return[{type:"statsd",length:t.length},t]}(e);return r.createEnvelope(s,[a])}t.captureAggregateMetrics=function(e,t){r.logger.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=o(t,e.getDsn(),e.getSdkMetadata(),e.getOptions().tunnel);e.sendEnvelope(n)},t.createMetricEnvelope=o},8754:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5720),i=n(1826);const o={increment:function(e,t=1,n){i.metrics.increment(r.MetricsAggregator,e,t,n)},distribution:function(e,t,n){i.metrics.distribution(r.MetricsAggregator,e,t,n)},set:function(e,t,n){i.metrics.set(r.MetricsAggregator,e,t,n)},gauge:function(e,t,n){i.metrics.gauge(r.MetricsAggregator,e,t,n)},timing:function(e,t,n="second",o){return i.metrics.timing(r.MetricsAggregator,e,t,n,o)},getMetricsAggregatorForClient:function(e){return i.metrics.getMetricsAggregatorForClient(e,r.MetricsAggregator)}};t.metricsDefault=o},1826:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(8589);n(4487);const s=n(9180),a=n(5311),c=n(5403),u=n(7640);function l(e,t){const n=r.getGlobalSingleton("globalMetricsAggregators",(()=>new WeakMap)),i=n.get(e);if(i)return i;const o=new t(e);return e.on("flush",(()=>o.flush())),e.on("close",(()=>o.close())),n.set(e,o),o}function d(e,t,n,a,c={}){const u=c.client||i.getClient();if(!u)return;const d=s.getActiveSpan(),p=d?s.getRootSpan(d):void 0,f=p&&s.spanToJSON(p).description,{unit:h,tags:g,timestamp:m}=c,{release:_,environment:v}=u.getOptions(),y={};_&&(y.release=_),v&&(y.environment=v),f&&(y.transaction=f),o.DEBUG_BUILD&&r.logger.log(`Adding value of ${a} to ${t} metric ${n}`);l(u,e).add(t,n,a,h,{...y,...g},m)}function p(e,t,n,r){d(e,u.DISTRIBUTION_METRIC_TYPE,t,h(n),r)}const f={increment:function(e,t,n=1,r){d(e,u.COUNTER_METRIC_TYPE,t,h(n),r)},distribution:p,set:function(e,t,n,r){d(e,u.SET_METRIC_TYPE,t,n,r)},gauge:function(e,t,n,r){d(e,u.GAUGE_METRIC_TYPE,t,h(n),r)},timing:function(e,t,n,i="second",o){if("function"==typeof n){const i=r.timestampInSeconds();return a.startSpanManual({op:"metrics.timing",name:t,startTime:i,onlyIfParent:!0},(s=>c.handleCallbackErrors((()=>n()),(()=>{}),(()=>{const n=r.timestampInSeconds();p(e,t,n-i,{...o,unit:"second"}),s.end(n)}))))}p(e,t,n,{...o,unit:i})},getMetricsAggregatorForClient:l};function h(e){return"string"==typeof e?parseInt(e):e}t.metrics=f},7710:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7640),i=n(3308);class o{constructor(e){this._value=e}get weight(){return 1}add(e){this._value+=e}toString(){return`${this._value}`}}class s{constructor(e){this._last=e,this._min=e,this._max=e,this._sum=e,this._count=1}get weight(){return 5}add(e){this._last=e,e<this._min&&(this._min=e),e>this._max&&(this._max=e),this._sum+=e,this._count++}toString(){return`${this._last}:${this._min}:${this._max}:${this._sum}:${this._count}`}}class a{constructor(e){this._value=[e]}get weight(){return this._value.length}add(e){this._value.push(e)}toString(){return this._value.join(":")}}class c{constructor(e){this.first=e,this._value=new Set([e])}get weight(){return this._value.size}add(e){this._value.add(e)}toString(){return Array.from(this._value).map((e=>"string"==typeof e?i.simpleHash(e):e)).join(":")}}const u={[r.COUNTER_METRIC_TYPE]:o,[r.GAUGE_METRIC_TYPE]:s,[r.DISTRIBUTION_METRIC_TYPE]:a,[r.SET_METRIC_TYPE]:c};t.CounterMetric=o,t.DistributionMetric=a,t.GaugeMetric=s,t.METRIC_MAP=u,t.SetMetric=c},2852:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i="_sentryMetrics";t.getMetricSummaryJsonForSpan=function(e){const t=e[i];if(!t)return;const n={};for(const[,[e,i]]of t){(n[e]||(n[e]=[])).push(r.dropUndefinedKeys(i))}return n},t.updateMetricSummaryOnSpan=function(e,t,n,r,o,s,a){const c=e[i]||(e[i]=new Map),u=`${t}:${n}@${o}`,l=c.get(a);if(l){const[,e]=l;c.set(a,[u,{min:Math.min(e.min,r),max:Math.max(e.max,r),count:e.count+=1,sum:e.sum+=r,tags:e.tags}])}else c.set(a,[u,{min:r,max:r,count:1,sum:r,tags:s}])}},3308:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);function i(e){return e.replace(/[^\w\-./]+/gi,"")}const o=[["\n","\\n"],["\r","\\r"],["\t","\\t"],["\\","\\\\"],["|","\\u{7c}"],[",","\\u{2c}"]];function s(e){return[...e].reduce(((e,t)=>e+function(e){for(const[t,n]of o)if(e===t)return n;return e}(t)),"")}t.getBucketKey=function(e,t,n,i){return`${e}${t}${n}${Object.entries(r.dropUndefinedKeys(i)).sort(((e,t)=>e[0].localeCompare(t[0])))}`},t.sanitizeMetricKey=function(e){return e.replace(/[^\w\-.]+/gi,"_")},t.sanitizeTags=function(e){const t={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){t[i(n)]=s(String(e[n]))}return t},t.sanitizeUnit=function(e){return e.replace(/[^\w]+/gi,"_")},t.serializeMetricBuckets=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),r=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${r}|T${n.timestamp}\n`}return t},t.simpleHash=function(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t>>>0}},39:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9983),o=n(834);class s{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=r.generatePropagationContext()}clone(){const e=new s;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,o._setSpanForScope(e,o._getSpanForScope(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&i.updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,i]=t instanceof a?[t.getScopeData(),t.getRequestSession()]:r.isPlainObject(t)?[e,e.requestSession]:[],{tags:o,extra:s,user:c,contexts:u,level:l,fingerprint:d=[],propagationContext:p}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...s},this._contexts={...this._contexts,...u},c&&Object.keys(c).length&&(this._user=c),l&&(this._level=l),d.length&&(this._fingerprint=d),p&&(this._propagationContext=p),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,o._setSpanForScope(this,void 0),this._attachments=[],this._propagationContext=r.generatePropagationContext(),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const i={timestamp:r.dateTimestampInSeconds(),...e},o=this._breadcrumbs;return o.push(i),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:o._getSpanForScope(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:r.uuid4();if(!this._client)return r.logger.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},this),n}captureMessage(e,t,n){const i=n&&n.event_id?n.event_id:r.uuid4();if(!this._client)return r.logger.warn("No client configured on scope - will not capture message!"),i;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:i},this),i}captureEvent(e,t){const n=t&&t.event_id?t.event_id:r.uuid4();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(r.logger.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const a=s;t.Scope=a},6455:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(8589);function s(e){i.getCurrentScope().setClient(e)}t.initAndBind=function(e,t){!0===t.debug&&(o.DEBUG_BUILD?r.logger.enable():r.consoleSandbox((()=>{}))),i.getCurrentScope().update(t.initialScope);const n=new e(t);return s(n),n.init(),n},t.setCurrentClient=s},8578:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.SEMANTIC_ATTRIBUTE_CACHE_HIT="cache.hit",t.SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE="cache.item_size",t.SEMANTIC_ATTRIBUTE_CACHE_KEY="cache.key",t.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME="sentry.exclusive_time",t.SEMANTIC_ATTRIBUTE_PROFILE_ID="sentry.profile_id",t.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON="sentry.idle_span_finish_reason",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT="sentry.measurement_unit",t.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE="sentry.measurement_value",t.SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",t.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",t.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",t.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source"},7269:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8981),o=n(4608),s=n(1443),a=n(8589),c=n(114),u=n(4487),l=n(834),d=n(9180),p=n(2043);class f extends i.BaseClient{constructor(e){u.registerSpanErrorInstrumentation(),super(e)}eventFromException(e,t){return r.resolvedSyncPromise(r.eventFromUnknownInput(this,this._options.stackParser,e,t))}eventFromMessage(e,t="info",n){return r.resolvedSyncPromise(r.eventFromMessage(this._options.stackParser,e,t,n,this._options.attachStacktrace))}captureException(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher){const e=s.getIsolationScope().getRequestSession();e&&"ok"===e.status&&(e.status="errored")}return super.captureException(e,t,n)}captureEvent(e,t,n){if(this._options.autoSessionTracking&&this._sessionFlusher){if("exception"===(e.type||"exception")&&e.exception&&e.exception.values&&e.exception.values.length>0){const e=s.getIsolationScope().getRequestSession();e&&"ok"===e.status&&(e.status="errored")}}return super.captureEvent(e,t,n)}close(e){return this._sessionFlusher&&this._sessionFlusher.close(),super.close(e)}initSessionFlusher(){const{release:e,environment:t}=this._options;e?this._sessionFlusher=new c.SessionFlusher(this,{release:e,environment:t}):a.DEBUG_BUILD&&r.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}captureCheckIn(e,t,n){const i="checkInId"in e&&e.checkInId?e.checkInId:r.uuid4();if(!this._isEnabled())return a.DEBUG_BUILD&&r.logger.warn("SDK not enabled, will not capture checkin."),i;const s=this.getOptions(),{release:c,environment:u,tunnel:l}=s,d={check_in_id:i,monitor_slug:e.monitorSlug,status:e.status,release:c,environment:u};"duration"in e&&(d.duration=e.duration),t&&(d.monitor_config={schedule:t.schedule,checkin_margin:t.checkinMargin,max_runtime:t.maxRuntime,timezone:t.timezone,failure_issue_threshold:t.failureIssueThreshold,recovery_threshold:t.recoveryThreshold});const[p,f]=this._getTraceInfoFromScope(n);f&&(d.contexts={trace:f});const h=o.createCheckInEnvelope(d,p,this.getSdkMetadata(),l,this.getDsn());return a.DEBUG_BUILD&&r.logger.info("Sending checkin:",e.monitorSlug,e.status),this.sendEnvelope(h),i}_captureRequestSession(){this._sessionFlusher?this._sessionFlusher.incrementSessionStatusCount():a.DEBUG_BUILD&&r.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}_prepareEvent(e,t,n,r){return this._options.platform&&(e.platform=e.platform||this._options.platform),this._options.runtime&&(e.contexts={...e.contexts,runtime:(e.contexts||{}).runtime||this._options.runtime}),this._options.serverName&&(e.server_name=e.server_name||this._options.serverName),super._prepareEvent(e,t,n,r)}_getTraceInfoFromScope(e){if(!e)return[void 0,void 0];const t=l._getSpanForScope(e);if(t){const e=d.getRootSpan(t);return[p.getDynamicSamplingContextFromSpan(e),d.spanToTraceContext(e)]}const{traceId:n,spanId:r,parentSpanId:i,dsc:o}=e.getPropagationContext(),s={trace_id:n,span_id:r,parent_span_id:i};return o?[o,s]:[p.getDynamicSamplingContextFromClient(n,this),s]}}t.ServerRuntimeClient=f},9983:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);function i(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||r.timestampInSeconds(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:r.uuid4()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}t.closeSession=function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),i(e,n)},t.makeSession=function(e){const t=r.timestampInSeconds(),n={sid:r.uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return r.dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&i(n,e),n},t.updateSession=i},114:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443);t.SessionFlusher=class{constructor(e,t){this._client=e,this.flushTimeout=60,this._pendingAggregates=new Map,this._isEnabled=!0,this._intervalId=setInterval((()=>this.flush()),1e3*this.flushTimeout),this._intervalId.unref&&this._intervalId.unref(),this._sessionAttrs=t}flush(){const e=this.getSessionAggregates();0!==e.aggregates.length&&(this._pendingAggregates=new Map,this._client.sendSession(e))}getSessionAggregates(){const e=Array.from(this._pendingAggregates.values()),t={attrs:this._sessionAttrs,aggregates:e};return r.dropUndefinedKeys(t)}close(){clearInterval(this._intervalId),this._isEnabled=!1,this.flush()}incrementSessionStatusCount(){if(!this._isEnabled)return;const e=i.getIsolationScope(),t=e.getRequestSession();t&&t.status&&(this._incrementSessionStatusCount(t.status,new Date),e.setRequestSession(void 0))}_incrementSessionStatusCount(e,t){const n=new Date(t).setSeconds(0,0);let r=this._pendingAggregates.get(n);switch(r||(r={started:new Date(n).toISOString()},this._pendingAggregates.set(n,r)),e){case"errored":return r.errored=(r.errored||0)+1,r.errored;case"ok":return r.exited=(r.exited||0)+1,r.exited;default:return r.crashed=(r.crashed||0)+1,r.crashed}}}},2043:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(3394),o=n(1443),s=n(8578),a=n(9180),c="_frozenDsc";function u(e,t){const n=t.getOptions(),{publicKey:o}=t.getDsn()||{},s=r.dropUndefinedKeys({environment:n.environment||i.DEFAULT_ENVIRONMENT,release:n.release,public_key:o,trace_id:e});return t.emit("createDsc",s),s}function l(e){const t=o.getClient();if(!t)return{};const n=u(a.spanToJSON(e).trace_id||"",t),i=a.getRootSpan(e),l=i[c];if(l)return l;const d=i.spanContext().traceState,p=d&&d.get("sentry.dsc"),f=p&&r.baggageHeaderToDynamicSamplingContext(p);if(f)return f;const h=a.spanToJSON(i),g=h.data||{},m=g[s.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];null!=m&&(n.sample_rate=`${m}`);const _=g[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],v=h.description;return"url"!==_&&v&&(n.transaction=v),n.sampled=String(a.spanIsSampled(i)),t.emit("createDsc",n,i),n}t.freezeDscOnSpan=function(e,t){const n=e;r.addNonEnumerableProperty(n,c,t)},t.getDynamicSamplingContextFromClient=u,t.getDynamicSamplingContextFromSpan=l,t.spanToBaggageHeader=function(e){const t=l(e);return r.dynamicSamplingContextToSentryBaggageHeader(t)}},4487:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589),o=n(9180),s=n(6938);let a=!1;function c(){const e=o.getActiveSpan(),t=e&&o.getRootSpan(e);if(t){const e="internal_error";i.DEBUG_BUILD&&r.logger.log(`[Tracing] Root span: ${e} -> Global error occured`),t.setStatus({code:s.SPAN_STATUS_ERROR,message:e})}}c.tag="sentry_tracingErrorCallback",t.registerSpanErrorInstrumentation=function(){a||(a=!0,r.addGlobalErrorInstrumentationHandler(c),r.addGlobalUnhandledRejectionInstrumentationHandler(c))}},8183:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4487);t.addTracingExtensions=function(){r.registerSpanErrorInstrumentation()}},3118:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(8589),s=n(8578),a=n(4602),c=n(834),u=n(9180),l=n(8469),d=n(6938),p=n(5311),f={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};t.TRACING_DEFAULTS=f,t.startIdleSpan=function(e,t={}){const n=new Map;let h,g=!1,m="externalFinish",_=!t.disableAutoFinish;const{idleTimeout:v=f.idleTimeout,finalTimeout:y=f.finalTimeout,childSpanTimeout:S=f.childSpanTimeout,beforeSpanEnd:b}=t,E=i.getClient();if(!E||!a.hasTracingEnabled())return new l.SentryNonRecordingSpan;const w=i.getCurrentScope(),T=u.getActiveSpan(),I=function(e){const t=p.startInactiveSpan(e);return c._setSpanForScope(i.getCurrentScope(),t),o.DEBUG_BUILD&&r.logger.log("[Tracing] Started span is an idle span"),t}(e);function x(){h&&(clearTimeout(h),h=void 0)}function k(e){x(),h=setTimeout((()=>{!g&&0===n.size&&_&&(m="idleTimeout",I.end(e))}),v)}function C(e){h=setTimeout((()=>{!g&&_&&(m="heartbeatFailed",I.end(e))}),S)}function A(e){g=!0,n.clear(),c._setSpanForScope(w,T);const t=u.spanToJSON(I),{start_timestamp:i}=t;if(!i)return;(t.data||{})[s.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON]||I.setAttribute(s.SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON,m),r.logger.log(`[Tracing] Idle span "${t.op}" finished`);const a=u.getSpanDescendants(I).filter((e=>e!==I));let l=0;a.forEach((t=>{t.isRecording()&&(t.setStatus({code:d.SPAN_STATUS_ERROR,message:"cancelled"}),t.end(e),o.DEBUG_BUILD&&r.logger.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=u.spanToJSON(t),{timestamp:i=0,start_timestamp:s=0}=n,a=s<=e,c=i-s<=(y+v)/1e3;if(o.DEBUG_BUILD){const e=JSON.stringify(t,void 0,2);a?c||r.logger.log("[Tracing] Discarding span since it finished after idle span final timeout",e):r.logger.log("[Tracing] Discarding span since it happened after idle span was finished",e)}c&&a||(u.removeChildSpanFromSpan(I,t),l++)})),l>0&&I.setAttribute("sentry.idle_span_discarded_spans",l)}return I.end=new Proxy(I.end,{apply(e,t,n){b&&b(I);const[i,...o]=n,s=i||r.timestampInSeconds(),a=u.spanTimeInputToSeconds(s),c=u.getSpanDescendants(I).filter((e=>e!==I));if(!c.length)return A(a),Reflect.apply(e,t,[a,...o]);const l=c.map((e=>u.spanToJSON(e).timestamp)).filter((e=>!!e)),d=l.length?Math.max(...l):void 0,p=u.spanToJSON(I).start_timestamp,f=Math.min(p?p+y/1e3:1/0,Math.max(p||-1/0,Math.min(a,d||1/0)));return A(f),Reflect.apply(e,t,[f,...o])}}),E.on("spanStart",(e=>{if(g||e===I||u.spanToJSON(e).timestamp)return;var t;u.getSpanDescendants(I).includes(e)&&(t=e.spanContext().spanId,x(),n.set(t,!0),C(r.timestampInSeconds()+S/1e3))})),E.on("spanEnd",(e=>{var t;g||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&k(r.timestampInSeconds()+v/1e3))})),E.on("idleSpanEnableAutoFinish",(e=>{e===I&&(_=!0,k(),n.size&&C())})),t.disableAutoFinish||k(),setTimeout((()=>{g||(I.setStatus({code:d.SPAN_STATUS_ERROR,message:"deadline_exceeded"}),m="finalTimeout",I.end())}),y),I}},7187:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589),o=n(9180);t.logSpanEnd=function(e){if(!i.DEBUG_BUILD)return;const{description:t="< unknown name >",op:n="< unknown op >"}=o.spanToJSON(e),{spanId:s}=e.spanContext(),a=`[Tracing] Finishing "${n}" ${o.getRootSpan(e)===e?"root ":""}span "${t}" with ID ${s}`;r.logger.log(a)},t.logSpanStart=function(e){if(!i.DEBUG_BUILD)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:s}=o.spanToJSON(e),{spanId:a}=e.spanContext(),c=o.spanIsSampled(e),u=o.getRootSpan(e),l=u===e,d=`[Tracing] Starting ${c?"sampled":"unsampled"} ${l?"root ":""}span`,p=[`op: ${n}`,`name: ${t}`,`ID: ${a}`];if(s&&p.push(`parent ID: ${s}`),!l){const{op:e,description:t}=o.spanToJSON(u);p.push(`root ID: ${u.spanContext().spanId}`),e&&p.push(`root op: ${e}`),t&&p.push(`root description: ${t}`)}r.logger.log(`${d}\n  ${p.join("\n  ")}`)}},3554:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8578),i=n(9180);t.setMeasurement=function(e,t,n){const o=i.getActiveSpan(),s=o&&i.getRootSpan(o);s&&s.addEvent(e,{[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:t,[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:n})},t.timedEventsToMeasurements=function(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},i=n[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],o=n[r.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];"string"==typeof i&&"number"==typeof o&&(t[e.name]={value:o,unit:i})})),t}},7917:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589),o=n(4602),s=n(8270);t.sampleSpan=function(e,t){if(!o.hasTracingEnabled(e))return[!1];let n;n="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const a=s.parseSampleRate(n);return void 0===a?(i.DEBUG_BUILD&&r.logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):a?Math.random()<a?[!0,a]:(i.DEBUG_BUILD&&r.logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,a]):(i.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,a])}},8469:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(9180);t.SentryNonRecordingSpan=class{constructor(e={}){this._traceId=e.traceId||r.uuid4(),this._spanId=e.spanId||r.uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:i.TRACE_FLAG_NONE}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}}},3187:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(8589),s=n(9071),a=n(2852),c=n(8578),u=n(9180),l=n(2043),d=n(7187),p=n(3554),f=n(9699);class h{constructor(e={}){this._traceId=e.traceId||r.uuid4(),this._spanId=e.spanId||r.uuid4().substring(16),this._startTime=e.startTimestamp||r.timestampInSeconds(),this._attributes={},this.setAttributes({[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[c.SEMANTIC_ATTRIBUTE_SENTRY_OP]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?u.TRACE_FLAG_SAMPLED:u.TRACE_FLAG_NONE}}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach((t=>this.setAttribute(t,e[t])))}updateStartTime(e){this._startTime=u.spanTimeInputToSeconds(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=u.spanTimeInputToSeconds(e),d.logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return r.dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:u.getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(this),profile_id:this._attributes[c.SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[c.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:p.timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&u.getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?u.getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){o.DEBUG_BUILD&&r.logger.log("[Tracing] Adding an event to span:",e);const i=g(t)?t:n||r.timestampInSeconds(),s=g(t)?{}:t||{},a={name:e,time:u.spanTimeInputToSeconds(i),attributes:s};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=i.getClient();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===u.getRootSpan(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=i.getClient();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");const s=t.getTransport();s&&s.send(e).then(null,(e=>{o.DEBUG_BUILD&&r.logger.error("Error while sending span:",e)}))}(s.createSpanEnvelope([this],e)):(o.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(f.getCapturedScopesOnSpan(this).scope||i.getCurrentScope()).captureEvent(t)}}_convertSpanToTransaction(){if(!m(u.spanToJSON(this)))return;this._name||(o.DEBUG_BUILD&&r.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=f.getCapturedScopesOnSpan(this),n=(e||i.getCurrentScope()).getClient()||i.getClient();if(!0!==this._sampled)return o.DEBUG_BUILD&&r.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const s=u.getSpanDescendants(this).filter((e=>e!==this&&!function(e){return e instanceof h&&e.isStandaloneSpan()}(e))).map((e=>u.spanToJSON(e))).filter(m),d=this._attributes[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],g={contexts:{trace:u.spanToTransactionTraceContext(this)},spans:s.length>1e3?s.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,1e3):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...r.dropUndefinedKeys({dynamicSamplingContext:l.getDynamicSamplingContextFromSpan(this)})},_metrics_summary:a.getMetricSummaryJsonForSpan(this),...d&&{transaction_info:{source:d}}},_=p.timedEventsToMeasurements(this._events);return _&&Object.keys(_).length&&(o.DEBUG_BUILD&&r.logger.log("[Measurements] Adding measurements to transaction event",JSON.stringify(_,void 0,2)),g.measurements=_),g}}function g(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function m(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}t.SentrySpan=h},6938:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=1,r=2;function i(e){if(e<400&&e>=100)return{code:n};if(e>=400&&e<500)switch(e){case 401:return{code:r,message:"unauthenticated"};case 403:return{code:r,message:"permission_denied"};case 404:return{code:r,message:"not_found"};case 409:return{code:r,message:"already_exists"};case 413:return{code:r,message:"failed_precondition"};case 429:return{code:r,message:"resource_exhausted"};case 499:return{code:r,message:"cancelled"};default:return{code:r,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:r,message:"unimplemented"};case 503:return{code:r,message:"unavailable"};case 504:return{code:r,message:"deadline_exceeded"};default:return{code:r,message:"internal_error"}}return{code:r,message:"unknown_error"}}t.SPAN_STATUS_ERROR=r,t.SPAN_STATUS_OK=n,t.SPAN_STATUS_UNSET=0,t.getSpanStatusFromHttpCode=i,t.setHttpStatus=function(e,t){e.setAttribute("http.response.status_code",t);const n=i(t);"unknown_error"!==n.message&&e.setStatus(n)}},5311:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(6031),o=n(1443),s=n(2711),a=n(8589),c=n(8578),u=n(5403),l=n(4602),d=n(834),p=n(9180),f=n(2043),h=n(7187),g=n(7917),m=n(8469),_=n(3187),v=n(6938),y=n(9699),S="__SENTRY_SUPPRESS_TRACING__";function b(e,t){const n=T();return n.withActiveSpan?n.withActiveSpan(e,t):o.withScope((n=>(d._setSpanForScope(n,e||void 0),t(n))))}function E({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!l.hasTracingEnabled())return new m.SentryNonRecordingSpan;const i=o.getIsolationScope();let s;if(e&&!n)s=function(e,t,n){const{spanId:r,traceId:i}=e.spanContext(),s=!t.getScopeData().sdkProcessingMetadata[S]&&p.spanIsSampled(e),a=s?new _.SentrySpan({...n,parentSpanId:r,traceId:i,sampled:s}):new m.SentryNonRecordingSpan({traceId:i});p.addChildSpanToSpan(e,a);const c=o.getClient();c&&(c.emit("spanStart",a),n.endTimestamp&&c.emit("spanEnd",a));return a}(e,r,t),p.addChildSpanToSpan(e,s);else if(e){const n=f.getDynamicSamplingContextFromSpan(e),{traceId:i,spanId:o}=e.spanContext(),a=p.spanIsSampled(e);s=I({traceId:i,parentSpanId:o,...t},r,a),f.freezeDscOnSpan(s,n)}else{const{traceId:e,dsc:n,parentSpanId:o,sampled:a}={...i.getPropagationContext(),...r.getPropagationContext()};s=I({traceId:e,parentSpanId:o,...t},r,a),n&&f.freezeDscOnSpan(s,n)}return h.logSpanStart(s),y.setCapturedScopesOnSpan(s,r,i),s}function w(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=p.spanTimeInputToSeconds(e.startTime),delete n.startTime,n}return t}function T(){const e=i.getMainCarrier();return s.getAsyncContextStrategy(e)}function I(e,t,n){const r=o.getClient(),i=r&&r.getOptions()||{},{name:s="",attributes:a}=e,[u,l]=t.getScopeData().sdkProcessingMetadata[S]?[!1]:g.sampleSpan(i,{name:s,parentSampled:n,attributes:a,transactionContext:{name:s,parentSampled:n}}),d=new _.SentrySpan({...e,attributes:{[c.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...e.attributes},sampled:u});return void 0!==l&&d.setAttribute(c.SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,l),r&&r.emit("spanStart",d),d}function x(e){const t=d._getSpanForScope(e);if(!t)return;const n=o.getClient();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?p.getRootSpan(t):t}function k(e){return e?t=>b(e,t):e=>e()}t.continueTrace=({sentryTrace:e,baggage:t},n)=>o.withScope((i=>{const o=r.propagationContextFromHeaders(e,t);return i.setPropagationContext(o),n()})),t.startInactiveSpan=function(e){const t=T();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=w(e),{forceTransaction:r,parentSpan:i}=e;return(e.scope?t=>o.withScope(e.scope,t):i?e=>b(i,e):e=>e())((()=>{const t=o.getCurrentScope(),i=x(t);return e.onlyIfParent&&!i?new m.SentryNonRecordingSpan:E({parentSpan:i,spanArguments:n,forceTransaction:r,scope:t})}))},t.startNewTrace=function(e){return o.withScope((t=>(t.setPropagationContext(r.generatePropagationContext()),a.DEBUG_BUILD&&r.logger.info(`Starting a new trace with id ${t.getPropagationContext().traceId}`),b(null,e))))},t.startSpan=function(e,t){const n=T();if(n.startSpan)return n.startSpan(e,t);const r=w(e),{forceTransaction:i,parentSpan:s}=e;return o.withScope(e.scope,(()=>k(s)((()=>{const n=o.getCurrentScope(),s=x(n),a=e.onlyIfParent&&!s?new m.SentryNonRecordingSpan:E({parentSpan:s,spanArguments:r,forceTransaction:i,scope:n});return d._setSpanForScope(n,a),u.handleCallbackErrors((()=>t(a)),(()=>{const{status:e}=p.spanToJSON(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:v.SPAN_STATUS_ERROR,message:"internal_error"})}),(()=>a.end()))}))))},t.startSpanManual=function(e,t){const n=T();if(n.startSpanManual)return n.startSpanManual(e,t);const r=w(e),{forceTransaction:i,parentSpan:s}=e;return o.withScope(e.scope,(()=>k(s)((()=>{const n=o.getCurrentScope(),s=x(n),a=e.onlyIfParent&&!s?new m.SentryNonRecordingSpan:E({parentSpan:s,spanArguments:r,forceTransaction:i,scope:n});function c(){a.end()}return d._setSpanForScope(n,a),u.handleCallbackErrors((()=>t(a,c)),(()=>{const{status:e}=p.spanToJSON(a);!a.isRecording()||e&&"ok"!==e||a.setStatus({code:v.SPAN_STATUS_ERROR,message:"internal_error"})}))}))))},t.suppressTracing=function(e){const t=T();return t.suppressTracing?t.suppressTracing(e):o.withScope((t=>(t.setSDKProcessingMetadata({[S]:!0}),e())))},t.withActiveSpan=b},9699:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i="_sentryScope",o="_sentryIsolationScope";t.stripUrlQueryAndFragment=r.stripUrlQueryAndFragment,t.getCapturedScopesOnSpan=function(e){return{scope:e[i],isolationScope:e[o]}},t.setCapturedScopesOnSpan=function(e,t,n){e&&(r.addNonEnumerableProperty(e,o,n),r.addNonEnumerableProperty(e,i,t))}},1609:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589);function o(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}t.DEFAULT_TRANSPORT_BUFFER_SIZE=64,t.createTransport=function(e,t,n=r.makePromiseBuffer(e.bufferSize||64)){let s={};return{send:function(a){const c=[];if(r.forEachEnvelopeItem(a,((t,n)=>{const i=r.envelopeItemTypeToDataCategory(n);if(r.isRateLimited(s,i)){const r=o(t,n);e.recordDroppedEvent("ratelimit_backoff",i,r)}else c.push(t)})),0===c.length)return r.resolvedSyncPromise({});const u=r.createEnvelope(a[0],c),l=t=>{r.forEachEnvelopeItem(u,((n,i)=>{const s=o(n,i);e.recordDroppedEvent(t,r.envelopeItemTypeToDataCategory(i),s)}))};return n.add((()=>t({body:r.serializeEnvelope(u)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&i.DEBUG_BUILD&&r.logger.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=r.updateRateLimits(s,e),e)),(e=>{throw l("network_error"),e})))).then((e=>e),(e=>{if(e instanceof r.SentryError)return i.DEBUG_BUILD&&r.logger.error("Skipped sending event because buffer is full."),l("queue_overflow"),r.resolvedSyncPromise({});throw e}))},flush:e=>n.drain(e)}}},2195:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(5147);function o(e,t){let n;return r.forEachEnvelopeItem(e,((e,r)=>(t.includes(r)&&(n=Array.isArray(e)?e[1]:void 0),!!n))),n}t.eventFromEnvelope=o,t.makeMultiplexedTransport=function(e,t){return n=>{const s=e(n),a=new Map;function c(t,s){const c=s?`${t}:${s}`:t;let u=a.get(c);if(!u){const l=r.dsnFromString(t);if(!l)return;const d=i.getEnvelopeEndpointWithUrlEncodedAuth(l,n.tunnel);u=s?function(e,t){return n=>{const r=e(n);return{...r,send:async e=>{const n=o(e,["event","transaction","profile","replay_event"]);return n&&(n.release=t),r.send(e)}}}}(e,s)({...n,url:d}):e({...n,url:d}),a.set(c,u)}return[t,u]}return{send:async function(e){const n=t({envelope:e,getEvent:function(t){const n=t&&t.length?t:["event"];return o(e,n)}}).map((e=>"string"==typeof e?c(e,void 0):c(e.dsn,e.release))).filter((e=>!!e)),i=n.length?n:[["",s]];return(await Promise.all(i.map((([t,n])=>n.send(function(e,t){return r.createEnvelope(t?{...e[0],dsn:t}:e[0],e[1])}(e,t))))))[0]},flush:async function(e){const t=[...a.values(),s];return(await Promise.all(t.map((t=>t.flush(e))))).every((e=>e))}}}}},2189:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589),o=5e3;t.MIN_DELAY=100,t.START_DELAY=o,t.makeOfflineTransport=function(e){function t(...e){i.DEBUG_BUILD&&r.logger.info("[Offline]:",...e)}return n=>{const i=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let a,c=o;function u(e){a&&clearTimeout(a),a=setTimeout((async()=>{a=void 0;const e=await s.shift();e&&(t("Attempting to send previously queued event"),e[0].sent_at=(new Date).toISOString(),d(e,!0).catch((e=>{t("Failed to retry sending",e)})))}),e),"number"!=typeof a&&a.unref&&a.unref()}function l(){a||(u(c),c=Math.min(2*c,36e5))}async function d(e,a=!1){if(!a&&r.envelopeContainsItemType(e,["replay_event","replay_recording"]))return await s.push(e),u(100),{};try{const t=await i.send(e);let n=100;if(t)if(t.headers&&t.headers["retry-after"])n=r.parseRetryAfterHeader(t.headers["retry-after"]);else if(t.headers&&t.headers["x-sentry-rate-limits"])n=6e4;else if((t.statusCode||0)>=400)return t;return u(n),c=o,t}catch(i){if(await function(e,t,i){return!r.envelopeContainsItemType(e,["client_report"])&&(!n.shouldStore||n.shouldStore(e,t,i))}(e,i,c))return a?await s.unshift(e):await s.push(e),l(),t("Error sending. Event queued.",i),{};throw i}}return n.flushAtStartup&&l(),{send:d,flush:e=>i.flush(e)}}}},5888:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(1443),o=n(4776),s=n(8578);n(4487),n(8589);const a=n(5311),c={mechanism:{handled:!1,data:{function:"trpcMiddleware"}}};t.trpcMiddleware=function(e={}){return function(t){const{path:n,type:u,next:l,rawInput:d}=t,p=i.getClient(),f=p&&p.getOptions(),h={procedure_type:u};function g(e){"object"==typeof e&&null!==e&&"ok"in e&&!e.ok&&"error"in e&&o.captureException(e.error,c)}return(void 0!==e.attachRpcInput?e.attachRpcInput:f&&f.sendDefaultPii)&&(h.input=r.normalize(d)),o.setContext("trpc",h),a.startSpanManual({name:`trpc/${n}`,op:"rpc.server",attributes:{[s.SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"route",[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.rpc.trpc"}},(e=>{let t;try{t=l()}catch(t){throw o.captureException(t,c),e.end(),t}return r.isThenable(t)?t.then((t=>(g(t),e.end(),t)),(t=>{throw o.captureException(t,c),e.end(),t})):(g(t),e.end(),t)}))}}},5882:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(2043),o=n(9180);function s(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[t][r]=n[r])}}t.applyScopeDataToEvent=function(e,t){const{fingerprint:n,span:s,breadcrumbs:a,sdkProcessingMetadata:c}=t;!function(e,t){const{extra:n,tags:i,user:o,contexts:s,level:a,transactionName:c}=t,u=r.dropUndefinedKeys(n);u&&Object.keys(u).length&&(e.extra={...u,...e.extra});const l=r.dropUndefinedKeys(i);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const d=r.dropUndefinedKeys(o);d&&Object.keys(d).length&&(e.user={...d,...e.user});const p=r.dropUndefinedKeys(s);p&&Object.keys(p).length&&(e.contexts={...p,...e.contexts});a&&(e.level=a);c&&"transaction"!==e.type&&(e.transaction=c)}(e,t),s&&function(e,t){e.contexts={trace:o.spanToTraceContext(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:i.getDynamicSamplingContextFromSpan(t),...e.sdkProcessingMetadata};const n=o.getRootSpan(t),r=o.spanToJSON(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,s),function(e,t){e.fingerprint=e.fingerprint?r.arrayify(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,a),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,c)},t.mergeAndOverwriteScopeData=s,t.mergeScopeData=function(e,t){const{extra:n,tags:r,user:i,contexts:o,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:l,eventProcessors:d,attachments:p,propagationContext:f,transactionName:h,span:g}=t;s(e,"extra",n),s(e,"tags",r),s(e,"user",i),s(e,"contexts",o),s(e,"sdkProcessingMetadata",c),a&&(e.level=a),h&&(e.transactionName=h),g&&(e.span=g),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),p.length&&(e.attachments=[...e.attachments,...p]),e.propagationContext={...e.propagationContext,...f}}},5403:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);t.handleCallbackErrors=function(e,t,n=()=>{}){let i;try{i=e()}catch(e){throw t(e),n(),e}return function(e,t,n){if(r.isThenable(e))return e.then((e=>(n(),e)),(e=>{throw t(e),n(),e}));return n(),e}(i,t,n)}},4602:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1443);t.hasTracingEnabled=function(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=e||function(){const e=r.getClient();return e&&e.getOptions()}();return!!t&&(t.enableTracing||"tracesSampleRate"in t||"tracesSampler"in t)}},6799:(e,t)=>{function n(e){return"/"===e[e.length-1]?e.slice(0,-1):e}Object.defineProperty(t,"__esModule",{value:!0}),t.isSentryRequestUrl=function(e,t){const r=t&&t.getDsn(),i=t&&t.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,r)||function(e,t){if(!t)return!1;return n(e)===n(t)}(e,i)}},46:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parameterize=function(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}},8270:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(8589);t.parseSampleRate=function(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;i.DEBUG_BUILD&&r.logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}},6360:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(3394),o=n(1443),s=n(6770),a=n(39),c=n(5882);const u=new WeakMap;function l(e,t){const n=r.GLOBAL_OBJ._sentryDebugIds;if(!n)return;let i;const o=u.get(t);o?i=o:(i=new Map,u.set(t,i));const s=Object.entries(n).reduce(((e,[n,r])=>{let o;const s=i.get(n);s?o=s:(o=t(n),i.set(n,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r;break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=s[e.filename])}))}))}catch(e){}}function d(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}function p(e,t){if(!t)return e;const n=e?e.clone():new a.Scope;return n.update(t),n}const f=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];t.applyDebugIds=l,t.applyDebugMeta=d,t.parseEventHintOrCaptureContext=function(e){if(e)return function(e){return e instanceof a.Scope||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>f.includes(e)))}(e)?{captureContext:e}:e},t.prepareEvent=function(e,t,n,a,u,f){const{normalizeDepth:h=3,normalizeMaxBreadth:g=1e3}=e,m={...t,event_id:t.event_id||n.event_id||r.uuid4(),timestamp:t.timestamp||r.dateTimestampInSeconds()},_=n.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:n,release:o,dist:s,maxValueLength:a=250}=t;"environment"in e||(e.environment="environment"in t?n:i.DEFAULT_ENVIRONMENT);void 0===e.release&&void 0!==o&&(e.release=o);void 0===e.dist&&void 0!==s&&(e.dist=s);e.message&&(e.message=r.truncate(e.message,a));const c=e.exception&&e.exception.values&&e.exception.values[0];c&&c.value&&(c.value=r.truncate(c.value,a));const u=e.request;u&&u.url&&(u.url=r.truncate(u.url,a))}(m,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(m,_),u&&u.emit("applyFrameMetadata",t),void 0===t.type&&l(m,e.stackParser);const v=p(a,n.captureContext);n.mechanism&&r.addExceptionMechanism(m,n.mechanism);const y=u?u.getEventProcessors():[],S=o.getGlobalScope().getScopeData();if(f){const e=f.getScopeData();c.mergeScopeData(S,e)}if(v){const e=v.getScopeData();c.mergeScopeData(S,e)}const b=[...n.attachments||[],...S.attachments];b.length&&(n.attachments=b),c.applyScopeDataToEvent(m,S);const E=[...y,...S.eventProcessors];return s.notifyEventProcessors(E,m,n).then((e=>(e&&d(e),"number"==typeof h&&h>0?function(e,t,n){if(!e)return null;const i={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:r.normalize(e.data,t,n)}})))},...e.user&&{user:r.normalize(e.user,t,n)},...e.contexts&&{contexts:r.normalize(e.contexts,t,n)},...e.extra&&{extra:r.normalize(e.extra,t,n)}};e.contexts&&e.contexts.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=r.normalize(e.contexts.trace.data,t,n)));e.spans&&(i.spans=e.spans.map((e=>({...e,...e.data&&{data:r.normalize(e.data,t,n)}}))));return i}(e,h,g):e)))}},3916:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837);t.applySdkMetadata=function(e,t,n=[t],i="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${i}:@sentry/${e}`,version:r.SDK_VERSION}))),version:r.SDK_VERSION}),e._metadata=o}},834:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i="_sentrySpan";t._getSpanForScope=function(e){return e[i]},t._setSpanForScope=function(e,t){t?r.addNonEnumerableProperty(e,i,t):delete e[i]}},9180:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9837),i=n(2711),o=n(6031),s=n(1443),a=n(2852),c=n(8578),u=n(6938),l=n(834),d=1;function p(e){return"number"==typeof e?f(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?f(e.getTime()):r.timestampInSeconds()}function f(e){return e>9999999999?e/1e3:e}function h(e){if(function(e){return"function"==typeof e.getSpanJSON}(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}(e)){const{attributes:i,startTime:o,name:s,endTime:u,parentSpanId:l,status:d}=e;return r.dropUndefinedKeys({span_id:t,trace_id:n,data:i,description:s,parent_span_id:l,start_timestamp:p(o),timestamp:p(u)||void 0,status:m(d),op:i[c.SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:i[c.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:a.getMetricSummaryJsonForSpan(e)})}return{span_id:t,trace_id:n}}catch(e){return{}}}function g(e){const{traceFlags:t}=e.spanContext();return t===d}function m(e){if(e&&e.code!==u.SPAN_STATUS_UNSET)return e.code===u.SPAN_STATUS_OK?"ok":e.message||"unknown_error"}const _="_sentryChildSpans",v="_sentryRootSpan";function y(){const e=o.getMainCarrier(),t=i.getAsyncContextStrategy(e);return t.getActiveSpan?t.getActiveSpan():l._getSpanForScope(s.getCurrentScope())}t.TRACE_FLAG_NONE=0,t.TRACE_FLAG_SAMPLED=d,t.addChildSpanToSpan=function(e,t){const n=e[v]||e;r.addNonEnumerableProperty(t,v,n),e[_]?e[_].add(t):r.addNonEnumerableProperty(e,_,new Set([t]))},t.getActiveSpan=y,t.getRootSpan=function(e){return e[v]||e},t.getSpanDescendants=function(e){const t=new Set;return function e(n){if(!t.has(n)&&g(n)){t.add(n);const r=n[_]?Array.from(n[_]):[];for(const t of r)e(t)}}(e),Array.from(t)},t.getStatusMessage=m,t.removeChildSpanFromSpan=function(e,t){e[_]&&e[_].delete(t)},t.spanIsSampled=g,t.spanTimeInputToSeconds=p,t.spanToJSON=h,t.spanToTraceContext=function(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:i}=h(e);return r.dropUndefinedKeys({parent_span_id:i,span_id:t,trace_id:n})},t.spanToTraceHeader=function(e){const{traceId:t,spanId:n}=e.spanContext(),i=g(e);return r.generateSentryTraceHeader(t,n,i)},t.spanToTransactionTraceContext=function(e){const{spanId:t,traceId:n}=e.spanContext(),{data:i,op:o,parent_span_id:s,status:a,origin:c}=h(e);return r.dropUndefinedKeys({parent_span_id:s,span_id:t,trace_id:n,data:i,op:o,status:a,origin:c})},t.updateMetricSummaryOnActiveSpan=function(e,t,n,r,i,o){const s=y();s&&a.updateMetricSummaryOnSpan(s,e,t,n,r,i,o)}},5412:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941),i=n(4300);function o(e,t,n,i,c,u,l,d){if(u.length>=n+1)return u;let p=[...u];if(r.isInstanceOf(i[c],Error)){s(l,d);const r=e(t,i[c]),u=p.length;a(r,c,u,d),p=o(e,t,n,i[c],c,[r,...p],r,u)}return Array.isArray(i.errors)&&i.errors.forEach(((i,u)=>{if(r.isInstanceOf(i,Error)){s(l,d);const r=e(t,i),f=p.length;a(r,`errors[${u}]`,f,d),p=o(e,t,n,i,c,[r,...p],r,f)}})),p}function s(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function a(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}t.applyAggregateErrorsToEvent=function(e,t,n=250,s,a,c,u){if(!(c.exception&&c.exception.values&&u&&r.isInstanceOf(u.originalException,Error)))return;const l=c.exception.values.length>0?c.exception.values[c.exception.values.length-1]:void 0;var d,p;l&&(c.exception.values=(d=o(e,t,a,u.originalException,s,c.exception.values,l,0),p=n,d.map((e=>(e.value&&(e.value=i.truncate(e.value,p)),e)))))}},9570:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1104),i=n(9166),o=n(6824);t.callFrameToStackFrame=function(e,t,n){const s=t?t.replace(/^file:\/\//,""):void 0,a=e.location.columnNumber?e.location.columnNumber+1:void 0,c=e.location.lineNumber?e.location.lineNumber+1:void 0;return i.dropUndefinedKeys({filename:s,module:n(s),function:e.functionName||o.UNKNOWN_FUNCTION,colno:a,lineno:c,in_app:s?r.filenameIsInApp(s):void 0})},t.watchdogTimer=function(e,t,n,r){const i=e();let o=!1,s=!0;return setInterval((()=>{const e=i.getTimeMs();!1===o&&e>t+n&&(o=!0,s&&r()),e<t+n&&(o=!1)}),20),{poll:()=>{i.reset()},enabled:e=>{s=e}}}},7604:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.flatten=function(e){const t=[],n=e=>{e.forEach((e=>{Array.isArray(e)?n(e):t.push(e)}))};return n(e),t}},7115:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2643),i=n(941),o=n(8709),s="sentry-",a=/^sentry-/,c=8192;function u(e){if(e&&(i.isString(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce(((e,t)=>{const n=l(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{}):l(e)}function l(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}t.BAGGAGE_HEADER_NAME="baggage",t.MAX_BAGGAGE_STRING_LENGTH=c,t.SENTRY_BAGGAGE_KEY_PREFIX=s,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=a,t.baggageHeaderToDynamicSamplingContext=function(e){const t=u(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(a)){e[t.slice(7)]=n}return e}),{});return Object.keys(n).length>0?n:void 0},t.dynamicSamplingContextToSentryBaggageHeader=function(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce(((e,[t,n],i)=>{const s=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,a=0===i?s:`${e},${s}`;return a.length>c?(r.DEBUG_BUILD&&o.logger.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a}),"")}(Object.entries(e).reduce(((e,[t,n])=>(n&&(e[`${s}${t}`]=n),e)),{}))},t.parseBaggageHeader=u},3837:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941),i=n(7566).GLOBAL_OBJ;function o(e,t){const n=e,o=[];if(!n||!n.tagName)return"";if(i.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}o.push(n.tagName.toLowerCase());const s=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(s&&s.length)s.forEach((e=>{o.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&o.push(`#${n.id}`);const e=n.className;if(e&&r.isString(e)){const t=e.split(/\s+/);for(const e of t)o.push(`.${e}`)}}const a=["aria-label","type","name","title","alt"];for(const e of a){const t=n.getAttribute(e);t&&o.push(`[${e}="${t}"]`)}return o.join("")}t.getComponentName=function(e){if(!i.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null},t.getDomElement=function(e){return i.document&&i.document.querySelector?i.document.querySelector(e):null},t.getLocationHref=function(){try{return i.document.location.href}catch(e){return""}},t.htmlTreeAsString=function(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let s=0,a=0;const c=" > ",u=c.length;let l;const d=Array.isArray(t)?t:t.keyAttrs,p=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&s++<r&&(l=o(n,d),!("html"===l||s>1&&a+i.length*u+l.length>=p));)i.push(l),a+=l.length,n=n.parentNode;return i.reverse().join(c)}catch(e){return"<unknown>"}}},6531:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5151);t._asyncNullishCoalesce=async function(e,t){return r._nullishCoalesce(e,t)}},6254:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._asyncOptionalChain=async function(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=await o(n)):"call"!==i&&"optionalCall"!==i||(n=await o(((...e)=>n.call(t,...e))),t=void 0)}return n}},4181:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6254);t._asyncOptionalChainDelete=async function(e){const t=await r._asyncOptionalChain(e);return null==t||t}},5151:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._nullishCoalesce=function(e,t){return null!=e?e:t()}},458:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._optionalChain=function(e){let t,n=e[0],r=1;for(;r<e.length;){const i=e[r],o=e[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(t=n,n=o(n)):"call"!==i&&"optionalCall"!==i||(n=o(((...e)=>n.call(t,...e))),t=void 0)}return n}},6705:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(458);t._optionalChainDelete=function(e){const t=r._optionalChain(e);return null==t||t}},1467:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeFifoCache=function(e){let t=[],n={};return{add(r,i){for(;t.length>=e;){const e=t.shift();void 0!==e&&delete n[e]}n[r]&&this.delete(r),t.push(r),n[r]=i},clear(){n={},t=[]},get:e=>n[e],size:()=>t.length,delete(e){if(!n[e])return!1;delete n[e];for(let n=0;n<t.length;n++)if(t[n]===e){t.splice(n,1);break}return!0}}}},8136:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5313),i=n(9812);t.createClientReportEnvelope=function(e,t,n){const o=[{type:"client_report"},{timestamp:n||i.dateTimestampInSeconds(),discarded_events:e}];return r.createEnvelope(t?{dsn:t}:{},[o])}},2443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseCookie=function(e){const t={};let n=0;for(;n<e.length;){const r=e.indexOf("=",n);if(-1===r)break;let i=e.indexOf(";",n);if(-1===i)i=e.length;else if(i<r){n=e.lastIndexOf(";",r-1)+1;continue}const o=e.slice(n,r).trim();if(void 0===t[o]){let n=e.slice(r+1,i).trim();34===n.charCodeAt(0)&&(n=n.slice(1,-1));try{t[o]=-1!==n.indexOf("%")?decodeURIComponent(n):n}catch(e){t[o]=n}}n=i+1}return t}},2643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;t.DEBUG_BUILD=n},1936:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2643),i=n(8709),o=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function s(e){const t=o.exec(e);if(!t)return void i.consoleSandbox((()=>{}));const[n,r,s="",c="",u="",l=""]=t.slice(1);let d="",p=l;const f=p.split("/");if(f.length>1&&(d=f.slice(0,-1).join("/"),p=f.pop()),p){const e=p.match(/^\d+/);e&&(p=e[0])}return a({host:c,pass:s,path:d,projectId:p,port:u,protocol:n,publicKey:r})}function a(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}t.dsnFromString=s,t.dsnToString=function(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r?`${r}/`:r}${s}`},t.makeDsn=function(e){const t="string"==typeof e?s(e):a(e);if(t&&function(e){if(!r.DEBUG_BUILD)return!0;const{port:t,projectId:n,protocol:o}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(i.logger.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(o)?t&&isNaN(parseInt(t,10))&&(i.logger.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(i.logger.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(i.logger.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}},5410:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSDKSource=function(){return"npm"},t.isBrowserBundle=function(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}},5313:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(1936),i=n(3614),o=n(9166),s=n(7566);function a(e,t){const n=e[1];for(const e of n){if(t(e,e[0].type))return!0}return!1}function c(e){return s.GLOBAL_OBJ.__SENTRY__&&s.GLOBAL_OBJ.__SENTRY__.encodePolyfill?s.GLOBAL_OBJ.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}const u={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};t.addItemToEnvelope=function(e,t){const[n,r]=e;return[n,[...r,t]]},t.createAttachmentEnvelopeItem=function(e){const t="string"==typeof e.data?c(e.data):e.data;return[o.dropUndefinedKeys({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]},t.createEnvelope=function(e,t=[]){return[e,t]},t.createEventEnvelopeHeaders=function(e,t,n,i){const s=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&i&&{dsn:r.dsnToString(i)},...s&&{trace:o.dropUndefinedKeys({...s})}}},t.createSpanEnvelopeItem=function(e){return[{type:"span"},e]},t.envelopeContainsItemType=function(e,t){return a(e,((e,n)=>t.includes(n)))},t.envelopeItemTypeToDataCategory=function(e){return u[e]},t.forEachEnvelopeItem=a,t.getSdkMetadataForEnvelopeHeader=function(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}},t.parseEnvelope=function(e){let t="string"==typeof e?c(e):e;function n(e){const n=t.subarray(0,e);return t=t.subarray(e+1),n}function r(){let e=t.indexOf(10);return e<0&&(e=t.length),JSON.parse((r=n(e),s.GLOBAL_OBJ.__SENTRY__&&s.GLOBAL_OBJ.__SENTRY__.decodePolyfill?s.GLOBAL_OBJ.__SENTRY__.decodePolyfill(r):(new TextDecoder).decode(r)));var r}const i=r(),o=[];for(;t.length;){const e=r(),t="number"==typeof e.length?e.length:void 0;o.push([e,t?n(t):r()])}return[i,o]},t.serializeEnvelope=function(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[c(r),e]:r.push("string"==typeof e?c(e):e)}for(const e of n){const[t,n]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof n||n instanceof Uint8Array)o(n);else{let e;try{e=JSON.stringify(n)}catch(t){e=JSON.stringify(i.normalize(n))}o(e)}}return"string"==typeof r?r:function(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(r)}},6471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}t.SentryError=n},6806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941),i=n(4953),o=n(3614),s=n(9166);function a(e,t){return e(t.stack||"",1)}function c(e,t){const n={type:t.name||t.constructor.name,value:t.message},r=a(e,t);return r.length&&(n.stacktrace={frames:r}),n}function u(e){if("name"in e&&"string"==typeof e.name){let t=`'${e.name}' captured as exception`;return"message"in e&&"string"==typeof e.message&&(t+=` with message '${e.message}'`),t}if("message"in e&&"string"==typeof e.message)return e.message;const t=s.extractExceptionKeysForMessage(e);if(r.isErrorEvent(e))return`Event \`ErrorEvent\` captured as exception with message \`${e.message}\``;const n=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e);return`${n&&"Object"!==n?`'${n}'`:"Object"} captured as exception with keys: ${t}`}function l(e,t,n,i){if(r.isError(n))return[n,void 0];if(t.synthetic=!0,r.isPlainObject(n)){const t=e&&e.getOptions().normalizeDepth,r={__serialized__:o.normalizeToSize(n,t)},s=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}(n);if(s)return[s,r];const a=u(n),c=i&&i.syntheticException||new Error(a);return c.message=a,[c,r]}const s=i&&i.syntheticException||new Error(n);return s.message=`${n}`,[s,void 0]}t.eventFromMessage=function(e,t,n="info",i,o){const s={event_id:i&&i.event_id,level:n};if(o&&i&&i.syntheticException){const n=a(e,i.syntheticException);n.length&&(s.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(r.isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return s.logentry={message:e,params:n},s}return s.message=t,s},t.eventFromUnknownInput=function(e,t,n,r){const o=r&&r.data&&r.data.mechanism||{handled:!0,type:"generic"},[s,a]=l(e,o,n,r),u={exception:{values:[c(t,s)]}};return a&&(u.extra=a),i.addExceptionTypeValue(u,void 0,void 0),i.addExceptionMechanism(u,o),{...u,event_id:r&&r.event_id}},t.exceptionFromError=c,t.parseStackFrames=a},9837:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5412),i=n(7604),o=n(3837),s=n(1936),a=n(6471),c=n(7566),u=n(6146),l=n(2855),d=n(2716),p=n(6518),f=n(5438),h=n(941),g=n(4297),m=n(8709),_=n(6491),v=n(4953),y=n(5909),S=n(3614),b=n(9166),E=n(1270),w=n(3982),T=n(3280),I=n(9322),x=n(6824),k=n(1104),C=n(4300),A=n(1293),F=n(2701),R=n(9812),O=n(5923),P=n(5410),M=n(5313),N=n(8136),D=n(1460),L=n(7115),U=n(1516),B=n(1467),j=n(6806),H=n(9570),W=n(1824),V=n(6531),q=n(6254),K=n(4181),$=n(5151),z=n(458),G=n(6705),J=n(4980),Y=n(8581),X=n(6522),Z=n(9060);t.applyAggregateErrorsToEvent=r.applyAggregateErrorsToEvent,t.flatten=i.flatten,t.getComponentName=o.getComponentName,t.getDomElement=o.getDomElement,t.getLocationHref=o.getLocationHref,t.htmlTreeAsString=o.htmlTreeAsString,t.dsnFromString=s.dsnFromString,t.dsnToString=s.dsnToString,t.makeDsn=s.makeDsn,t.SentryError=a.SentryError,t.GLOBAL_OBJ=c.GLOBAL_OBJ,t.getGlobalSingleton=c.getGlobalSingleton,t.addConsoleInstrumentationHandler=u.addConsoleInstrumentationHandler,t.addFetchInstrumentationHandler=l.addFetchInstrumentationHandler,t.addGlobalErrorInstrumentationHandler=d.addGlobalErrorInstrumentationHandler,t.addGlobalUnhandledRejectionInstrumentationHandler=p.addGlobalUnhandledRejectionInstrumentationHandler,t.addHandler=f.addHandler,t.maybeInstrument=f.maybeInstrument,t.resetInstrumentationHandlers=f.resetInstrumentationHandlers,t.triggerHandlers=f.triggerHandlers,t.isDOMError=h.isDOMError,t.isDOMException=h.isDOMException,t.isElement=h.isElement,t.isError=h.isError,t.isErrorEvent=h.isErrorEvent,t.isEvent=h.isEvent,t.isInstanceOf=h.isInstanceOf,t.isParameterizedString=h.isParameterizedString,t.isPlainObject=h.isPlainObject,t.isPrimitive=h.isPrimitive,t.isRegExp=h.isRegExp,t.isString=h.isString,t.isSyntheticEvent=h.isSyntheticEvent,t.isThenable=h.isThenable,t.isVueViewModel=h.isVueViewModel,t.isBrowser=g.isBrowser,t.CONSOLE_LEVELS=m.CONSOLE_LEVELS,t.consoleSandbox=m.consoleSandbox,t.logger=m.logger,t.originalConsoleMethods=m.originalConsoleMethods,t.memoBuilder=_.memoBuilder,t.addContextToFrame=v.addContextToFrame,t.addExceptionMechanism=v.addExceptionMechanism,t.addExceptionTypeValue=v.addExceptionTypeValue,t.arrayify=v.arrayify,t.checkOrSetAlreadyCaught=v.checkOrSetAlreadyCaught,t.getEventDescription=v.getEventDescription,t.parseSemver=v.parseSemver,t.uuid4=v.uuid4,t.dynamicRequire=y.dynamicRequire,t.isNodeEnv=y.isNodeEnv,t.loadModule=y.loadModule,t.normalize=S.normalize,t.normalizeToSize=S.normalizeToSize,t.normalizeUrlToBase=S.normalizeUrlToBase,t.addNonEnumerableProperty=b.addNonEnumerableProperty,t.convertToPlainObject=b.convertToPlainObject,t.dropUndefinedKeys=b.dropUndefinedKeys,t.extractExceptionKeysForMessage=b.extractExceptionKeysForMessage,t.fill=b.fill,t.getOriginalFunction=b.getOriginalFunction,t.markFunctionWrapped=b.markFunctionWrapped,t.objectify=b.objectify,t.urlEncode=b.urlEncode,t.basename=E.basename,t.dirname=E.dirname,t.isAbsolute=E.isAbsolute,t.join=E.join,t.normalizePath=E.normalizePath,t.relative=E.relative,t.resolve=E.resolve,t.makePromiseBuffer=w.makePromiseBuffer,t.DEFAULT_USER_INCLUDES=T.DEFAULT_USER_INCLUDES,t.addRequestDataToEvent=T.addRequestDataToEvent,t.extractPathForTransaction=T.extractPathForTransaction,t.extractRequestData=T.extractRequestData,t.winterCGHeadersToDict=T.winterCGHeadersToDict,t.winterCGRequestToRequestData=T.winterCGRequestToRequestData,t.severityLevelFromString=I.severityLevelFromString,t.validSeverityLevels=I.validSeverityLevels,t.UNKNOWN_FUNCTION=x.UNKNOWN_FUNCTION,t.createStackParser=x.createStackParser,t.getFramesFromEvent=x.getFramesFromEvent,t.getFunctionName=x.getFunctionName,t.stackParserFromStackParserOptions=x.stackParserFromStackParserOptions,t.stripSentryFramesAndReverse=x.stripSentryFramesAndReverse,t.filenameIsInApp=k.filenameIsInApp,t.node=k.node,t.nodeStackLineParser=k.nodeStackLineParser,t.isMatchingPattern=C.isMatchingPattern,t.safeJoin=C.safeJoin,t.snipLine=C.snipLine,t.stringMatchesSomePattern=C.stringMatchesSomePattern,t.truncate=C.truncate,t.isNativeFunction=A.isNativeFunction,t.supportsDOMError=A.supportsDOMError,t.supportsDOMException=A.supportsDOMException,t.supportsErrorEvent=A.supportsErrorEvent,t.supportsFetch=A.supportsFetch,t.supportsNativeFetch=A.supportsNativeFetch,t.supportsReferrerPolicy=A.supportsReferrerPolicy,t.supportsReportingObserver=A.supportsReportingObserver,t.SyncPromise=F.SyncPromise,t.rejectedSyncPromise=F.rejectedSyncPromise,t.resolvedSyncPromise=F.resolvedSyncPromise,Object.defineProperty(t,"_browserPerformanceTimeOriginMode",{enumerable:!0,get:()=>R._browserPerformanceTimeOriginMode}),t.browserPerformanceTimeOrigin=R.browserPerformanceTimeOrigin,t.dateTimestampInSeconds=R.dateTimestampInSeconds,t.timestampInSeconds=R.timestampInSeconds,t.TRACEPARENT_REGEXP=O.TRACEPARENT_REGEXP,t.extractTraceparentData=O.extractTraceparentData,t.generateSentryTraceHeader=O.generateSentryTraceHeader,t.propagationContextFromHeaders=O.propagationContextFromHeaders,t.getSDKSource=P.getSDKSource,t.isBrowserBundle=P.isBrowserBundle,t.addItemToEnvelope=M.addItemToEnvelope,t.createAttachmentEnvelopeItem=M.createAttachmentEnvelopeItem,t.createEnvelope=M.createEnvelope,t.createEventEnvelopeHeaders=M.createEventEnvelopeHeaders,t.createSpanEnvelopeItem=M.createSpanEnvelopeItem,t.envelopeContainsItemType=M.envelopeContainsItemType,t.envelopeItemTypeToDataCategory=M.envelopeItemTypeToDataCategory,t.forEachEnvelopeItem=M.forEachEnvelopeItem,t.getSdkMetadataForEnvelopeHeader=M.getSdkMetadataForEnvelopeHeader,t.parseEnvelope=M.parseEnvelope,t.serializeEnvelope=M.serializeEnvelope,t.createClientReportEnvelope=N.createClientReportEnvelope,t.DEFAULT_RETRY_AFTER=D.DEFAULT_RETRY_AFTER,t.disabledUntil=D.disabledUntil,t.isRateLimited=D.isRateLimited,t.parseRetryAfterHeader=D.parseRetryAfterHeader,t.updateRateLimits=D.updateRateLimits,t.BAGGAGE_HEADER_NAME=L.BAGGAGE_HEADER_NAME,t.MAX_BAGGAGE_STRING_LENGTH=L.MAX_BAGGAGE_STRING_LENGTH,t.SENTRY_BAGGAGE_KEY_PREFIX=L.SENTRY_BAGGAGE_KEY_PREFIX,t.SENTRY_BAGGAGE_KEY_PREFIX_REGEX=L.SENTRY_BAGGAGE_KEY_PREFIX_REGEX,t.baggageHeaderToDynamicSamplingContext=L.baggageHeaderToDynamicSamplingContext,t.dynamicSamplingContextToSentryBaggageHeader=L.dynamicSamplingContextToSentryBaggageHeader,t.parseBaggageHeader=L.parseBaggageHeader,t.getNumberOfUrlSegments=U.getNumberOfUrlSegments,t.getSanitizedUrlString=U.getSanitizedUrlString,t.parseUrl=U.parseUrl,t.stripUrlQueryAndFragment=U.stripUrlQueryAndFragment,t.makeFifoCache=B.makeFifoCache,t.eventFromMessage=j.eventFromMessage,t.eventFromUnknownInput=j.eventFromUnknownInput,t.exceptionFromError=j.exceptionFromError,t.parseStackFrames=j.parseStackFrames,t.callFrameToStackFrame=H.callFrameToStackFrame,t.watchdogTimer=H.watchdogTimer,t.LRUMap=W.LRUMap,t._asyncNullishCoalesce=V._asyncNullishCoalesce,t._asyncOptionalChain=q._asyncOptionalChain,t._asyncOptionalChainDelete=K._asyncOptionalChainDelete,t._nullishCoalesce=$._nullishCoalesce,t._optionalChain=z._optionalChain,t._optionalChainDelete=G._optionalChainDelete,t.generatePropagationContext=J.generatePropagationContext,t.SDK_VERSION=Y.SDK_VERSION,t.escapeStringForRegex=X.escapeStringForRegex,t.supportsHistory=Z.supportsHistory},6146:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8709),i=n(9166),o=n(7566),s=n(5438);function a(){"console"in o.GLOBAL_OBJ&&r.CONSOLE_LEVELS.forEach((function(e){e in o.GLOBAL_OBJ.console&&i.fill(o.GLOBAL_OBJ.console,e,(function(t){return r.originalConsoleMethods[e]=t,function(...t){const n={args:t,level:e};s.triggerHandlers("console",n);const i=r.originalConsoleMethods[e];i&&i.apply(o.GLOBAL_OBJ.console,t)}}))}))}t.addConsoleInstrumentationHandler=function(e){const t="console";s.addHandler(t,e),s.maybeInstrument(t,a)}},2855:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941),i=n(9166),o=n(1293),s=n(9812),a=n(7566),c=n(5438);function u(){o.supportsNativeFetch()&&i.fill(a.GLOBAL_OBJ,"fetch",(function(e){return function(...t){const{method:n,url:o}=p(t),u={args:t,fetchData:{method:n,url:o},startTimestamp:1e3*s.timestampInSeconds()};c.triggerHandlers("fetch",{...u});const l=(new Error).stack;return e.apply(a.GLOBAL_OBJ,t).then((e=>{const t={...u,endTimestamp:1e3*s.timestampInSeconds(),response:e};return c.triggerHandlers("fetch",t),e}),(e=>{const t={...u,endTimestamp:1e3*s.timestampInSeconds(),error:e};throw c.triggerHandlers("fetch",t),r.isError(e)&&void 0===e.stack&&(e.stack=l,i.addNonEnumerableProperty(e,"framesToPop",1)),e}))}}))}function l(e,t){return!!e&&"object"==typeof e&&!!e[t]}function d(e){return"string"==typeof e?e:e?l(e,"url")?e.url:e.toString?e.toString():"":""}function p(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:d(t),method:l(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:d(t),method:l(t,"method")?String(t.method).toUpperCase():"GET"}}t.addFetchInstrumentationHandler=function(e){const t="fetch";c.addHandler(t,e),c.maybeInstrument(t,u)},t.parseFetchArgs=p},2716:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7566),i=n(5438);let o=null;function s(){o=r.GLOBAL_OBJ.onerror,r.GLOBAL_OBJ.onerror=function(e,t,n,r,s){const a={column:r,error:s,line:n,msg:e,url:t};return i.triggerHandlers("error",a),!(!o||o.__SENTRY_LOADER__)&&o.apply(this,arguments)},r.GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}t.addGlobalErrorInstrumentationHandler=function(e){const t="error";i.addHandler(t,e),i.maybeInstrument(t,s)}},6518:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7566),i=n(5438);let o=null;function s(){o=r.GLOBAL_OBJ.onunhandledrejection,r.GLOBAL_OBJ.onunhandledrejection=function(e){const t=e;return i.triggerHandlers("unhandledrejection",t),!(o&&!o.__SENTRY_LOADER__)||o.apply(this,arguments)},r.GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}t.addGlobalUnhandledRejectionInstrumentationHandler=function(e){const t="unhandledrejection";i.addHandler(t,e),i.maybeInstrument(t,s)}},5438:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2643),i=n(8709),o=n(6824),s={},a={};t.addHandler=function(e,t){s[e]=s[e]||[],s[e].push(t)},t.maybeInstrument=function(e,t){a[e]||(t(),a[e]=!0)},t.resetInstrumentationHandlers=function(){Object.keys(s).forEach((e=>{s[e]=void 0}))},t.triggerHandlers=function(e,t){const n=e&&s[e];if(n)for(const s of n)try{s(t)}catch(t){r.DEBUG_BUILD&&i.logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${o.getFunctionName(s)}\nError:`,t)}}},941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=Object.prototype.toString;function r(e,t){return n.call(e)===`[object ${t}]`}function i(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function o(e){return r(e,"Object")}function s(e,t){try{return e instanceof t}catch(e){return!1}}t.isDOMError=function(e){return r(e,"DOMError")},t.isDOMException=function(e){return r(e,"DOMException")},t.isElement=function(e){return"undefined"!=typeof Element&&s(e,Element)},t.isError=function(e){switch(n.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return s(e,Error)}},t.isErrorEvent=function(e){return r(e,"ErrorEvent")},t.isEvent=function(e){return"undefined"!=typeof Event&&s(e,Event)},t.isInstanceOf=s,t.isParameterizedString=i,t.isPlainObject=o,t.isPrimitive=function(e){return null===e||i(e)||"object"!=typeof e&&"function"!=typeof e},t.isRegExp=function(e){return r(e,"RegExp")},t.isString=function(e){return r(e,"String")},t.isSyntheticEvent=function(e){return o(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e},t.isThenable=function(e){return Boolean(e&&e.then&&"function"==typeof e.then)},t.isVueViewModel=function(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}},4297:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(5909),i=n(7566);t.isBrowser=function(){return"undefined"!=typeof window&&(!r.isNodeEnv()||void 0!==i.GLOBAL_OBJ.process&&"renderer"===i.GLOBAL_OBJ.process.type)}},8709:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2643),i=n(7566),o=["debug","info","warn","error","log","assert","trace"],s={};function a(e){if(!("console"in i.GLOBAL_OBJ))return e();const t=i.GLOBAL_OBJ.console,n={},r=Object.keys(s);r.forEach((e=>{const r=s[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}const c=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return r.DEBUG_BUILD?o.forEach((n=>{t[n]=(...t)=>{e&&a((()=>{i.GLOBAL_OBJ.console[n](`Sentry Logger [${n}]:`,...t)}))}})):o.forEach((e=>{t[e]=()=>{}})),t}();t.CONSOLE_LEVELS=o,t.consoleSandbox=a,t.logger=c,t.originalConsoleMethods=s},1824:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.LRUMap=class{constructor(e){this._maxSize=e,this._cache=new Map}get size(){return this._cache.size}get(e){const t=this._cache.get(e);if(void 0!==t)return this._cache.delete(e),this._cache.set(e,t),t}set(e,t){this._cache.size>=this._maxSize&&this._cache.delete(this._cache.keys().next().value),this._cache.set(e,t)}remove(e){const t=this._cache.get(e);return t&&this._cache.delete(e),t}clear(){this._cache.clear()}keys(){return Array.from(this._cache.keys())}values(){const e=[];return this._cache.forEach((t=>e.push(t))),e}}},6491:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.memoBuilder=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++){if(t[e]===n)return!0}return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}},4953:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(9166),i=n(4300),o=n(7566);function s(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}const a=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function c(e){return parseInt(e||"",10)}t.addContextToFrame=function(e,t,n=5){if(void 0===t.lineno)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((e=>i.snipLine(e,0)));const s=Math.min(r-1,o);t.context_line=i.snipLine(e[s],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map((e=>i.snipLine(e,0)))},t.addExceptionMechanism=function(e,t){const n=s(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}},t.addExceptionTypeValue=function(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=n||"Error")},t.arrayify=function(e){return Array.isArray(e)?e:[e]},t.checkOrSetAlreadyCaught=function(e){if(e&&e.__sentry_captured__)return!0;try{r.addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(e){}return!1},t.getEventDescription=function(e){const{message:t,event_id:n}=e;if(t)return t;const r=s(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"},t.parseSemver=function(e){const t=e.match(a)||[],n=c(t[1]),r=c(t[2]),i=c(t[3]);return{buildmetadata:t[5],major:isNaN(n)?void 0:n,minor:isNaN(r)?void 0:r,patch:isNaN(i)?void 0:i,prerelease:t[4]}},t.uuid4=function(){const e=o.GLOBAL_OBJ,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}},1104:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6824);function i(e,t=!1){return!(t||e&&!e.startsWith("/")&&!e.match(/^[A-Z]:/)&&!e.startsWith(".")&&!e.match(/^[a-zA-Z]([a-zA-Z0-9.\-+])*:\/\//))&&void 0!==e&&!e.includes("node_modules/")}function o(e){const t=/^\s*[-]{4,}$/,n=/at (?:async )?(?:(.+?)\s+\()?(?:(.+):(\d+):(\d+)?|([^)]+))\)?/;return o=>{const a=o.match(n);if(a){let t,n,o,c,u;if(a[1]){o=a[1];let e=o.lastIndexOf(".");if("."===o[e-1]&&e--,e>0){t=o.slice(0,e),n=o.slice(e+1);const r=t.indexOf(".Module");r>0&&(o=o.slice(r+1),t=t.slice(0,r))}c=void 0}n&&(c=t,u=n),"<anonymous>"===n&&(u=void 0,o=void 0),void 0===o&&(u=u||r.UNKNOWN_FUNCTION,o=c?`${c}.${u}`:u);let l=a[2]&&a[2].startsWith("file://")?a[2].slice(7):a[2];const d="native"===a[5];return l&&l.match(/\/[A-Z]:/)&&(l=l.slice(1)),l||!a[5]||d||(l=a[5]),{filename:l,module:e?e(l):void 0,function:o,lineno:s(a[3]),colno:s(a[4]),in_app:i(l||"",d)}}if(o.match(t))return{filename:o}}}function s(e){return parseInt(e||"",10)||void 0}t.filenameIsInApp=i,t.node=o,t.nodeStackLineParser=function(e){return[90,o(e)]}},5909:(e,t,n)=>{e=n.nmd(e),Object.defineProperty(t,"__esModule",{value:!0});const r=n(5410);function i(e,t){return e.require(t)}t.dynamicRequire=i,t.isNodeEnv=function(){return!r.isBrowserBundle()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},t.loadModule=function(t){let n;try{n=i(e,t)}catch(e){}try{const{cwd:r}=i(e,"process");n=i(e,`${r()}/node_modules/${t}`)}catch(e){}return n}},3614:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941),i=n(6491),o=n(9166),s=n(6824);function a(e,t=100,n=1/0){try{return c("",e,t,n)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function c(e,t,a=1/0,u=1/0,l=i.memoBuilder()){const[d,p]=l;if(null==t||["number","boolean","string"].includes(typeof t)&&!Number.isNaN(t))return t;const f=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==n.g&&t===n.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(r.isVueViewModel(t))return"[VueViewModel]";if(r.isSyntheticEvent(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${s.getFunctionName(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const i=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(i)?`[HTMLElement: ${i}]`:`[object ${i}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!f.startsWith("[object "))return f;if(t.__sentry_skip_normalization__)return t;const h="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:a;if(0===h)return f.replace("object ","");if(d(t))return"[Circular ~]";const g=t;if(g&&"function"==typeof g.toJSON)try{return c("",g.toJSON(),h-1,u,l)}catch(e){}const m=Array.isArray(t)?[]:{};let _=0;const v=o.convertToPlainObject(t);for(const e in v){if(!Object.prototype.hasOwnProperty.call(v,e))continue;if(_>=u){m[e]="[MaxProperties ~]";break}const t=v[e];m[e]=c(e,t,h-1,u,l),_++}return p(t),m}t.normalize=a,t.normalizeToSize=function e(t,n=3,r=102400){const i=a(t,n);return o=i,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>r?e(t,n-1,r):i;var o},t.normalizeUrlToBase=function(e,t){const n=t.replace(/\\/g,"/").replace(/[|\\{}()[\]^$+*?.]/g,"\\$&");let r=e;try{r=decodeURI(e)}catch(e){}return r.replace(/\\/g,"/").replace(/webpack:\/?/g,"").replace(new RegExp(`(file://)?/*${n}/*`,"ig"),"app:///")}},9166:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(3837),i=n(2643),o=n(941),s=n(8709),a=n(4300);function c(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(n){i.DEBUG_BUILD&&s.logger.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function u(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,c(e,"__sentry_original__",t)}catch(e){}}function l(e){if(o.isError(e))return{message:e.message,name:e.name,stack:e.stack,...p(e)};if(o.isEvent(e)){const t={type:e.type,target:d(e.target),currentTarget:d(e.currentTarget),...p(e)};return"undefined"!=typeof CustomEvent&&o.isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}return e}function d(e){try{return o.isElement(e)?r.htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function p(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function f(e,t){if(function(e){if(!o.isPlainObject(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const n of Object.keys(e))void 0!==e[n]&&(r[n]=f(e[n],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(f(e,t))})),r}return e}t.addNonEnumerableProperty=c,t.convertToPlainObject=l,t.dropUndefinedKeys=function(e){return f(e,new Map)},t.extractExceptionKeysForMessage=function(e,t=40){const n=Object.keys(l(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return a.truncate(r,t);for(let e=n.length;e>0;e--){const r=n.slice(0,e).join(", ");if(!(r.length>t))return e===n.length?r:a.truncate(r,t)}return""},t.fill=function(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);"function"==typeof i&&u(i,r),e[t]=i},t.getOriginalFunction=function(e){return e.__sentry_original__},t.markFunctionWrapped=u,t.objectify=function(e){let t;switch(!0){case null==e:t=new String(e);break;case"symbol"==typeof e||"bigint"==typeof e:t=Object(e);break;case o.isPrimitive(e):t=new e.constructor(e);break;default:t=e}return t},t.urlEncode=function(e){return Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}},1270:(e,t)=>{function n(e,t){let n=0;for(let t=e.length-1;t>=0;t--){const r=e[t];"."===r?e.splice(t,1):".."===r?(e.splice(t,1),n++):n&&(e.splice(t,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}Object.defineProperty(t,"__esModule",{value:!0});const r=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function i(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=r.exec(t);return n?n.slice(1):[]}function o(...e){let t="",r=!1;for(let n=e.length-1;n>=-1&&!r;n--){const i=n>=0?e[n]:"/";i&&(t=`${i}/${t}`,r="/"===i.charAt(0))}return t=n(t.split("/").filter((e=>!!e)),!r).join("/"),(r?"/":"")+t||"."}function s(e){let t=0;for(;t<e.length&&""===e[t];t++);let n=e.length-1;for(;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}function a(e){const t=c(e),r="/"===e.slice(-1);let i=n(e.split("/").filter((e=>!!e)),!t).join("/");return i||t||(i="."),i&&r&&(i+="/"),(t?"/":"")+i}function c(e){return"/"===e.charAt(0)}t.basename=function(e,t){let n=i(e)[2]||"";return t&&n.slice(-1*t.length)===t&&(n=n.slice(0,n.length-t.length)),n},t.dirname=function(e){const t=i(e),n=t[0]||"";let r=t[1];return n||r?(r&&(r=r.slice(0,r.length-1)),n+r):"."},t.isAbsolute=c,t.join=function(...e){return a(e.join("/"))},t.normalizePath=a,t.relative=function(e,t){e=o(e).slice(1),t=o(t).slice(1);const n=s(e.split("/")),r=s(t.split("/")),i=Math.min(n.length,r.length);let a=i;for(let e=0;e<i;e++)if(n[e]!==r[e]){a=e;break}let c=[];for(let e=a;e<n.length;e++)c.push("..");return c=c.concat(r.slice(a)),c.join("/")},t.resolve=o},3982:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(6471),i=n(2701);t.makePromiseBuffer=function(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(o){if(!(void 0===e||t.length<e))return i.rejectedSyncPromise(new r.SentryError("Not adding Promise because buffer limit was reached."));const s=o();return-1===t.indexOf(s)&&t.push(s),s.then((()=>n(s))).then(null,(()=>n(s).then(null,(()=>{})))),s},drain:function(e){return new i.SyncPromise(((n,r)=>{let o=t.length;if(!o)return n(!0);const s=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{i.resolvedSyncPromise(e).then((()=>{--o||(clearTimeout(s),n(!0))}),r)}))}))}}}},4980:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(4953);t.generatePropagationContext=function(){return{traceId:r.uuid4(),spanId:r.uuid4().substring(16)}}},1460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=6e4;function r(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const i=Date.parse(`${e}`);return isNaN(i)?n:i-t}function i(e,t){return e[t]||e.all||0}t.DEFAULT_RETRY_AFTER=n,t.disabledUntil=i,t.isRateLimited=function(e,t,n=Date.now()){return i(e,t)>n},t.parseRetryAfterHeader=r,t.updateRateLimits=function(e,{statusCode:t,headers:n},i=Date.now()){const o={...e},s=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(s)for(const e of s.trim().split(",")){const[t,n,,,r]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(n)for(const e of n.split(";"))"metric_bucket"===e&&r&&!r.split(";").includes("custom")||(o[e]=i+a);else o.all=i+a}else a?o.all=i+r(a,i):429===t&&(o.all=i+6e4);return o}},3280:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2443),i=n(2643),o=n(941),s=n(8709),a=n(3614),c=n(1516),u={ip:!1,request:!0,transaction:!0,user:!0},l=["cookies","data","headers","method","query_string","url"],d=["id","username","email"];function p(e,t={}){const n=e.method&&e.method.toUpperCase();let r="",i="url";t.customRoute||e.route?(r=t.customRoute||`${e.baseUrl||""}${e.route&&e.route.path}`,i="route"):(e.originalUrl||e.url)&&(r=c.stripUrlQueryAndFragment(e.originalUrl||e.url||""));let o="";return t.method&&n&&(o+=n),t.method&&t.path&&(o+=" "),t.path&&r&&(o+=r),[o,i]}function f(e,t){const{include:n=l}=t||{},i={},s=e.headers||{},c=e.method,u=s.host||e.hostname||e.host||"<no host>",d="https"===e.protocol||e.socket&&e.socket.encrypted?"https":"http",p=e.originalUrl||e.url||"",f=p.startsWith(d)?p:`${d}://${u}${p}`;return n.forEach((t=>{switch(t){case"headers":i.headers=s,n.includes("cookies")||delete i.headers.cookie;break;case"method":i.method=c;break;case"url":i.url=f;break;case"cookies":i.cookies=e.cookies||s.cookie&&r.parseCookie(s.cookie)||{};break;case"query_string":i.query_string=function(e){let t=e.originalUrl||e.url||"";if(!t)return;t.startsWith("/")&&(t=`http://dogs.are.great${t}`);try{const n=e.query||new URL(t).search.slice(1);return n.length?n:void 0}catch(e){return}}(e);break;case"data":if("GET"===c||"HEAD"===c)break;void 0!==e.body&&(i.data=o.isString(e.body)?e.body:JSON.stringify(a.normalize(e.body)));break;default:({}).hasOwnProperty.call(e,t)&&(i[t]=e[t])}})),i}function h(e){const t={};try{e.forEach(((e,n)=>{"string"==typeof e&&(t[n]=e)}))}catch(e){i.DEBUG_BUILD&&s.logger.warn("Sentry failed extracting headers from a request object. If you see this, please file an issue.")}return t}t.DEFAULT_USER_INCLUDES=d,t.addRequestDataToEvent=function(e,t,n){const r={...u,...n&&n.include};if(r.request){const n=Array.isArray(r.request)?f(t,{include:r.request}):f(t);e.request={...e.request,...n}}if(r.user){const n=t.user&&o.isPlainObject(t.user)?function(e,t){const n={};return(Array.isArray(t)?t:d).forEach((t=>{e&&t in e&&(n[t]=e[t])})),n}(t.user,r.user):{};Object.keys(n).length&&(e.user={...e.user,...n})}if(r.ip){const n=t.ip||t.socket&&t.socket.remoteAddress;n&&(e.user={...e.user,ip_address:n})}return r.transaction&&!e.transaction&&"transaction"===e.type&&(e.transaction=function(e,t){switch(t){case"path":return p(e,{path:!0})[0];case"handler":return e.route&&e.route.stack&&e.route.stack[0]&&e.route.stack[0].name||"<anonymous>";default:return p(e,{path:!0,method:!0,customRoute:e._reconstructedRoute?e._reconstructedRoute:void 0})[0]}}(t,r.transaction)),e},t.extractPathForTransaction=p,t.extractRequestData=f,t.winterCGHeadersToDict=h,t.winterCGRequestToRequestData=function(e){const t=h(e.headers);return{method:e.method,url:e.url,headers:t}}},9322:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=["fatal","error","warning","log","info","debug"];t.severityLevelFromString=function(e){return"warn"===e?"warning":n.includes(e)?e:"log"},t.validSeverityLevels=n},6824:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=50,r="?",i=/\(error: (.*)\)/,o=/captureMessage|captureException/;function s(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0,o=0)=>{const s=[],c=e.split("\n");for(let e=r;e<c.length;e++){const r=c[e];if(r.length>1024)continue;const a=i.test(r)?r.replace(i,"$1"):r;if(!a.match(/\S*Error: /)){for(const e of t){const t=e(a);if(t){s.push(t);break}}if(s.length>=n+o)break}}return a(s.slice(o))}}function a(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(c(t).function||"")&&t.pop(),t.reverse(),o.test(c(t).function||"")&&(t.pop(),o.test(c(t).function||"")&&t.pop()),t.slice(0,n).map((e=>({...e,filename:e.filename||c(t).filename,function:e.function||r})))}function c(e){return e[e.length-1]||{}}const u="<anonymous>";t.UNKNOWN_FUNCTION=r,t.createStackParser=s,t.getFramesFromEvent=function(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(e){return}}},t.getFunctionName=function(e){try{return e&&"function"==typeof e&&e.name||u}catch(e){return u}},t.stackParserFromStackParserOptions=function(e){return Array.isArray(e)?s(...e):e},t.stripSentryFramesAndReverse=a},4300:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941);function i(e,t,n=!1){return!!r.isString(e)&&(r.isRegExp(t)?t.test(e):!!r.isString(t)&&(n?e===t:e.includes(t)))}t.isMatchingPattern=i,t.safeJoin=function(e,t){if(!Array.isArray(e))return"";const n=[];for(let t=0;t<e.length;t++){const i=e[t];try{r.isVueViewModel(i)?n.push("[VueViewModel]"):n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)},t.snipLine=function(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let i=Math.max(t-60,0);i<5&&(i=0);let o=Math.min(i+140,r);return o>r-5&&(o=r),o===r&&(i=Math.max(o-140,0)),n=n.slice(i,o),i>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n},t.stringMatchesSomePattern=function(e,t=[],n=!1){return t.some((t=>i(e,t,n)))},t.truncate=function(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}},1293:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(2643),i=n(8709),o=n(7566).GLOBAL_OBJ;function s(){if(!("fetch"in o))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function a(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}t.isNativeFunction=a,t.supportsDOMError=function(){try{return new DOMError(""),!0}catch(e){return!1}},t.supportsDOMException=function(){try{return new DOMException(""),!0}catch(e){return!1}},t.supportsErrorEvent=function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},t.supportsFetch=s,t.supportsNativeFetch=function(){if("string"==typeof EdgeRuntime)return!0;if(!s())return!1;if(a(o.fetch))return!0;let e=!1;const t=o.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=a(n.contentWindow.fetch)),t.head.removeChild(n)}catch(e){r.DEBUG_BUILD&&i.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e},t.supportsReferrerPolicy=function(){if(!s())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}},t.supportsReportingObserver=function(){return"ReportingObserver"in o}},2701:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(941);var i;!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(i||(i={}));class o{constructor(e){o.prototype.__init.call(this),o.prototype.__init2.call(this),o.prototype.__init3.call(this),o.prototype.__init4.call(this),this._state=i.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new o(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(e){r(e)}else n(t)},e=>{if(t)try{n(t(e))}catch(e){r(e)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new o(((t,n)=>{let r,i;return this.then((t=>{i=!1,r=t,e&&e()}),(t=>{i=!0,r=t,e&&e()})).then((()=>{i?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(i.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(i.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===i.PENDING&&(r.isThenable(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===i.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===i.RESOLVED&&e[1](this._value),this._state===i.REJECTED&&e[2](this._value),e[0]=!0)}))}}}t.SyncPromise=o,t.rejectedSyncPromise=function(e){return new o(((t,n)=>{n(e)}))},t.resolvedSyncPromise=function(e){return new o((t=>{t(e)}))}},9812:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7566),i=1e3;function o(){return Date.now()/i}const s=function(){const{performance:e}=r.GLOBAL_OBJ;if(!e||!e.now)return o;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/i}();t._browserPerformanceTimeOriginMode=void 0;const a=(()=>{const{performance:e}=r.GLOBAL_OBJ;if(!e||!e.now)return void(t._browserPerformanceTimeOriginMode="none");const n=36e5,i=e.now(),o=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+i-o):n,a=s<n,c=e.timing&&e.timing.navigationStart,u="number"==typeof c?Math.abs(c+i-o):n;return a||u<n?s<=u?(t._browserPerformanceTimeOriginMode="timeOrigin",e.timeOrigin):(t._browserPerformanceTimeOriginMode="navigationStart",c):(t._browserPerformanceTimeOriginMode="dateNow",o)})();t.browserPerformanceTimeOrigin=a,t.dateTimestampInSeconds=o,t.timestampInSeconds=s},5923:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7115),i=n(4953),o=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function s(e){if(!e)return;const t=e.match(o);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}t.TRACEPARENT_REGEXP=o,t.extractTraceparentData=s,t.generateSentryTraceHeader=function(e=i.uuid4(),t=i.uuid4().substring(16),n){let r="";return void 0!==n&&(r=n?"-1":"-0"),`${e}-${t}${r}`},t.propagationContextFromHeaders=function(e,t){const n=s(e),o=r.baggageHeaderToDynamicSamplingContext(t),{traceId:a,parentSpanId:c,parentSampled:u}=n||{};return n?{traceId:a||i.uuid4(),parentSpanId:c||i.uuid4().substring(16),spanId:i.uuid4().substring(16),sampled:u,dsc:o||{}}:{traceId:a||i.uuid4(),spanId:i.uuid4().substring(16)}}},1516:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberOfUrlSegments=function(e){return e.split(/\\?\//).filter((e=>e.length>0&&","!==e)).length},t.getSanitizedUrlString=function(e){const{protocol:t,host:n,path:r}=e;return`${t?`${t}://`:""}${n&&n.replace(/^.*@/,"[filtered]:[filtered]@").replace(/(:80)$/,"").replace(/(:443)$/,"")||""}${r}`},t.parseUrl=function(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}},t.stripUrlQueryAndFragment=function(e){return e.split(/[?#]/,1)[0]}},6522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.escapeStringForRegex=function(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},9060:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(7566).GLOBAL_OBJ;t.supportsHistory=function(){const e=r.chrome,t=e&&e.app&&e.app.runtime,n="history"in r&&!!r.history.pushState&&!!r.history.replaceState;return!t&&n}},8581:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.SDK_VERSION="8.16.0"},7566:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(8581),i=globalThis;t.GLOBAL_OBJ=i,t.getGlobalSingleton=function(e,t,n){const o=n||i,s=o.__SENTRY__=o.__SENTRY__||{},a=s[r.SDK_VERSION]=s[r.SDK_VERSION]||{};return a[e]||(a[e]=t())}},5250:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,u=32,l=64,d=128,p=256,f=1/0,h=9007199254740991,g=NaN,m=4294967295,_=[["ary",d],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",u],["partialRight",l],["rearg",p]],v="[object Arguments]",y="[object Array]",S="[object Boolean]",b="[object Date]",E="[object Error]",w="[object Function]",T="[object GeneratorFunction]",I="[object Map]",x="[object Number]",k="[object Object]",C="[object Promise]",A="[object RegExp]",F="[object Set]",R="[object String]",O="[object Symbol]",P="[object WeakMap]",M="[object ArrayBuffer]",N="[object DataView]",D="[object Float32Array]",L="[object Float64Array]",U="[object Int8Array]",B="[object Int16Array]",j="[object Int32Array]",H="[object Uint8Array]",W="[object Uint8ClampedArray]",V="[object Uint16Array]",q="[object Uint32Array]",K=/\b__p \+= '';/g,$=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,Y=RegExp(G.source),X=RegExp(J.source),Z=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,de=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pe=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,ve=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,Se=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,we=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",Ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",Fe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Re="[']",Oe="["+Te+"]",Pe="["+Fe+"]",Me="["+Ie+"]",Ne="\\d+",De="["+xe+"]",Le="["+ke+"]",Ue="[^"+Te+Fe+Ne+xe+ke+Ce+"]",Be="\\ud83c[\\udffb-\\udfff]",je="[^"+Te+"]",He="(?:\\ud83c[\\udde6-\\uddff]){2}",We="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ce+"]",qe="\\u200d",Ke="(?:"+Le+"|"+Ue+")",$e="(?:"+Ve+"|"+Ue+")",ze="(?:['](?:d|ll|m|re|s|t|ve))?",Ge="(?:['](?:D|LL|M|RE|S|T|VE))?",Je="(?:"+Me+"|"+Be+")"+"?",Ye="["+Ae+"]?",Xe=Ye+Je+("(?:"+qe+"(?:"+[je,He,We].join("|")+")"+Ye+Je+")*"),Ze="(?:"+[De,He,We].join("|")+")"+Xe,Qe="(?:"+[je+Me+"?",Me,He,We,Oe].join("|")+")",et=RegExp(Re,"g"),tt=RegExp(Me,"g"),nt=RegExp(Be+"(?="+Be+")|"+Qe+Xe,"g"),rt=RegExp([Ve+"?"+Le+"+"+ze+"(?="+[Pe,Ve,"$"].join("|")+")",$e+"+"+Ge+"(?="+[Pe,Ve+Ke,"$"].join("|")+")",Ve+"?"+Ke+"+"+ze,Ve+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Ze].join("|"),"g"),it=RegExp("["+qe+Te+Ie+Ae+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,st=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,ct={};ct[D]=ct[L]=ct[U]=ct[B]=ct[j]=ct[H]=ct[W]=ct[V]=ct[q]=!0,ct[v]=ct[y]=ct[M]=ct[S]=ct[N]=ct[b]=ct[E]=ct[w]=ct[I]=ct[x]=ct[k]=ct[A]=ct[F]=ct[R]=ct[P]=!1;var ut={};ut[v]=ut[y]=ut[M]=ut[N]=ut[S]=ut[b]=ut[D]=ut[L]=ut[U]=ut[B]=ut[j]=ut[I]=ut[x]=ut[k]=ut[A]=ut[F]=ut[R]=ut[O]=ut[H]=ut[W]=ut[V]=ut[q]=!0,ut[E]=ut[w]=ut[P]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},dt=parseFloat,pt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||ht||Function("return this")(),mt=t&&!t.nodeType&&t,_t=mt&&e&&!e.nodeType&&e,vt=_t&&_t.exports===mt,yt=vt&&ft.process,St=function(){try{var e=_t&&_t.require&&_t.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(e){}}(),bt=St&&St.isArrayBuffer,Et=St&&St.isDate,wt=St&&St.isMap,Tt=St&&St.isRegExp,It=St&&St.isSet,xt=St&&St.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ct(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ft(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Pt(e,t){return!!(null==e?0:e.length)&&Vt(e,t,0)>-1}function Mt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Lt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Ut(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jt=zt("length");function Ht(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Wt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Vt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Wt(e,Kt,n)}function qt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Kt(e){return e!=e}function $t(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:g}function zt(e){return function(t){return null==t?i:t[e]}}function Gt(e){return function(t){return null==e?i:e[t]}}function Jt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Yt(e,t){for(var n,r=-1,o=e.length;++r<o;){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,mn(e)+1).replace(se,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return Nt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}var on=Gt({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),sn=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+lt[e]}function cn(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[i++]=n)}return o}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function hn(e){return cn(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):jt(e)}function gn(e){return cn(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var _n=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var n,r=(t=null==t?gt:vn.defaults(gt.Object(),t,vn.pick(gt,st))).Array,ae=t.Date,Te=t.Error,Ie=t.Function,xe=t.Math,ke=t.Object,Ce=t.RegExp,Ae=t.String,Fe=t.TypeError,Re=r.prototype,Oe=Ie.prototype,Pe=ke.prototype,Me=t["__core-js_shared__"],Ne=Oe.toString,De=Pe.hasOwnProperty,Le=0,Ue=(n=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Pe.toString,je=Ne.call(ke),He=gt._,We=Ce("^"+Ne.call(De).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=vt?t.Buffer:i,qe=t.Symbol,Ke=t.Uint8Array,$e=Ve?Ve.allocUnsafe:i,ze=ln(ke.getPrototypeOf,ke),Ge=ke.create,Je=Pe.propertyIsEnumerable,Ye=Re.splice,Xe=qe?qe.isConcatSpreadable:i,Ze=qe?qe.iterator:i,Qe=qe?qe.toStringTag:i,nt=function(){try{var e=fo(ke,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,lt=ae&&ae.now!==gt.Date.now&&ae.now,ft=t.setTimeout!==gt.setTimeout&&t.setTimeout,ht=xe.ceil,mt=xe.floor,_t=ke.getOwnPropertySymbols,yt=Ve?Ve.isBuffer:i,St=t.isFinite,jt=Re.join,Gt=ln(ke.keys,ke),yn=xe.max,Sn=xe.min,bn=ae.now,En=t.parseInt,wn=xe.random,Tn=Re.reverse,In=fo(t,"DataView"),xn=fo(t,"Map"),kn=fo(t,"Promise"),Cn=fo(t,"Set"),An=fo(t,"WeakMap"),Fn=fo(ke,"create"),Rn=An&&new An,On={},Pn=Bo(In),Mn=Bo(xn),Nn=Bo(kn),Dn=Bo(Cn),Ln=Bo(An),Un=qe?qe.prototype:i,Bn=Un?Un.valueOf:i,jn=Un?Un.toString:i;function Hn(e){if(na(e)&&!Ks(e)&&!(e instanceof Kn)){if(e instanceof qn)return e;if(De.call(e,"__wrapped__"))return jo(e)}return new qn(e)}var Wn=function(){function e(){}return function(t){if(!ta(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function qn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new zn(e);this.size=t.size}function Xn(e,t){var n=Ks(e),r=!n&&qs(e),i=!n&&!r&&Js(e),o=!n&&!r&&!i&&la(e),s=n||r||i||o,a=s?Xt(e.length,Ae):[],c=a.length;for(var u in e)!t&&!De.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||So(u,c))||a.push(u);return a}function Zn(e){var t=e.length;return t?e[Jr(0,t-1)]:i}function Qn(e,t){return Do(Fi(e),cr(t,0,e.length))}function er(e){return Do(Fi(e))}function tr(e,t,n){(n!==i&&!Hs(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function nr(e,t,n){var r=e[t];De.call(e,t)&&Hs(r,n)&&(n!==i||t in e)||sr(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Hs(e[n][0],t))return n;return-1}function ir(e,t,n,r){return fr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ri(t,Oa(t),e)}function sr(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ar(e,t){for(var n=-1,o=t.length,s=r(o),a=null==e;++n<o;)s[n]=a?i:ka(e,t[n]);return s}function cr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,o,s){var a,c=1&t,u=2&t,l=4&t;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!ta(e))return e;var d=Ks(e);if(d){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Fi(e,a)}else{var p=mo(e),f=p==w||p==T;if(Js(e))return Ti(e,c);if(p==k||p==v||f&&!o){if(a=u||f?{}:vo(e),!c)return u?function(e,t){return Ri(e,go(e),t)}(e,function(e,t){return e&&Ri(t,Pa(t),e)}(a,e)):function(e,t){return Ri(e,ho(e),t)}(e,or(a,e))}else{if(!ut[p])return o?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case M:return Ii(e);case S:case b:return new r(+e);case N:return function(e,t){var n=t?Ii(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case L:case U:case B:case j:case H:case W:case V:case q:return xi(e,n);case I:return new r;case x:case R:return new r(e);case A:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case F:return new r;case O:return i=e,Bn?ke(Bn.call(i)):{}}var i}(e,p,c)}}s||(s=new Yn);var h=s.get(e);if(h)return h;s.set(e,a),aa(e)?e.forEach((function(r){a.add(ur(r,t,n,r,e,s))})):ra(e)&&e.forEach((function(r,i){a.set(i,ur(r,t,n,i,e,s))}));var g=d?i:(l?u?oo:io:u?Pa:Oa)(e);return At(g||e,(function(r,i){g&&(r=e[i=r]),nr(a,i,ur(r,t,n,i,e,s))})),a}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=ke(e);r--;){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Fe(o);return Oo((function(){e.apply(i,n)}),t)}function pr(e,t,n,r){var i=-1,o=Pt,s=!0,a=e.length,c=[],u=t.length;if(!a)return c;n&&(t=Nt(t,Qt(n))),r?(o=Mt,s=!1):t.length>=200&&(o=tn,s=!1,t=new Jn(t));e:for(;++i<a;){var l=e[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,s&&d==d){for(var p=u;p--;)if(t[p]===d)continue e;c.push(l)}else o(t,d,r)||c.push(l)}return c}Hn.templateSettings={escape:Z,evaluate:Q,interpolate:ee,variable:"",imports:{_:Hn}},Hn.prototype=Vn.prototype,Hn.prototype.constructor=Hn,qn.prototype=Wn(Vn.prototype),qn.prototype.constructor=qn,Kn.prototype=Wn(Vn.prototype),Kn.prototype.constructor=Kn,$n.prototype.clear=function(){this.__data__=Fn?Fn(null):{},this.size=0},$n.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$n.prototype.get=function(e){var t=this.__data__;if(Fn){var n=t[e];return n===s?i:n}return De.call(t,e)?t[e]:i},$n.prototype.has=function(e){var t=this.__data__;return Fn?t[e]!==i:De.call(t,e)},$n.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fn&&t===i?s:t,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},zn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},zn.prototype.has=function(e){return rr(this.__data__,e)>-1},zn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new $n,map:new(xn||zn),string:new $n}},Gn.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return lo(this,e).get(e)},Gn.prototype.has=function(e){return lo(this,e).has(e)},Gn.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,s),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new zn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof zn){var r=n.__data__;if(!xn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var fr=Mi(br),hr=Mi(Er,!0);function gr(e,t){var n=!0;return fr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var s=e[r],a=t(s);if(null!=a&&(c===i?a==a&&!ua(a):n(a,c)))var c=a,u=s}return u}function _r(e,t){var n=[];return fr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=yo),i||(i=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?vr(a,t-1,n,r,i):Dt(i,a):r||(i[i.length]=a)}return i}var yr=Ni(),Sr=Ni(!0);function br(e,t){return e&&yr(e,t,Oa)}function Er(e,t){return e&&Sr(e,t,Oa)}function wr(e,t){return Ot(t,(function(t){return Zs(e[t])}))}function Tr(e,t){for(var n=0,r=(t=Si(t,e)).length;null!=e&&n<r;)e=e[Uo(t[n++])];return n&&n==r?e:i}function Ir(e,t,n){var r=t(e);return Ks(e)?r:Dt(r,n(e))}function xr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Qe&&Qe in ke(e)?function(e){var t=De.call(e,Qe),n=e[Qe];try{e[Qe]=i;var r=!0}catch(e){}var o=Be.call(e);r&&(t?e[Qe]=n:delete e[Qe]);return o}(e):function(e){return Be.call(e)}(e)}function kr(e,t){return e>t}function Cr(e,t){return null!=e&&De.call(e,t)}function Ar(e,t){return null!=e&&t in ke(e)}function Fr(e,t,n){for(var o=n?Mt:Pt,s=e[0].length,a=e.length,c=a,u=r(a),l=1/0,d=[];c--;){var p=e[c];c&&t&&(p=Nt(p,Qt(t))),l=Sn(p.length,l),u[c]=!n&&(t||s>=120&&p.length>=120)?new Jn(c&&p):i}p=e[0];var f=-1,h=u[0];e:for(;++f<s&&d.length<l;){var g=p[f],m=t?t(g):g;if(g=n||0!==g?g:0,!(h?tn(h,m):o(d,m,n))){for(c=a;--c;){var _=u[c];if(!(_?tn(_,m):o(e[c],m,n)))continue e}h&&h.push(m),d.push(g)}}return d}function Rr(e,t,n){var r=null==(e=Ao(e,t=Si(t,e)))?e:e[Uo(Xo(t))];return null==r?i:kt(r,e,n)}function Or(e){return na(e)&&xr(e)==v}function Pr(e,t,n,r,o){return e===t||(null==e||null==t||!na(e)&&!na(t)?e!=e&&t!=t:function(e,t,n,r,o,s){var a=Ks(e),c=Ks(t),u=a?y:mo(e),l=c?y:mo(t),d=(u=u==v?k:u)==k,p=(l=l==v?k:l)==k,f=u==l;if(f&&Js(e)){if(!Js(t))return!1;a=!0,d=!1}if(f&&!d)return s||(s=new Yn),a||la(e)?no(e,t,n,r,o,s):function(e,t,n,r,i,o,s){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!o(new Ke(e),new Ke(t)));case S:case b:case x:return Hs(+e,+t);case E:return e.name==t.name&&e.message==t.message;case A:case R:return e==t+"";case I:var a=un;case F:var c=1&r;if(a||(a=pn),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var l=no(a(e),a(t),r,i,o,s);return s.delete(e),l;case O:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,u,n,r,o,s);if(!(1&n)){var h=d&&De.call(e,"__wrapped__"),g=p&&De.call(t,"__wrapped__");if(h||g){var m=h?e.value():e,_=g?t.value():t;return s||(s=new Yn),o(m,_,n,r,s)}}if(!f)return!1;return s||(s=new Yn),function(e,t,n,r,o,s){var a=1&n,c=io(e),u=c.length,l=io(t),d=l.length;if(u!=d&&!a)return!1;var p=u;for(;p--;){var f=c[p];if(!(a?f in t:De.call(t,f)))return!1}var h=s.get(e),g=s.get(t);if(h&&g)return h==t&&g==e;var m=!0;s.set(e,t),s.set(t,e);var _=a;for(;++p<u;){var v=e[f=c[p]],y=t[f];if(r)var S=a?r(y,v,f,t,e,s):r(v,y,f,e,t,s);if(!(S===i?v===y||o(v,y,n,r,s):S)){m=!1;break}_||(_="constructor"==f)}if(m&&!_){var b=e.constructor,E=t.constructor;b==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E||(m=!1)}return s.delete(e),s.delete(t),m}(e,t,n,r,o,s)}(e,t,n,r,Pr,o))}function Mr(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;for(e=ke(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var u=(c=n[o])[0],l=e[u],d=c[1];if(a&&c[2]){if(l===i&&!(u in e))return!1}else{var p=new Yn;if(r)var f=r(l,d,u,e,t,p);if(!(f===i?Pr(d,l,3,r,p):f))return!1}}return!0}function Nr(e){return!(!ta(e)||(t=e,Ue&&Ue in t))&&(Zs(e)?We:ve).test(Bo(e));var t}function Dr(e){return"function"==typeof e?e:null==e?ic:"object"==typeof e?Ks(e)?Wr(e[0],e[1]):Hr(e):fc(e)}function Lr(e){if(!Io(e))return Gt(e);var t=[];for(var n in ke(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Ur(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=Io(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function jr(e,t){var n=-1,i=zs(e)?r(e.length):[];return fr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Hr(e){var t=po(e);return 1==t.length&&t[0][2]?ko(t[0][0],t[0][1]):function(n){return n===e||Mr(n,e,t)}}function Wr(e,t){return Eo(e)&&xo(t)?ko(Uo(e),t):function(n){var r=ka(n,e);return r===i&&r===t?Ca(n,e):Pr(t,r,3)}}function Vr(e,t,n,r,o){e!==t&&yr(t,(function(s,a){if(o||(o=new Yn),ta(s))!function(e,t,n,r,o,s,a){var c=Fo(e,n),u=Fo(t,n),l=a.get(u);if(l)return void tr(e,n,l);var d=s?s(c,u,n+"",e,t,a):i,p=d===i;if(p){var f=Ks(u),h=!f&&Js(u),g=!f&&!h&&la(u);d=u,f||h||g?Ks(c)?d=c:Gs(c)?d=Fi(c):h?(p=!1,d=Ti(u,!0)):g?(p=!1,d=xi(u,!0)):d=[]:oa(u)||qs(u)?(d=c,qs(c)?d=va(c):ta(c)&&!Zs(c)||(d=vo(u))):p=!1}p&&(a.set(u,d),o(d,u,r,s,a),a.delete(u));tr(e,n,d)}(e,t,a,n,Vr,r,o);else{var c=r?r(Fo(e,a),s,a+"",e,t,o):i;c===i&&(c=s),tr(e,a,c)}}),Pa)}function qr(e,t){var n=e.length;if(n)return So(t+=t<0?n:0,n)?e[t]:i}function Kr(e,t,n){t=t.length?Nt(t,(function(e){return Ks(e)?function(t){return Tr(t,1===e.length?e[0]:e)}:e})):[ic];var r=-1;t=Nt(t,Qt(uo()));var i=jr(e,(function(e,n,i){var o=Nt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;for(;++r<s;){var c=ki(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function $r(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=Tr(e,s);n(a,s)&&ei(o,Si(s,e),a)}return o}function zr(e,t,n,r){var i=r?qt:Vt,o=-1,s=t.length,a=e;for(e===t&&(t=Fi(t)),n&&(a=Nt(e,Qt(n)));++o<s;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(a,l,c,r))>-1;)a!==e&&Ye.call(a,c,1),Ye.call(e,c,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;So(i)?Ye.call(e,i,1):pi(e,i)}}return e}function Jr(e,t){return e+mt(wn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return Po(Co(e,t,ic),e+"")}function Zr(e){return Zn(Ha(e))}function Qr(e,t){var n=Ha(e);return Do(n,cr(t,0,n.length))}function ei(e,t,n,r){if(!ta(e))return e;for(var o=-1,s=(t=Si(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var u=Uo(t[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var d=c[u];(l=r?r(d,u,c):i)===i&&(l=ta(d)?d:So(t[o+1])?[]:{})}nr(c,u,l),c=c[u]}return e}var ti=Rn?function(e,t){return Rn.set(e,t),e}:ic,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tc(t),writable:!0})}:ic;function ri(e){return Do(Ha(e))}function ii(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=r(o);++i<o;)s[i]=e[i+t];return s}function oi(e,t){var n;return fr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=e[o];null!==s&&!ua(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return ai(e,t,ic,n)}function ai(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,c=null===t,u=ua(t),l=t===i;o<s;){var d=mt((o+s)/2),p=n(e[d]),f=p!==i,h=null===p,g=p==p,m=ua(p);if(a)var _=r||g;else _=l?g&&(r||f):c?g&&f&&(r||!h):u?g&&f&&!h&&(r||!m):!h&&!m&&(r?p<=t:p<t);_?o=d+1:s=d}return Sn(s,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var s=e[n],a=t?t(s):s;if(!n||!Hs(a,c)){var c=a;o[i++]=0===s?0:s}}return o}function ui(e){return"number"==typeof e?e:ua(e)?g:+e}function li(e){if("string"==typeof e)return e;if(Ks(e))return Nt(e,li)+"";if(ua(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=Pt,o=e.length,s=!0,a=[],c=a;if(n)s=!1,i=Mt;else if(o>=200){var u=t?null:Yi(e);if(u)return pn(u);s=!1,i=tn,c=new Jn}else c=t?[]:a;e:for(;++r<o;){var l=e[r],d=t?t(l):l;if(l=n||0!==l?l:0,s&&d==d){for(var p=c.length;p--;)if(c[p]===d)continue e;t&&c.push(d),a.push(l)}else i(c,d,n)||(c!==a&&c.push(d),a.push(l))}return a}function pi(e,t){return null==(e=Ao(e,t=Si(t,e)))||delete e[Uo(Xo(t))]}function fi(e,t,n,r){return ei(e,t,n(Tr(e,t)),r)}function hi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function gi(e,t){var n=e;return n instanceof Kn&&(n=n.value()),Lt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function mi(e,t,n){var i=e.length;if(i<2)return i?di(e[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=e[o],c=-1;++c<i;)c!=o&&(s[o]=pr(s[o]||a,e[c],t,n));return di(vr(s,1),t,n)}function _i(e,t,n){for(var r=-1,o=e.length,s=t.length,a={};++r<o;){var c=r<s?t[r]:i;n(a,e[r],c)}return a}function vi(e){return Gs(e)?e:[]}function yi(e){return"function"==typeof e?e:ic}function Si(e,t){return Ks(e)?e:Eo(e,t)?[e]:Lo(ya(e))}var bi=Xr;function Ei(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var wi=it||function(e){return gt.clearTimeout(e)};function Ti(e,t){if(t)return e.slice();var n=e.length,r=$e?$e(n):new e.constructor(n);return e.copy(r),r}function Ii(e){var t=new e.constructor(e.byteLength);return new Ke(t).set(new Ke(e)),t}function xi(e,t){var n=t?Ii(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ki(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,s=ua(e),a=t!==i,c=null===t,u=t==t,l=ua(t);if(!c&&!l&&!s&&e>t||s&&a&&u&&!c&&!l||r&&a&&u||!n&&u||!o)return 1;if(!r&&!s&&!l&&e<t||l&&n&&o&&!r&&!s||c&&n&&o||!a&&o||!u)return-1}return 0}function Ci(e,t,n,i){for(var o=-1,s=e.length,a=n.length,c=-1,u=t.length,l=yn(s-a,0),d=r(u+l),p=!i;++c<u;)d[c]=t[c];for(;++o<a;)(p||o<s)&&(d[n[o]]=e[o]);for(;l--;)d[c++]=e[o++];return d}function Ai(e,t,n,i){for(var o=-1,s=e.length,a=-1,c=n.length,u=-1,l=t.length,d=yn(s-c,0),p=r(d+l),f=!i;++o<d;)p[o]=e[o];for(var h=o;++u<l;)p[h+u]=t[u];for(;++a<c;)(f||o<s)&&(p[h+n[a]]=e[o++]);return p}function Fi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ri(e,t,n,r){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],u=r?r(n[c],e[c],c,n,e):i;u===i&&(u=e[c]),o?sr(n,c,u):nr(n,c,u)}return n}function Oi(e,t){return function(n,r){var i=Ks(n)?Ct:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Pi(e){return Xr((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=e.length>3&&"function"==typeof s?(o--,s):i,a&&bo(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=ke(t);++r<o;){var c=n[r];c&&e(t,c,r,s)}return t}))}function Mi(e,t){return function(n,r){if(null==n)return n;if(!zs(n))return e(n,r);for(var i=n.length,o=t?i:-1,s=ke(n);(t?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=ke(t),s=r(t),a=s.length;a--;){var c=s[e?a:++i];if(!1===n(o[c],c,o))break}return t}}function Di(e){return function(t){var n=cn(t=ya(t))?gn(t):i,r=n?n[0]:t.charAt(0),o=n?Ei(n,1).join(""):t.slice(1);return r[e]()+o}}function Li(e){return function(t){return Lt(Za(qa(t).replace(et,"")),e,"")}}function Ui(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Wn(e.prototype),r=e.apply(n,t);return ta(r)?r:n}}function Bi(e){return function(t,n,r){var o=ke(t);if(!zs(t)){var s=uo(n,3);t=Oa(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function ji(e){return ro((function(t){var n=t.length,r=n,s=qn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Fe(o);if(s&&!c&&"wrapper"==ao(a))var c=new qn([],!0)}for(r=c?r:n;++r<n;){var u=ao(a=t[r]),l="wrapper"==u?so(a):i;c=l&&wo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[ao(l[0])].apply(c,l[3]):1==a.length&&wo(a)?c[u]():c.thru(a)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Ks(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Hi(e,t,n,o,s,a,c,u,l,p){var f=t&d,h=1&t,g=2&t,m=24&t,_=512&t,v=g?i:Ui(e);return function d(){for(var y=arguments.length,S=r(y),b=y;b--;)S[b]=arguments[b];if(m)var E=co(d),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(S,E);if(o&&(S=Ci(S,o,s,m)),a&&(S=Ai(S,a,c,m)),y-=w,m&&y<p){var T=dn(S,E);return Gi(e,t,Hi,d.placeholder,n,S,T,u,l,p-y)}var I=h?n:this,x=g?I[e]:e;return y=S.length,u?S=function(e,t){var n=e.length,r=Sn(t.length,n),o=Fi(e);for(;r--;){var s=t[r];e[r]=So(s,n)?o[s]:i}return e}(S,u):_&&y>1&&S.reverse(),f&&l<y&&(S.length=l),this&&this!==gt&&this instanceof d&&(x=v||Ui(x)),x.apply(I,S)}}function Wi(e,t){return function(n,r){return function(e,t,n,r){return br(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ui(n),r=ui(r)),o=e(n,r)}return o}}function qi(e){return ro((function(t){return t=Nt(t,Qt(uo())),Xr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function Ki(e,t){var n=(t=t===i?" ":li(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,ht(e/hn(t)));return cn(t)?Ei(gn(r),0,e).join(""):r.slice(0,e)}function $i(e){return function(t,n,o){return o&&"number"!=typeof o&&bo(t,n,o)&&(n=o=i),t=ha(t),n===i?(n=t,t=0):n=ha(n),function(e,t,n,i){for(var o=-1,s=yn(ht((t-e)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=e,e+=n;return a}(t,n,o=o===i?t<n?1:-1:ha(o),e)}}function zi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=_a(t),n=_a(n)),e(t,n)}}function Gi(e,t,n,r,o,s,a,c,d,p){var f=8&t;t|=f?u:l,4&(t&=~(f?l:u))||(t&=-4);var h=[e,t,o,f?s:i,f?a:i,f?i:s,f?i:a,c,d,p],g=n.apply(i,h);return wo(e)&&Ro(g,h),g.placeholder=r,Mo(g,e,t)}function Ji(e){var t=xe[e];return function(e,n){if(e=_a(e),(n=null==n?0:Sn(ga(n),292))&&St(e)){var r=(ya(e)+"e").split("e");return+((r=(ya(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Cn&&1/pn(new Cn([,-0]))[1]==f?function(e){return new Cn(e)}:uc;function Xi(e){return function(t){var n=mo(t);return n==I?un(t):n==F?fn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,t,n,s,f,h,g,m){var _=2&t;if(!_&&"function"!=typeof e)throw new Fe(o);var v=s?s.length:0;if(v||(t&=-97,s=f=i),g=g===i?g:yn(ga(g),0),m=m===i?m:ga(m),v-=f?f.length:0,t&l){var y=s,S=f;s=f=i}var b=_?i:so(e),E=[e,t,n,s,f,y,S,h,g,m];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,s=r==d&&8==n||r==d&&n==p&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ci(u,c,t[4]):c,e[4]=u?dn(e[3],a):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ai(u,c,t[6]):c,e[6]=u?dn(e[5],a):t[6]);(c=t[7])&&(e[7]=c);r&d&&(e[8]=null==e[8]?t[8]:Sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(E,b),e=E[0],t=E[1],n=E[2],s=E[3],f=E[4],!(m=E[9]=E[9]===i?_?0:e.length:yn(E[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||t==c?function(e,t,n){var o=Ui(e);return function s(){for(var a=arguments.length,c=r(a),u=a,l=co(s);u--;)c[u]=arguments[u];var d=a<3&&c[0]!==l&&c[a-1]!==l?[]:dn(c,l);return(a-=d.length)<n?Gi(e,t,Hi,s.placeholder,i,c,d,i,i,n-a):kt(this&&this!==gt&&this instanceof s?o:e,this,c)}}(e,t,m):t!=u&&33!=t||f.length?Hi.apply(i,E):function(e,t,n,i){var o=1&t,s=Ui(e);return function t(){for(var a=-1,c=arguments.length,u=-1,l=i.length,d=r(l+c),p=this&&this!==gt&&this instanceof t?s:e;++u<l;)d[u]=i[u];for(;c--;)d[u++]=arguments[++a];return kt(p,o?n:this,d)}}(e,t,n,s);else var w=function(e,t,n){var r=1&t,i=Ui(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Mo((b?ti:Ro)(w,E),e,t)}function Qi(e,t,n,r){return e===i||Hs(e,Pe[n])&&!De.call(r,n)?t:e}function eo(e,t,n,r,o,s){return ta(e)&&ta(t)&&(s.set(t,e),Vr(e,t,i,eo,s),s.delete(t)),e}function to(e){return oa(e)?i:e}function no(e,t,n,r,o,s){var a=1&n,c=e.length,u=t.length;if(c!=u&&!(a&&u>c))return!1;var l=s.get(e),d=s.get(t);if(l&&d)return l==t&&d==e;var p=-1,f=!0,h=2&n?new Jn:i;for(s.set(e,t),s.set(t,e);++p<c;){var g=e[p],m=t[p];if(r)var _=a?r(m,g,p,t,e,s):r(g,m,p,e,t,s);if(_!==i){if(_)continue;f=!1;break}if(h){if(!Bt(t,(function(e,t){if(!tn(h,t)&&(g===e||o(g,e,n,r,s)))return h.push(t)}))){f=!1;break}}else if(g!==m&&!o(g,m,n,r,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ro(e){return Po(Co(e,i,$o),e+"")}function io(e){return Ir(e,Oa,ho)}function oo(e){return Ir(e,Pa,go)}var so=Rn?function(e){return Rn.get(e)}:uc;function ao(e){for(var t=e.name+"",n=On[t],r=De.call(On,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(De.call(Hn,"placeholder")?Hn:e).placeholder}function uo(){var e=Hn.iteratee||oc;return e=e===oc?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function po(e){for(var t=Oa(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,xo(i)]}return t}function fo(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var ho=_t?function(e){return null==e?[]:(e=ke(e),Ot(_t(e),(function(t){return Je.call(e,t)})))}:mc,go=_t?function(e){for(var t=[];e;)Dt(t,ho(e)),e=ze(e);return t}:mc,mo=xr;function _o(e,t,n){for(var r=-1,i=(t=Si(t,e)).length,o=!1;++r<i;){var s=Uo(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ea(i)&&So(s,i)&&(Ks(e)||qs(e))}function vo(e){return"function"!=typeof e.constructor||Io(e)?{}:Wn(ze(e))}function yo(e){return Ks(e)||qs(e)||!!(Xe&&e&&e[Xe])}function So(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&Se.test(e))&&e>-1&&e%1==0&&e<t}function bo(e,t,n){if(!ta(n))return!1;var r=typeof t;return!!("number"==r?zs(n)&&So(t,n.length):"string"==r&&t in n)&&Hs(n[t],e)}function Eo(e,t){if(Ks(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ua(e))||(ne.test(e)||!te.test(e)||null!=t&&e in ke(t))}function wo(e){var t=ao(e),n=Hn[t];if("function"!=typeof n||!(t in Kn.prototype))return!1;if(e===n)return!0;var r=so(n);return!!r&&e===r[0]}(In&&mo(new In(new ArrayBuffer(1)))!=N||xn&&mo(new xn)!=I||kn&&mo(kn.resolve())!=C||Cn&&mo(new Cn)!=F||An&&mo(new An)!=P)&&(mo=function(e){var t=xr(e),n=t==k?e.constructor:i,r=n?Bo(n):"";if(r)switch(r){case Pn:return N;case Mn:return I;case Nn:return C;case Dn:return F;case Ln:return P}return t});var To=Me?Zs:_c;function Io(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pe)}function xo(e){return e==e&&!ta(e)}function ko(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in ke(n)))}}function Co(e,t,n){return t=yn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,s=yn(i.length-t,0),a=r(s);++o<s;)a[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(a),kt(e,this,c)}}function Ao(e,t){return t.length<2?e:Tr(e,ii(t,0,-1))}function Fo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ro=No(ti),Oo=ft||function(e,t){return gt.setTimeout(e,t)},Po=No(ni);function Mo(e,t,n){var r=t+"";return Po(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return At(_,(function(n){var r="_."+n[0];t&n[1]&&!Pt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(le):[]}(r),n)))}function No(e){var t=0,n=0;return function(){var r=bn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Do(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var s=Jr(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Lo=function(e){var t=Ns(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Uo(e){if("string"==typeof e||ua(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function jo(e){if(e instanceof Kn)return e.clone();var t=new qn(e.__wrapped__,e.__chain__);return t.__actions__=Fi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ho=Xr((function(e,t){return Gs(e)?pr(e,vr(t,1,Gs,!0)):[]})),Wo=Xr((function(e,t){var n=Xo(t);return Gs(n)&&(n=i),Gs(e)?pr(e,vr(t,1,Gs,!0),uo(n,2)):[]})),Vo=Xr((function(e,t){var n=Xo(t);return Gs(n)&&(n=i),Gs(e)?pr(e,vr(t,1,Gs,!0),i,n):[]}));function qo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=yn(r+i,0)),Wt(e,uo(t,3),i)}function Ko(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ga(n),o=n<0?yn(r+o,0):Sn(o,r-1)),Wt(e,uo(t,3),o,!0)}function $o(e){return(null==e?0:e.length)?vr(e,1):[]}function zo(e){return e&&e.length?e[0]:i}var Go=Xr((function(e){var t=Nt(e,vi);return t.length&&t[0]===e[0]?Fr(t):[]})),Jo=Xr((function(e){var t=Xo(e),n=Nt(e,vi);return t===Xo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Fr(n,uo(t,2)):[]})),Yo=Xr((function(e){var t=Xo(e),n=Nt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Fr(n,i,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Zo=Xr(Qo);function Qo(e,t){return e&&e.length&&t&&t.length?zr(e,t):e}var es=ro((function(e,t){var n=null==e?0:e.length,r=ar(e,t);return Gr(e,Nt(t,(function(e){return So(e,n)?+e:e})).sort(ki)),r}));function ts(e){return null==e?e:Tn.call(e)}var ns=Xr((function(e){return di(vr(e,1,Gs,!0))})),rs=Xr((function(e){var t=Xo(e);return Gs(t)&&(t=i),di(vr(e,1,Gs,!0),uo(t,2))})),is=Xr((function(e){var t=Xo(e);return t="function"==typeof t?t:i,di(vr(e,1,Gs,!0),i,t)}));function os(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Gs(e))return t=yn(e.length,t),!0})),Xt(t,(function(t){return Nt(e,zt(t))}))}function ss(e,t){if(!e||!e.length)return[];var n=os(e);return null==t?n:Nt(n,(function(e){return kt(t,i,e)}))}var as=Xr((function(e,t){return Gs(e)?pr(e,t):[]})),cs=Xr((function(e){return mi(Ot(e,Gs))})),us=Xr((function(e){var t=Xo(e);return Gs(t)&&(t=i),mi(Ot(e,Gs),uo(t,2))})),ls=Xr((function(e){var t=Xo(e);return t="function"==typeof t?t:i,mi(Ot(e,Gs),i,t)})),ds=Xr(os);var ps=Xr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ss(e,n)}));function fs(e){var t=Hn(e);return t.__chain__=!0,t}function hs(e,t){return t(e)}var gs=ro((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return ar(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Kn&&So(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:hs,args:[o],thisArg:i}),new qn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ms=Oi((function(e,t,n){De.call(e,n)?++e[n]:sr(e,n,1)}));var _s=Bi(qo),vs=Bi(Ko);function ys(e,t){return(Ks(e)?At:fr)(e,uo(t,3))}function Ss(e,t){return(Ks(e)?Ft:hr)(e,uo(t,3))}var bs=Oi((function(e,t,n){De.call(e,n)?e[n].push(t):sr(e,n,[t])}));var Es=Xr((function(e,t,n){var i=-1,o="function"==typeof t,s=zs(e)?r(e.length):[];return fr(e,(function(e){s[++i]=o?kt(t,e,n):Rr(e,t,n)})),s})),ws=Oi((function(e,t,n){sr(e,n,t)}));function Ts(e,t){return(Ks(e)?Nt:jr)(e,uo(t,3))}var Is=Oi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var xs=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&bo(e,t[0],t[1])?t=[]:n>2&&bo(t[0],t[1],t[2])&&(t=[t[0]]),Kr(e,vr(t,1),[])})),ks=lt||function(){return gt.Date.now()};function Cs(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Zi(e,d,i,i,i,i,t)}function As(e,t){var n;if("function"!=typeof t)throw new Fe(o);return e=ga(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Fs=Xr((function(e,t,n){var r=1;if(n.length){var i=dn(n,co(Fs));r|=u}return Zi(e,r,t,n,i)})),Rs=Xr((function(e,t,n){var r=3;if(n.length){var i=dn(n,co(Rs));r|=u}return Zi(t,r,e,n,i)}));function Os(e,t,n){var r,s,a,c,u,l,d=0,p=!1,f=!1,h=!0;if("function"!=typeof e)throw new Fe(o);function g(t){var n=r,o=s;return r=s=i,d=t,c=e.apply(o,n)}function m(e){var n=e-l;return l===i||n>=t||n<0||f&&e-d>=a}function _(){var e=ks();if(m(e))return v(e);u=Oo(_,function(e){var n=t-(e-l);return f?Sn(n,a-(e-d)):n}(e))}function v(e){return u=i,h&&r?g(e):(r=s=i,c)}function y(){var e=ks(),n=m(e);if(r=arguments,s=this,l=e,n){if(u===i)return function(e){return d=e,u=Oo(_,t),p?g(e):c}(l);if(f)return wi(u),u=Oo(_,t),g(l)}return u===i&&(u=Oo(_,t)),c}return t=_a(t)||0,ta(n)&&(p=!!n.leading,a=(f="maxWait"in n)?yn(_a(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){u!==i&&wi(u),d=0,r=l=s=u=i},y.flush=function(){return u===i?c:v(ks())},y}var Ps=Xr((function(e,t){return dr(e,1,t)})),Ms=Xr((function(e,t,n){return dr(e,_a(t)||0,n)}));function Ns(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Fe(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Ns.Cache||Gn),n}function Ds(e){if("function"!=typeof e)throw new Fe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ns.Cache=Gn;var Ls=bi((function(e,t){var n=(t=1==t.length&&Ks(t[0])?Nt(t[0],Qt(uo())):Nt(vr(t,1),Qt(uo()))).length;return Xr((function(r){for(var i=-1,o=Sn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),Us=Xr((function(e,t){var n=dn(t,co(Us));return Zi(e,u,i,t,n)})),Bs=Xr((function(e,t){var n=dn(t,co(Bs));return Zi(e,l,i,t,n)})),js=ro((function(e,t){return Zi(e,p,i,i,i,t)}));function Hs(e,t){return e===t||e!=e&&t!=t}var Ws=zi(kr),Vs=zi((function(e,t){return e>=t})),qs=Or(function(){return arguments}())?Or:function(e){return na(e)&&De.call(e,"callee")&&!Je.call(e,"callee")},Ks=r.isArray,$s=bt?Qt(bt):function(e){return na(e)&&xr(e)==M};function zs(e){return null!=e&&ea(e.length)&&!Zs(e)}function Gs(e){return na(e)&&zs(e)}var Js=yt||_c,Ys=Et?Qt(Et):function(e){return na(e)&&xr(e)==b};function Xs(e){if(!na(e))return!1;var t=xr(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!oa(e)}function Zs(e){if(!ta(e))return!1;var t=xr(e);return t==w||t==T||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qs(e){return"number"==typeof e&&e==ga(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function na(e){return null!=e&&"object"==typeof e}var ra=wt?Qt(wt):function(e){return na(e)&&mo(e)==I};function ia(e){return"number"==typeof e||na(e)&&xr(e)==x}function oa(e){if(!na(e)||xr(e)!=k)return!1;var t=ze(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==je}var sa=Tt?Qt(Tt):function(e){return na(e)&&xr(e)==A};var aa=It?Qt(It):function(e){return na(e)&&mo(e)==F};function ca(e){return"string"==typeof e||!Ks(e)&&na(e)&&xr(e)==R}function ua(e){return"symbol"==typeof e||na(e)&&xr(e)==O}var la=xt?Qt(xt):function(e){return na(e)&&ea(e.length)&&!!ct[xr(e)]};var da=zi(Br),pa=zi((function(e,t){return e<=t}));function fa(e){if(!e)return[];if(zs(e))return ca(e)?gn(e):Fi(e);if(Ze&&e[Ze])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ze]());var t=mo(e);return(t==I?un:t==F?pn:Ha)(e)}function ha(e){return e?(e=_a(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ga(e){var t=ha(e),n=t%1;return t==t?n?t-n:t:0}function ma(e){return e?cr(ga(e),0,m):0}function _a(e){if("number"==typeof e)return e;if(ua(e))return g;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=_e.test(e);return n||ye.test(e)?pt(e.slice(2),n?2:8):me.test(e)?g:+e}function va(e){return Ri(e,Pa(e))}function ya(e){return null==e?"":li(e)}var Sa=Pi((function(e,t){if(Io(t)||zs(t))Ri(t,Oa(t),e);else for(var n in t)De.call(t,n)&&nr(e,n,t[n])})),ba=Pi((function(e,t){Ri(t,Pa(t),e)})),Ea=Pi((function(e,t,n,r){Ri(t,Pa(t),e,r)})),wa=Pi((function(e,t,n,r){Ri(t,Oa(t),e,r)})),Ta=ro(ar);var Ia=Xr((function(e,t){e=ke(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&bo(t[0],t[1],o)&&(r=1);++n<r;)for(var s=t[n],a=Pa(s),c=-1,u=a.length;++c<u;){var l=a[c],d=e[l];(d===i||Hs(d,Pe[l])&&!De.call(e,l))&&(e[l]=s[l])}return e})),xa=Xr((function(e){return e.push(i,eo),kt(Na,i,e)}));function ka(e,t,n){var r=null==e?i:Tr(e,t);return r===i?n:r}function Ca(e,t){return null!=e&&_o(e,t,Ar)}var Aa=Wi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),tc(ic)),Fa=Wi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Ra=Xr(Rr);function Oa(e){return zs(e)?Xn(e):Lr(e)}function Pa(e){return zs(e)?Xn(e,!0):Ur(e)}var Ma=Pi((function(e,t,n){Vr(e,t,n)})),Na=Pi((function(e,t,n,r){Vr(e,t,n,r)})),Da=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=Si(t,e),r||(r=t.length>1),t})),Ri(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)pi(n,t[i]);return n}));var La=ro((function(e,t){return null==e?{}:function(e,t){return $r(e,t,(function(t,n){return Ca(e,n)}))}(e,t)}));function Ua(e,t){if(null==e)return{};var n=Nt(oo(e),(function(e){return[e]}));return t=uo(t),$r(e,n,(function(e,n){return t(e,n[0])}))}var Ba=Xi(Oa),ja=Xi(Pa);function Ha(e){return null==e?[]:en(e,Oa(e))}var Wa=Li((function(e,t,n){return t=t.toLowerCase(),e+(n?Va(t):t)}));function Va(e){return Xa(ya(e).toLowerCase())}function qa(e){return(e=ya(e))&&e.replace(be,on).replace(tt,"")}var Ka=Li((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),$a=Li((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),za=Di("toLowerCase");var Ga=Li((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ja=Li((function(e,t,n){return e+(n?" ":"")+Xa(t)}));var Ya=Li((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xa=Di("toUpperCase");function Za(e,t,n){return e=ya(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(de)||[]}(e):e.match(t)||[]}var Qa=Xr((function(e,t){try{return kt(e,i,t)}catch(e){return Xs(e)?e:new Te(e)}})),ec=ro((function(e,t){return At(t,(function(t){t=Uo(t),sr(e,t,Fs(e[t],e))})),e}));function tc(e){return function(){return e}}var nc=ji(),rc=ji(!0);function ic(e){return e}function oc(e){return Dr("function"==typeof e?e:ur(e,1))}var sc=Xr((function(e,t){return function(n){return Rr(n,e,t)}})),ac=Xr((function(e,t){return function(n){return Rr(e,n,t)}}));function cc(e,t,n){var r=Oa(t),i=wr(t,r);null!=n||ta(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Oa(t)));var o=!(ta(n)&&"chain"in n&&!n.chain),s=Zs(e);return At(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Fi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function uc(){}var lc=qi(Nt),dc=qi(Rt),pc=qi(Bt);function fc(e){return Eo(e)?zt(Uo(e)):function(e){return function(t){return Tr(t,e)}}(e)}var hc=$i(),gc=$i(!0);function mc(){return[]}function _c(){return!1}var vc=Vi((function(e,t){return e+t}),0),yc=Ji("ceil"),Sc=Vi((function(e,t){return e/t}),1),bc=Ji("floor");var Ec,wc=Vi((function(e,t){return e*t}),1),Tc=Ji("round"),Ic=Vi((function(e,t){return e-t}),0);return Hn.after=function(e,t){if("function"!=typeof t)throw new Fe(o);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},Hn.ary=Cs,Hn.assign=Sa,Hn.assignIn=ba,Hn.assignInWith=Ea,Hn.assignWith=wa,Hn.at=Ta,Hn.before=As,Hn.bind=Fs,Hn.bindAll=ec,Hn.bindKey=Rs,Hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ks(e)?e:[e]},Hn.chain=fs,Hn.chunk=function(e,t,n){t=(n?bo(e,t,n):t===i)?1:yn(ga(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=r(ht(o/t));s<o;)c[a++]=ii(e,s,s+=t);return c},Hn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Dt(Ks(n)?Fi(n):[n],vr(t,1))},Hn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Fe(o);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Hn.conforms=function(e){return function(e){var t=Oa(e);return function(n){return lr(n,e,t)}}(ur(e,1))},Hn.constant=tc,Hn.countBy=ms,Hn.create=function(e,t){var n=Wn(e);return null==t?n:or(n,t)},Hn.curry=function e(t,n,r){var o=Zi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Hn.curryRight=function e(t,n,r){var o=Zi(t,c,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Hn.debounce=Os,Hn.defaults=Ia,Hn.defaultsDeep=xa,Hn.defer=Ps,Hn.delay=Ms,Hn.difference=Ho,Hn.differenceBy=Wo,Hn.differenceWith=Vo,Hn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:ga(t))<0?0:t,r):[]},Hn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:ga(t)))<0?0:t):[]},Hn.dropRightWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!0,!0):[]},Hn.dropWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!0):[]},Hn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&bo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ga(r))<0&&(r+=o),r=n>r?0:ma(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Hn.filter=function(e,t){return(Ks(e)?Ot:_r)(e,uo(t,3))},Hn.flatMap=function(e,t){return vr(Ts(e,t),1)},Hn.flatMapDeep=function(e,t){return vr(Ts(e,t),f)},Hn.flatMapDepth=function(e,t,n){return n=n===i?1:ga(n),vr(Ts(e,t),n)},Hn.flatten=$o,Hn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,f):[]},Hn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:ga(t)):[]},Hn.flip=function(e){return Zi(e,512)},Hn.flow=nc,Hn.flowRight=rc,Hn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Hn.functions=function(e){return null==e?[]:wr(e,Oa(e))},Hn.functionsIn=function(e){return null==e?[]:wr(e,Pa(e))},Hn.groupBy=bs,Hn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Hn.intersection=Go,Hn.intersectionBy=Jo,Hn.intersectionWith=Yo,Hn.invert=Aa,Hn.invertBy=Fa,Hn.invokeMap=Es,Hn.iteratee=oc,Hn.keyBy=ws,Hn.keys=Oa,Hn.keysIn=Pa,Hn.map=Ts,Hn.mapKeys=function(e,t){var n={};return t=uo(t,3),br(e,(function(e,r,i){sr(n,t(e,r,i),e)})),n},Hn.mapValues=function(e,t){var n={};return t=uo(t,3),br(e,(function(e,r,i){sr(n,r,t(e,r,i))})),n},Hn.matches=function(e){return Hr(ur(e,1))},Hn.matchesProperty=function(e,t){return Wr(e,ur(t,1))},Hn.memoize=Ns,Hn.merge=Ma,Hn.mergeWith=Na,Hn.method=sc,Hn.methodOf=ac,Hn.mixin=cc,Hn.negate=Ds,Hn.nthArg=function(e){return e=ga(e),Xr((function(t){return qr(t,e)}))},Hn.omit=Da,Hn.omitBy=function(e,t){return Ua(e,Ds(uo(t)))},Hn.once=function(e){return As(2,e)},Hn.orderBy=function(e,t,n,r){return null==e?[]:(Ks(t)||(t=null==t?[]:[t]),Ks(n=r?i:n)||(n=null==n?[]:[n]),Kr(e,t,n))},Hn.over=lc,Hn.overArgs=Ls,Hn.overEvery=dc,Hn.overSome=pc,Hn.partial=Us,Hn.partialRight=Bs,Hn.partition=Is,Hn.pick=La,Hn.pickBy=Ua,Hn.property=fc,Hn.propertyOf=function(e){return function(t){return null==e?i:Tr(e,t)}},Hn.pull=Zo,Hn.pullAll=Qo,Hn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,uo(n,2)):e},Hn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?zr(e,t,i,n):e},Hn.pullAt=es,Hn.range=hc,Hn.rangeRight=gc,Hn.rearg=js,Hn.reject=function(e,t){return(Ks(e)?Ot:_r)(e,Ds(uo(t,3)))},Hn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return Gr(e,i),n},Hn.rest=function(e,t){if("function"!=typeof e)throw new Fe(o);return Xr(e,t=t===i?t:ga(t))},Hn.reverse=ts,Hn.sampleSize=function(e,t,n){return t=(n?bo(e,t,n):t===i)?1:ga(t),(Ks(e)?Qn:Qr)(e,t)},Hn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Hn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Hn.shuffle=function(e){return(Ks(e)?er:ri)(e)},Hn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&bo(e,t,n)?(t=0,n=r):(t=null==t?0:ga(t),n=n===i?r:ga(n)),ii(e,t,n)):[]},Hn.sortBy=xs,Hn.sortedUniq=function(e){return e&&e.length?ci(e):[]},Hn.sortedUniqBy=function(e,t){return e&&e.length?ci(e,uo(t,2)):[]},Hn.split=function(e,t,n){return n&&"number"!=typeof n&&bo(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=li(t))&&cn(e)?Ei(gn(e),0,n):e.split(t,n):[]},Hn.spread=function(e,t){if("function"!=typeof e)throw new Fe(o);return t=null==t?0:yn(ga(t),0),Xr((function(n){var r=n[t],i=Ei(n,0,t);return r&&Dt(i,r),kt(e,this,i)}))},Hn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Hn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:ga(t))<0?0:t):[]},Hn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:ga(t)))<0?0:t,r):[]},Hn.takeRightWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!1,!0):[]},Hn.takeWhile=function(e,t){return e&&e.length?hi(e,uo(t,3)):[]},Hn.tap=function(e,t){return t(e),e},Hn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Fe(o);return ta(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Os(e,t,{leading:r,maxWait:t,trailing:i})},Hn.thru=hs,Hn.toArray=fa,Hn.toPairs=Ba,Hn.toPairsIn=ja,Hn.toPath=function(e){return Ks(e)?Nt(e,Uo):ua(e)?[e]:Fi(Lo(ya(e)))},Hn.toPlainObject=va,Hn.transform=function(e,t,n){var r=Ks(e),i=r||Js(e)||la(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ta(e)&&Zs(o)?Wn(ze(e)):{}}return(i?At:br)(e,(function(e,r,i){return t(n,e,r,i)})),n},Hn.unary=function(e){return Cs(e,1)},Hn.union=ns,Hn.unionBy=rs,Hn.unionWith=is,Hn.uniq=function(e){return e&&e.length?di(e):[]},Hn.uniqBy=function(e,t){return e&&e.length?di(e,uo(t,2)):[]},Hn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?di(e,i,t):[]},Hn.unset=function(e,t){return null==e||pi(e,t)},Hn.unzip=os,Hn.unzipWith=ss,Hn.update=function(e,t,n){return null==e?e:fi(e,t,yi(n))},Hn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:fi(e,t,yi(n),r)},Hn.values=Ha,Hn.valuesIn=function(e){return null==e?[]:en(e,Pa(e))},Hn.without=as,Hn.words=Za,Hn.wrap=function(e,t){return Us(yi(t),e)},Hn.xor=cs,Hn.xorBy=us,Hn.xorWith=ls,Hn.zip=ds,Hn.zipObject=function(e,t){return _i(e||[],t||[],nr)},Hn.zipObjectDeep=function(e,t){return _i(e||[],t||[],ei)},Hn.zipWith=ps,Hn.entries=Ba,Hn.entriesIn=ja,Hn.extend=ba,Hn.extendWith=Ea,cc(Hn,Hn),Hn.add=vc,Hn.attempt=Qa,Hn.camelCase=Wa,Hn.capitalize=Va,Hn.ceil=yc,Hn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=_a(n))==n?n:0),t!==i&&(t=(t=_a(t))==t?t:0),cr(_a(e),t,n)},Hn.clone=function(e){return ur(e,4)},Hn.cloneDeep=function(e){return ur(e,5)},Hn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Hn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Hn.conformsTo=function(e,t){return null==t||lr(e,t,Oa(t))},Hn.deburr=qa,Hn.defaultTo=function(e,t){return null==e||e!=e?t:e},Hn.divide=Sc,Hn.endsWith=function(e,t,n){e=ya(e),t=li(t);var r=e.length,o=n=n===i?r:cr(ga(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Hn.eq=Hs,Hn.escape=function(e){return(e=ya(e))&&X.test(e)?e.replace(J,sn):e},Hn.escapeRegExp=function(e){return(e=ya(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Hn.every=function(e,t,n){var r=Ks(e)?Rt:gr;return n&&bo(e,t,n)&&(t=i),r(e,uo(t,3))},Hn.find=_s,Hn.findIndex=qo,Hn.findKey=function(e,t){return Ht(e,uo(t,3),br)},Hn.findLast=vs,Hn.findLastIndex=Ko,Hn.findLastKey=function(e,t){return Ht(e,uo(t,3),Er)},Hn.floor=bc,Hn.forEach=ys,Hn.forEachRight=Ss,Hn.forIn=function(e,t){return null==e?e:yr(e,uo(t,3),Pa)},Hn.forInRight=function(e,t){return null==e?e:Sr(e,uo(t,3),Pa)},Hn.forOwn=function(e,t){return e&&br(e,uo(t,3))},Hn.forOwnRight=function(e,t){return e&&Er(e,uo(t,3))},Hn.get=ka,Hn.gt=Ws,Hn.gte=Vs,Hn.has=function(e,t){return null!=e&&_o(e,t,Cr)},Hn.hasIn=Ca,Hn.head=zo,Hn.identity=ic,Hn.includes=function(e,t,n,r){e=zs(e)?e:Ha(e),n=n&&!r?ga(n):0;var i=e.length;return n<0&&(n=yn(i+n,0)),ca(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},Hn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ga(n);return i<0&&(i=yn(r+i,0)),Vt(e,t,i)},Hn.inRange=function(e,t,n){return t=ha(t),n===i?(n=t,t=0):n=ha(n),function(e,t,n){return e>=Sn(t,n)&&e<yn(t,n)}(e=_a(e),t,n)},Hn.invoke=Ra,Hn.isArguments=qs,Hn.isArray=Ks,Hn.isArrayBuffer=$s,Hn.isArrayLike=zs,Hn.isArrayLikeObject=Gs,Hn.isBoolean=function(e){return!0===e||!1===e||na(e)&&xr(e)==S},Hn.isBuffer=Js,Hn.isDate=Ys,Hn.isElement=function(e){return na(e)&&1===e.nodeType&&!oa(e)},Hn.isEmpty=function(e){if(null==e)return!0;if(zs(e)&&(Ks(e)||"string"==typeof e||"function"==typeof e.splice||Js(e)||la(e)||qs(e)))return!e.length;var t=mo(e);if(t==I||t==F)return!e.size;if(Io(e))return!Lr(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Hn.isEqual=function(e,t){return Pr(e,t)},Hn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Pr(e,t,i,n):!!r},Hn.isError=Xs,Hn.isFinite=function(e){return"number"==typeof e&&St(e)},Hn.isFunction=Zs,Hn.isInteger=Qs,Hn.isLength=ea,Hn.isMap=ra,Hn.isMatch=function(e,t){return e===t||Mr(e,t,po(t))},Hn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Mr(e,t,po(t),n)},Hn.isNaN=function(e){return ia(e)&&e!=+e},Hn.isNative=function(e){if(To(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Hn.isNil=function(e){return null==e},Hn.isNull=function(e){return null===e},Hn.isNumber=ia,Hn.isObject=ta,Hn.isObjectLike=na,Hn.isPlainObject=oa,Hn.isRegExp=sa,Hn.isSafeInteger=function(e){return Qs(e)&&e>=-9007199254740991&&e<=h},Hn.isSet=aa,Hn.isString=ca,Hn.isSymbol=ua,Hn.isTypedArray=la,Hn.isUndefined=function(e){return e===i},Hn.isWeakMap=function(e){return na(e)&&mo(e)==P},Hn.isWeakSet=function(e){return na(e)&&"[object WeakSet]"==xr(e)},Hn.join=function(e,t){return null==e?"":jt.call(e,t)},Hn.kebabCase=Ka,Hn.last=Xo,Hn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ga(n))<0?yn(r+o,0):Sn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Wt(e,Kt,o,!0)},Hn.lowerCase=$a,Hn.lowerFirst=za,Hn.lt=da,Hn.lte=pa,Hn.max=function(e){return e&&e.length?mr(e,ic,kr):i},Hn.maxBy=function(e,t){return e&&e.length?mr(e,uo(t,2),kr):i},Hn.mean=function(e){return $t(e,ic)},Hn.meanBy=function(e,t){return $t(e,uo(t,2))},Hn.min=function(e){return e&&e.length?mr(e,ic,Br):i},Hn.minBy=function(e,t){return e&&e.length?mr(e,uo(t,2),Br):i},Hn.stubArray=mc,Hn.stubFalse=_c,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=wc,Hn.nth=function(e,t){return e&&e.length?qr(e,ga(t)):i},Hn.noConflict=function(){return gt._===this&&(gt._=He),this},Hn.noop=uc,Hn.now=ks,Hn.pad=function(e,t,n){e=ya(e);var r=(t=ga(t))?hn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ki(mt(i),n)+e+Ki(ht(i),n)},Hn.padEnd=function(e,t,n){e=ya(e);var r=(t=ga(t))?hn(e):0;return t&&r<t?e+Ki(t-r,n):e},Hn.padStart=function(e,t,n){e=ya(e);var r=(t=ga(t))?hn(e):0;return t&&r<t?Ki(t-r,n)+e:e},Hn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(ya(e).replace(se,""),t||0)},Hn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&bo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=ha(e),t===i?(t=e,e=0):t=ha(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=wn();return Sn(e+o*(t-e+dt("1e-"+((o+"").length-1))),t)}return Jr(e,t)},Hn.reduce=function(e,t,n){var r=Ks(e)?Lt:Jt,i=arguments.length<3;return r(e,uo(t,4),n,i,fr)},Hn.reduceRight=function(e,t,n){var r=Ks(e)?Ut:Jt,i=arguments.length<3;return r(e,uo(t,4),n,i,hr)},Hn.repeat=function(e,t,n){return t=(n?bo(e,t,n):t===i)?1:ga(t),Yr(ya(e),t)},Hn.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Hn.result=function(e,t,n){var r=-1,o=(t=Si(t,e)).length;for(o||(o=1,e=i);++r<o;){var s=null==e?i:e[Uo(t[r])];s===i&&(r=o,s=n),e=Zs(s)?s.call(e):s}return e},Hn.round=Tc,Hn.runInContext=e,Hn.sample=function(e){return(Ks(e)?Zn:Zr)(e)},Hn.size=function(e){if(null==e)return 0;if(zs(e))return ca(e)?hn(e):e.length;var t=mo(e);return t==I||t==F?e.size:Lr(e).length},Hn.snakeCase=Ga,Hn.some=function(e,t,n){var r=Ks(e)?Bt:oi;return n&&bo(e,t,n)&&(t=i),r(e,uo(t,3))},Hn.sortedIndex=function(e,t){return si(e,t)},Hn.sortedIndexBy=function(e,t,n){return ai(e,t,uo(n,2))},Hn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&Hs(e[r],t))return r}return-1},Hn.sortedLastIndex=function(e,t){return si(e,t,!0)},Hn.sortedLastIndexBy=function(e,t,n){return ai(e,t,uo(n,2),!0)},Hn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(Hs(e[n],t))return n}return-1},Hn.startCase=Ja,Hn.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:cr(ga(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},Hn.subtract=Ic,Hn.sum=function(e){return e&&e.length?Yt(e,ic):0},Hn.sumBy=function(e,t){return e&&e.length?Yt(e,uo(t,2)):0},Hn.template=function(e,t,n){var r=Hn.templateSettings;n&&bo(e,t,n)&&(t=i),e=ya(e),t=Ea({},t,r,Qi);var o,s,a=Ea({},t.imports,r.imports,Qi),c=Oa(a),u=en(a,c),l=0,d=t.interpolate||Ee,p="__p += '",f=Ce((t.escape||Ee).source+"|"+d.source+"|"+(d===ee?he:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),h="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,n,r,i,a,c){return r||(r=i),p+=e.slice(l,c).replace(we,an),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),p+="';\n";var g=De.call(t,"variable")&&t.variable;if(g){if(pe.test(g))throw new Te("Invalid `variable` option passed into `_.template`")}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(K,""):p).replace($,"$1").replace(z,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Qa((function(){return Ie(c,h+"return "+p).apply(i,u)}));if(m.source=p,Xs(m))throw m;return m},Hn.times=function(e,t){if((e=ga(e))<1||e>h)return[];var n=m,r=Sn(e,m);t=uo(t),e-=m;for(var i=Xt(r,t);++n<e;)t(n);return i},Hn.toFinite=ha,Hn.toInteger=ga,Hn.toLength=ma,Hn.toLower=function(e){return ya(e).toLowerCase()},Hn.toNumber=_a,Hn.toSafeInteger=function(e){return e?cr(ga(e),-9007199254740991,h):0===e?e:0},Hn.toString=ya,Hn.toUpper=function(e){return ya(e).toUpperCase()},Hn.trim=function(e,t,n){if((e=ya(e))&&(n||t===i))return Zt(e);if(!e||!(t=li(t)))return e;var r=gn(e),o=gn(t);return Ei(r,nn(r,o),rn(r,o)+1).join("")},Hn.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=li(t)))return e;var r=gn(e);return Ei(r,0,rn(r,gn(t))+1).join("")},Hn.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.replace(se,"");if(!e||!(t=li(t)))return e;var r=gn(e);return Ei(r,nn(r,gn(t))).join("")},Hn.truncate=function(e,t){var n=30,r="...";if(ta(t)){var o="separator"in t?t.separator:o;n="length"in t?ga(t.length):n,r="omission"in t?li(t.omission):r}var s=(e=ya(e)).length;if(cn(e)){var a=gn(e);s=a.length}if(n>=s)return e;var c=n-hn(r);if(c<1)return r;var u=a?Ei(a,0,c).join(""):e.slice(0,c);if(o===i)return u+r;if(a&&(c+=u.length-c),sa(o)){if(e.slice(c).search(o)){var l,d=u;for(o.global||(o=Ce(o.source,ya(ge.exec(o))+"g")),o.lastIndex=0;l=o.exec(d);)var p=l.index;u=u.slice(0,p===i?c:p)}}else if(e.indexOf(li(o),c)!=c){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+r},Hn.unescape=function(e){return(e=ya(e))&&Y.test(e)?e.replace(G,_n):e},Hn.uniqueId=function(e){var t=++Le;return ya(e)+t},Hn.upperCase=Ya,Hn.upperFirst=Xa,Hn.each=ys,Hn.eachRight=Ss,Hn.first=zo,cc(Hn,(Ec={},br(Hn,(function(e,t){De.call(Hn.prototype,t)||(Ec[t]=e)})),Ec),{chain:!1}),Hn.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Hn[e].placeholder=Hn})),At(["drop","take"],(function(e,t){Kn.prototype[e]=function(n){n=n===i?1:yn(ga(n),0);var r=this.__filtered__&&!t?new Kn(this):this.clone();return r.__filtered__?r.__takeCount__=Sn(n,r.__takeCount__):r.__views__.push({size:Sn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),At(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),At(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Kn.prototype[e]=function(){return this[n](1).value()[0]}})),At(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Kn.prototype[e]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(ic)},Kn.prototype.find=function(e){return this.filter(e).head()},Kn.prototype.findLast=function(e){return this.reverse().find(e)},Kn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Kn(this):this.map((function(n){return Rr(n,e,t)}))})),Kn.prototype.reject=function(e){return this.filter(Ds(uo(e)))},Kn.prototype.slice=function(e,t){e=ga(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=ga(t))<0?n.dropRight(-t):n.take(t-e)),n)},Kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Kn.prototype.toArray=function(){return this.take(m)},br(Kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Hn[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&(Hn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,c=t instanceof Kn,u=a[0],l=c||Ks(t),d=function(e){var t=o.apply(Hn,Dt([e],a));return r&&p?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var p=this.__chain__,f=!!this.__actions__.length,h=s&&!p,g=c&&!f;if(!s&&l){t=g?t:new Kn(this);var m=e.apply(t,a);return m.__actions__.push({func:hs,args:[d],thisArg:i}),new qn(m,p)}return h&&g?e.apply(this,a):(m=this.thru(d),h?r?m.value()[0]:m.value():m)})})),At(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Hn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ks(i)?i:[],e)}return this[n]((function(n){return t.apply(Ks(n)?n:[],e)}))}})),br(Kn.prototype,(function(e,t){var n=Hn[t];if(n){var r=n.name+"";De.call(On,r)||(On[r]=[]),On[r].push({name:t,func:n})}})),On[Hi(i,2).name]=[{name:"wrapper",func:i}],Kn.prototype.clone=function(){var e=new Kn(this.__wrapped__);return e.__actions__=Fi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Fi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Fi(this.__views__),e},Kn.prototype.reverse=function(){if(this.__filtered__){var e=new Kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ks(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Sn(t,e+s);break;case"takeRight":e=yn(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=o.start,a=o.end,c=a-s,u=r?a:s-1,l=this.__iteratees__,d=l.length,p=0,f=Sn(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return gi(e,this.__actions__);var h=[];e:for(;c--&&p<f;){for(var g=-1,m=e[u+=t];++g<d;){var _=l[g],v=_.iteratee,y=_.type,S=v(m);if(2==y)m=S;else if(!S){if(1==y)continue e;break e}}h[p++]=m}return h},Hn.prototype.at=gs,Hn.prototype.chain=function(){return fs(this)},Hn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===i&&(this.__values__=fa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Hn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=jo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var t=e;return this.__actions__.length&&(t=new Kn(this)),(t=t.reverse()).__actions__.push({func:hs,args:[ts],thisArg:i}),new qn(t,this.__chain__)}return this.thru(ts)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,Ze&&(Hn.prototype[Ze]=function(){return this}),Hn}();gt._=vn,(r=function(){return vn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},1051:(e,t,n)=>{"use strict";n.r(t)},143:(e,t,n)=>{"use strict";n.r(t)},3166:(e,t,n)=>{"use strict";n.r(t)},2968:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={debug:function(){},info:function(){},warn:function(){},error:function(){}},o=void 0,s=void 0;(t.Log=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.reset=function(){s=3,o=i},e.debug=function(){if(s>=4){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.debug.apply(o,Array.from(t))}},e.info=function(){if(s>=3){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.info.apply(o,Array.from(t))}},e.warn=function(){if(s>=2){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.warn.apply(o,Array.from(t))}},e.error=function(){if(s>=1){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];o.error.apply(o,Array.from(t))}},r(e,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return s},set:function(e){if(!(0<=e&&e<=4))throw new Error("Invalid log level");s=e}},{key:"logger",get:function(){return o},set:function(e){if(!e.debug&&e.info&&(e.debug=e.info),!(e.debug&&e.info&&e.warn&&e.error))throw new Error("Invalid logger");o=e}}]),e}()).reset()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={setInterval:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return setInterval(e,t)})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return clearInterval(e)}))},o=!1,s=null;t.Global=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e._testing=function(){o=!0},e.setXMLHttpRequest=function(e){s=e},r(e,null,[{key:"location",get:function(){if(!o)return location}},{key:"localStorage",get:function(){if(!o&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!o&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!o&&"undefined"!=typeof window)return s||XMLHttpRequest}},{key:"timer",get:function(){if(!o)return i}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(7),s=".well-known/openid-configuration";t.MetadataService=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=t,this._jsonService=new n(["application/jwk-set+json"])}return e.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},e.prototype.getMetadata=function(){var e=this;return this._settings.metadata?(i.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(i.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then((function(t){i.Log.debug("MetadataService.getMetadata: json received");var n=e._settings.metadataSeed||{};return e._settings.metadata=Object.assign({},n,t),e._settings.metadata}))):(i.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},e.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},e.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},e.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},e.prototype.getTokenEndpoint=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._getMetadataProperty("token_endpoint",e)},e.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},e.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},e.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},e.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},e.prototype._getMetadataProperty=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.Log.debug("MetadataService.getMetadataProperty for: "+e),this.getMetadata().then((function(n){if(i.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===n[e]){if(!0===t)return void i.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+e);throw i.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+e),new Error("Metadata does not contain property "+e)}return n[e]}))},e.prototype.getSigningKeys=function(){var e=this;return this._settings.signingKeys?(i.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then((function(t){return i.Log.debug("MetadataService.getSigningKeys: jwks_uri received",t),e._jsonService.getJson(t).then((function(t){if(i.Log.debug("MetadataService.getSigningKeys: key set received",t),!t.keys)throw i.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return e._settings.signingKeys=t.keys,e._settings.signingKeys}))}))},r(e,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(s)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=s))),this._metadataUrl}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtility=void 0;var r=n(0),i=n(1);t.UrlUtility=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.addQueryParam=function(e,t,n){return e.indexOf("?")<0&&(e+="?"),"?"!==e[e.length-1]&&(e+="&"),e+=encodeURIComponent(t),(e+="=")+encodeURIComponent(n)},e.parseUrlFragment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.Global;"string"!=typeof e&&(e=n.location.href);var o=e.lastIndexOf(t);o>=0&&(e=e.substr(o+1)),"?"===t&&(o=e.indexOf("#"))>=0&&(e=e.substr(0,o));for(var s,a={},c=/([^&=]+)=([^&]*)/g,u=0;s=c.exec(e);)if(a[decodeURIComponent(s[1])]=decodeURIComponent(s[2].replace(/\+/g," ")),u++>50)return r.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",e),{error:"Response exceeded expected number of parameters"};for(var l in a)return a;return{}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoseUtil=void 0;var r=n(26),i=function(e){return e&&e.__esModule?e:{default:e}}(n(33));t.JoseUtil=(0,i.default)({jws:r.jws,KeyUtil:r.KeyUtil,X509:r.X509,crypto:r.crypto,hextob64u:r.hextob64u,b64tohex:r.b64tohex,AllowedSigningAlgs:r.AllowedSigningAlgs})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClientSettings=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),s=n(23),a=n(6),c=n(24),u=n(2),l=".well-known/openid-configuration";t.OidcClientSettings=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.authority,i=t.metadataUrl,o=t.metadata,l=t.signingKeys,d=t.metadataSeed,p=t.client_id,f=t.client_secret,h=t.response_type,g=void 0===h?"id_token":h,m=t.scope,_=void 0===m?"openid":m,v=t.redirect_uri,y=t.post_logout_redirect_uri,S=t.client_authentication,b=void 0===S?"client_secret_post":S,E=t.prompt,w=t.display,T=t.max_age,I=t.ui_locales,x=t.acr_values,k=t.resource,C=t.response_mode,A=t.filterProtocolClaims,F=void 0===A||A,R=t.loadUserInfo,O=void 0===R||R,P=t.staleStateAge,M=void 0===P?900:P,N=t.clockSkew,D=void 0===N?300:N,L=t.clockService,U=void 0===L?new s.ClockService:L,B=t.userInfoJwtIssuer,j=void 0===B?"OP":B,H=t.mergeClaims,W=void 0!==H&&H,V=t.stateStore,q=void 0===V?new a.WebStorageStateStore:V,K=t.ResponseValidatorCtor,$=void 0===K?c.ResponseValidator:K,z=t.MetadataServiceCtor,G=void 0===z?u.MetadataService:z,J=t.extraQueryParams,Y=void 0===J?{}:J,X=t.extraTokenParams,Z=void 0===X?{}:X;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._authority=n,this._metadataUrl=i,this._metadata=o,this._metadataSeed=d,this._signingKeys=l,this._client_id=p,this._client_secret=f,this._response_type=g,this._scope=_,this._redirect_uri=v,this._post_logout_redirect_uri=y,this._client_authentication=b,this._prompt=E,this._display=w,this._max_age=T,this._ui_locales=I,this._acr_values=x,this._resource=k,this._response_mode=C,this._filterProtocolClaims=!!F,this._loadUserInfo=!!O,this._staleStateAge=M,this._clockSkew=D,this._clockService=U,this._userInfoJwtIssuer=j,this._mergeClaims=!!W,this._stateStore=q,this._validator=new $(this),this._metadataService=new G(this),this._extraQueryParams="object"===(void 0===Y?"undefined":r(Y))?Y:{},this._extraTokenParams="object"===(void 0===Z?"undefined":r(Z))?Z:{}}return e.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},i(e,[{key:"client_id",get:function(){return this._client_id},set:function(e){if(this._client_id)throw o.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=e}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(e){if(this._authority)throw o.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=e}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(l)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=l)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(e){this._metadata=e}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(e){this._metadataSeed=e}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(e){this._signingKeys=e}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(e){"object"===(void 0===e?"undefined":r(e))?this._extraQueryParams=e:this._extraQueryParams={}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(e){"object"===(void 0===e?"undefined":r(e))?this._extraTokenParams=e:this._extraTokenParams={}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebStorageStateStore=void 0;var r=n(0),i=n(1);t.WebStorageStateStore=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.prefix,r=void 0===n?"oidc.":n,o=t.store,s=void 0===o?i.Global.localStorage:o;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._store=s,this._prefix=r}return e.prototype.set=function(e,t){return r.Log.debug("WebStorageStateStore.set",e),e=this._prefix+e,this._store.setItem(e,t),Promise.resolve()},e.prototype.get=function(e){r.Log.debug("WebStorageStateStore.get",e),e=this._prefix+e;var t=this._store.getItem(e);return Promise.resolve(t)},e.prototype.remove=function(e){r.Log.debug("WebStorageStateStore.remove",e),e=this._prefix+e;var t=this._store.getItem(e);return this._store.removeItem(e),Promise.resolve(t)},e.prototype.getAllKeys=function(){r.Log.debug("WebStorageStateStore.getAllKeys");for(var e=[],t=0;t<this._store.length;t++){var n=this._store.key(t);0===n.indexOf(this._prefix)&&e.push(n.substr(this._prefix.length))}return Promise.resolve(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonService=void 0;var r=n(0),i=n(1);t.JsonService=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Global.XMLHttpRequest,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t&&Array.isArray(t)?this._contentTypes=t.slice():this._contentTypes=[],this._contentTypes.push("application/json"),r&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=n,this._jwtHandler=r}return e.prototype.getJson=function(e,t){var n=this;if(!e)throw r.Log.error("JsonService.getJson: No url passed"),new Error("url");return r.Log.debug("JsonService.getJson, url: ",e),new Promise((function(i,o){var s=new n._XMLHttpRequest;s.open("GET",e);var a=n._contentTypes,c=n._jwtHandler;s.onload=function(){if(r.Log.debug("JsonService.getJson: HTTP response received, status",s.status),200===s.status){var t=s.getResponseHeader("Content-Type");if(t){var n=a.find((function(e){if(t.startsWith(e))return!0}));if("application/jwt"==n)return void c(s).then(i,o);if(n)try{return void i(JSON.parse(s.responseText))}catch(e){return r.Log.error("JsonService.getJson: Error parsing JSON response",e.message),void o(e)}}o(Error("Invalid response Content-Type: "+t+", from URL: "+e))}else o(Error(s.statusText+" ("+s.status+")"))},s.onerror=function(){r.Log.error("JsonService.getJson: network error"),o(Error("Network Error"))},t&&(r.Log.debug("JsonService.getJson: token passed, setting Authorization header"),s.setRequestHeader("Authorization","Bearer "+t)),s.send()}))},e.prototype.postForm=function(e,t,n){var i=this;if(!e)throw r.Log.error("JsonService.postForm: No url passed"),new Error("url");return r.Log.debug("JsonService.postForm, url: ",e),new Promise((function(o,s){var a=new i._XMLHttpRequest;a.open("POST",e);var c=i._contentTypes;a.onload=function(){if(r.Log.debug("JsonService.postForm: HTTP response received, status",a.status),200!==a.status){if(400===a.status&&(n=a.getResponseHeader("Content-Type"))&&c.find((function(e){if(n.startsWith(e))return!0})))try{var t=JSON.parse(a.responseText);if(t&&t.error)return r.Log.error("JsonService.postForm: Error from server: ",t.error),void s(new Error(t.error))}catch(e){return r.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error(a.statusText+" ("+a.status+")"))}else{var n;if((n=a.getResponseHeader("Content-Type"))&&c.find((function(e){if(n.startsWith(e))return!0})))try{return void o(JSON.parse(a.responseText))}catch(e){return r.Log.error("JsonService.postForm: Error parsing JSON response",e.message),void s(e)}s(Error("Invalid response Content-Type: "+n+", from URL: "+e))}},a.onerror=function(){r.Log.error("JsonService.postForm: network error"),s(Error("Network Error"))};var u="";for(var l in t){var d=t[l];d&&(u.length>0&&(u+="&"),u+=encodeURIComponent(l),u+="=",u+=encodeURIComponent(d))}a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==n&&a.setRequestHeader("Authorization","Basic "+btoa(n)),a.send(u)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninRequest=void 0;var r=n(0),i=n(3),o=n(13);t.SigninRequest=function(){function e(t){var n=t.url,s=t.client_id,a=t.redirect_uri,c=t.response_type,u=t.scope,l=t.authority,d=t.data,p=t.prompt,f=t.display,h=t.max_age,g=t.ui_locales,m=t.id_token_hint,_=t.login_hint,v=t.acr_values,y=t.resource,S=t.response_mode,b=t.request,E=t.request_uri,w=t.extraQueryParams,T=t.request_type,I=t.client_secret,x=t.extraTokenParams,k=t.skipUserInfo;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw r.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!s)throw r.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!a)throw r.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!c)throw r.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!u)throw r.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!l)throw r.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var C=e.isOidc(c),A=e.isCode(c);S||(S=e.isCode(c)?"query":null),this.state=new o.SigninState({nonce:C,data:d,client_id:s,authority:l,redirect_uri:a,code_verifier:A,request_type:T,response_mode:S,client_secret:I,scope:u,extraTokenParams:x,skipUserInfo:k}),n=i.UrlUtility.addQueryParam(n,"client_id",s),n=i.UrlUtility.addQueryParam(n,"redirect_uri",a),n=i.UrlUtility.addQueryParam(n,"response_type",c),n=i.UrlUtility.addQueryParam(n,"scope",u),n=i.UrlUtility.addQueryParam(n,"state",this.state.id),C&&(n=i.UrlUtility.addQueryParam(n,"nonce",this.state.nonce)),A&&(n=i.UrlUtility.addQueryParam(n,"code_challenge",this.state.code_challenge),n=i.UrlUtility.addQueryParam(n,"code_challenge_method","S256"));var F={prompt:p,display:f,max_age:h,ui_locales:g,id_token_hint:m,login_hint:_,acr_values:v,resource:y,request:b,request_uri:E,response_mode:S};for(var R in F)F[R]&&(n=i.UrlUtility.addQueryParam(n,R,F[R]));for(var O in w)n=i.UrlUtility.addQueryParam(n,O,w[O]);this.url=n}return e.isOidc=function(e){return!!e.split(/\s+/g).filter((function(e){return"id_token"===e}))[0]},e.isOAuth=function(e){return!!e.split(/\s+/g).filter((function(e){return"token"===e}))[0]},e.isCode=function(e){return!!e.split(/\s+/g).filter((function(e){return"code"===e}))[0]},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(n(14));t.State=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.data,i=t.created,s=t.request_type;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._id=n||(0,o.default)(),this._data=r,this._created="number"==typeof i&&i>0?i:parseInt(Date.now()/1e3),this._request_type=s}return e.prototype.toStorageString=function(){return i.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},e.fromStorageString=function(t){return i.Log.debug("State.fromStorageString"),new e(JSON.parse(t))},e.clearStaleState=function(t,n){var r=Date.now()/1e3-n;return t.getAllKeys().then((function(n){i.Log.debug("State.clearStaleState: got keys",n);for(var o=[],s=function(s){var a=n[s];c=t.get(a).then((function(n){var o=!1;if(n)try{var s=e.fromStorageString(n);i.Log.debug("State.clearStaleState: got item from key: ",a,s.created),s.created<=r&&(o=!0)}catch(e){i.Log.error("State.clearStaleState: Error parsing state for key",a,e.message),o=!0}else i.Log.debug("State.clearStaleState: no item in storage for key: ",a),o=!0;if(o)return i.Log.debug("State.clearStaleState: removed item for key: ",a),t.remove(a)})),o.push(c)},a=0;a<n.length;a++){var c;s(a)}return i.Log.debug("State.clearStaleState: waiting on promise count:",o.length),Promise.all(o)}))},r(e,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OidcClient=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(5),s=n(12),a=n(8),c=n(34),u=n(35),l=n(36),d=n(13),p=n(9);t.OidcClient=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),t instanceof o.OidcClientSettings?this._settings=t:this._settings=new o.OidcClientSettings(t)}return e.prototype.createSigninRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.response_type,r=t.scope,o=t.redirect_uri,s=t.data,c=t.state,u=t.prompt,l=t.display,d=t.max_age,p=t.ui_locales,f=t.id_token_hint,h=t.login_hint,g=t.acr_values,m=t.resource,_=t.request,v=t.request_uri,y=t.response_mode,S=t.extraQueryParams,b=t.extraTokenParams,E=t.request_type,w=t.skipUserInfo,T=arguments[1];i.Log.debug("OidcClient.createSigninRequest");var I=this._settings.client_id;n=n||this._settings.response_type,r=r||this._settings.scope,o=o||this._settings.redirect_uri,u=u||this._settings.prompt,l=l||this._settings.display,d=d||this._settings.max_age,p=p||this._settings.ui_locales,g=g||this._settings.acr_values,m=m||this._settings.resource,y=y||this._settings.response_mode,S=S||this._settings.extraQueryParams,b=b||this._settings.extraTokenParams;var x=this._settings.authority;return a.SigninRequest.isCode(n)&&"code"!==n?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then((function(t){i.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",t);var k=new a.SigninRequest({url:t,client_id:I,redirect_uri:o,response_type:n,scope:r,data:s||c,authority:x,prompt:u,display:l,max_age:d,ui_locales:p,id_token_hint:f,login_hint:h,acr_values:g,resource:m,request:_,request_uri:v,extraQueryParams:S,extraTokenParams:b,request_type:E,response_mode:y,client_secret:e._settings.client_secret,skipUserInfo:w}),C=k.state;return(T=T||e._stateStore).set(C.id,C.toStorageString()).then((function(){return k}))}))},e.prototype.readSigninResponseState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSigninResponseState");var r="query"===this._settings.response_mode||!this._settings.response_mode&&a.SigninRequest.isCode(this._settings.response_type)?"?":"#",o=new c.SigninResponse(e,r);return o.state?(t=t||this._stateStore,(n?t.remove.bind(t):t.get.bind(t))(o.state).then((function(e){if(!e)throw i.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:d.SigninState.fromStorageString(e),response:o}}))):(i.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},e.prototype.processSigninResponse=function(e,t){var n=this;return i.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(e,t,!0).then((function(e){var t=e.state,r=e.response;return i.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),n._validator.validateSigninResponse(t,r)}))},e.prototype.createSignoutRequest=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id_token_hint,r=t.data,o=t.state,s=t.post_logout_redirect_uri,a=t.extraQueryParams,c=t.request_type,l=arguments[1];return i.Log.debug("OidcClient.createSignoutRequest"),s=s||this._settings.post_logout_redirect_uri,a=a||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then((function(t){if(!t)throw i.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");i.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",t);var d=new u.SignoutRequest({url:t,id_token_hint:n,post_logout_redirect_uri:s,data:r||o,extraQueryParams:a,request_type:c}),p=d.state;return p&&(i.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(l=l||e._stateStore).set(p.id,p.toStorageString())),d}))},e.prototype.readSignoutResponseState=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.Log.debug("OidcClient.readSignoutResponseState");var r=new l.SignoutResponse(e);if(!r.state)return i.Log.debug("OidcClient.readSignoutResponseState: No state in response"),r.error?(i.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",r.error),Promise.reject(new s.ErrorResponse(r))):Promise.resolve({state:void 0,response:r});var o=r.state;return t=t||this._stateStore,(n?t.remove.bind(t):t.get.bind(t))(o).then((function(e){if(!e)throw i.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:p.State.fromStorageString(e),response:r}}))},e.prototype.processSignoutResponse=function(e,t){var n=this;return i.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(e,t,!0).then((function(e){var t=e.state,r=e.response;return t?(i.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),n._validator.validateSignoutResponse(t,r)):(i.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),r)}))},e.prototype.clearStaleState=function(e){return i.Log.debug("OidcClient.clearStaleState"),e=e||this._stateStore,p.State.clearStaleState(e,this.settings.staleStateAge)},r(e,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenClient=void 0;var r=n(7),i=n(2),o=n(0);t.TokenClient=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw o.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new n,this._metadataService=new s(this._settings)}return e.prototype.exchangeCode=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"authorization_code",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret,t.redirect_uri=t.redirect_uri||this._settings.redirect_uri;var n=void 0,r=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.code?t.redirect_uri?t.code_verifier?t.client_id?t.client_secret||"client_secret_basic"!=r?("client_secret_basic"==r&&(n=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(r){return o.Log.debug("TokenClient.exchangeCode: Received token endpoint"),e._jsonService.postForm(r,t,n).then((function(e){return o.Log.debug("TokenClient.exchangeCode: response received"),e}))}))):(o.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(o.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(o.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(o.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},e.prototype.exchangeRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).grant_type=t.grant_type||"refresh_token",t.client_id=t.client_id||this._settings.client_id,t.client_secret=t.client_secret||this._settings.client_secret;var n=void 0,r=t._client_authentication||this._settings._client_authentication;return delete t._client_authentication,t.refresh_token?t.client_id?("client_secret_basic"==r&&(n=t.client_id+":"+t.client_secret,delete t.client_id,delete t.client_secret),this._metadataService.getTokenEndpoint(!1).then((function(r){return o.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),e._jsonService.postForm(r,t,n).then((function(e){return o.Log.debug("TokenClient.exchangeRefreshToken: response received"),e}))}))):(o.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(o.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorResponse=void 0;var r=n(0);t.ErrorResponse=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.error,o=n.error_description,s=n.error_uri,a=n.state,c=n.session_state;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),!i)throw r.Log.error("No error passed to ErrorResponse"),new Error("error");var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,o||i));return u.name="ErrorResponse",u.error=i,u.error_description=o,u.error_uri=s,u.state=a,u.session_state=c,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Error)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninState=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(9),s=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(n(14));t.SigninState=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.nonce,i=n.authority,o=n.client_id,c=n.redirect_uri,u=n.code_verifier,l=n.response_mode,d=n.client_secret,p=n.scope,f=n.extraTokenParams,h=n.skipUserInfo;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var g=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,arguments[0]));if(!0===r?g._nonce=(0,a.default)():r&&(g._nonce=r),!0===u?g._code_verifier=(0,a.default)()+(0,a.default)()+(0,a.default)():u&&(g._code_verifier=u),g.code_verifier){var m=s.JoseUtil.hashString(g.code_verifier,"SHA256");g._code_challenge=s.JoseUtil.hexToBase64Url(m)}return g._redirect_uri=c,g._authority=i,g._client_id=o,g._response_mode=l,g._client_secret=d,g._scope=p,g._extraTokenParams=f,g._skipUserInfo=h,g}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.toStorageString=function(){return i.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},t.fromStorageString=function(e){return i.Log.debug("SigninState.fromStorageString"),new t(JSON.parse(e))},r(t,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),t}(o.State)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return("undefined"!=r&&null!==r&&void 0!==r.getRandomValues?i:o)().replace(/-/g,"")};var r="undefined"!=typeof window?window.crypto||window.msCrypto:null;function i(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^r.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}function o(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^16*Math.random()>>e/4).toString(16)}))}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.User=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.User=function(){function e(t){var n=t.id_token,r=t.session_state,i=t.access_token,o=t.refresh_token,s=t.token_type,a=t.scope,c=t.profile,u=t.expires_at,l=t.state;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id_token=n,this.session_state=r,this.access_token=i,this.refresh_token=o,this.token_type=s,this.scope=a,this.profile=c,this.expires_at=u,this.state=l}return e.prototype.toStorageString=function(){return i.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},e.fromStorageString=function(t){return i.Log.debug("User.fromStorageString"),new e(JSON.parse(t))},r(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessTokenEvents=void 0;var r=n(0),i=n(46);t.AccessTokenEvents=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.accessTokenExpiringNotificationTime,r=void 0===n?60:n,o=t.accessTokenExpiringTimer,s=void 0===o?new i.Timer("Access token expiring"):o,a=t.accessTokenExpiredTimer,c=void 0===a?new i.Timer("Access token expired"):a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._accessTokenExpiringNotificationTime=r,this._accessTokenExpiring=s,this._accessTokenExpired=c}return e.prototype.load=function(e){if(e.access_token&&void 0!==e.expires_in){var t=e.expires_in;if(r.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",t),t>0){var n=t-this._accessTokenExpiringNotificationTime;n<=0&&(n=1),r.Log.debug("AccessTokenEvents.load: registering expiring timer in:",n),this._accessTokenExpiring.init(n)}else r.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var i=t+1;r.Log.debug("AccessTokenEvents.load: registering expired timer in:",i),this._accessTokenExpired.init(i)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.unload=function(){r.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},e.prototype.addAccessTokenExpiring=function(e){this._accessTokenExpiring.addHandler(e)},e.prototype.removeAccessTokenExpiring=function(e){this._accessTokenExpiring.removeHandler(e)},e.prototype.addAccessTokenExpired=function(e){this._accessTokenExpired.addHandler(e)},e.prototype.removeAccessTokenExpired=function(e){this._accessTokenExpired.removeHandler(e)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=void 0;var r=n(0);t.Event=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._callbacks=[]}return e.prototype.addHandler=function(e){this._callbacks.push(e)},e.prototype.removeHandler=function(e){var t=this._callbacks.findIndex((function(t){return t===e}));t>=0&&this._callbacks.splice(t,1)},e.prototype.raise=function(){r.Log.debug("Event: Raising event: "+this._name);for(var e=0;e<this._callbacks.length;e++){var t;(t=this._callbacks)[e].apply(t,arguments)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionMonitor=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(19),s=n(1);t.SessionMonitor=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CheckSessionIFrame,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Global.timer;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=t,this._CheckSessionIFrameCtor=r,this._timer=a,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then((function(e){e?n._start(e):n._settings.monitorAnonymousSession&&n._userManager.querySessionStatus().then((function(e){var t={session_state:e.session_state};e.sub&&e.sid&&(t.profile={sub:e.sub,sid:e.sid}),n._start(t)})).catch((function(e){i.Log.error("SessionMonitor ctor: error from querySessionStatus:",e.message)}))})).catch((function(e){i.Log.error("SessionMonitor ctor: error from getUser:",e.message)})))}return e.prototype._start=function(e){var t=this,n=e.session_state;n&&(e.profile?(this._sub=e.profile.sub,this._sid=e.profile.sid,i.Log.debug("SessionMonitor._start: session_state:",n,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,i.Log.debug("SessionMonitor._start: session_state:",n,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(n):this._metadataService.getCheckSessionIframe().then((function(e){if(e){i.Log.debug("SessionMonitor._start: Initializing check session iframe");var r=t._client_id,o=t._checkSessionInterval,s=t._stopCheckSessionOnError;t._checkSessionIFrame=new t._CheckSessionIFrameCtor(t._callback.bind(t),r,e,o,s),t._checkSessionIFrame.load().then((function(){t._checkSessionIFrame.start(n)}))}else i.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")})).catch((function(e){i.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",e.message)})))},e.prototype._stop=function(){var e=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(i.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var t=this._timer.setInterval((function(){e._timer.clearInterval(t),e._userManager.querySessionStatus().then((function(t){var n={session_state:t.session_state};t.sub&&t.sid&&(n.profile={sub:t.sub,sid:t.sid}),e._start(n)})).catch((function(e){i.Log.error("SessionMonitor: error from querySessionStatus:",e.message)}))}),1e3)},e.prototype._callback=function(){var e=this;this._userManager.querySessionStatus().then((function(t){var n=!0;t?t.sub===e._sub?(n=!1,e._checkSessionIFrame.start(t.session_state),t.sid===e._sid?i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",t.session_state):(i.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",t.session_state),e._userManager.events._raiseUserSessionChanged())):i.Log.debug("SessionMonitor._callback: Different subject signed into OP:",t.sub):i.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),n&&(e._sub?(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),e._userManager.events._raiseUserSignedOut()):(i.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),e._userManager.events._raiseUserSignedIn()))})).catch((function(t){e._sub&&(i.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",t.message),e._userManager.events._raiseUserSignedOut())}))},r(e,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckSessionIFrame=void 0;var r=n(0);t.CheckSessionIFrame=function(){function e(t,n,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._callback=t,this._client_id=n,this._url=r,this._interval=i||2e3,this._stopOnError=o;var s=r.indexOf("/",r.indexOf("//")+2);this._frame_origin=r.substr(0,s),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=r}return e.prototype.load=function(){var e=this;return new Promise((function(t){e._frame.onload=function(){t()},window.document.body.appendChild(e._frame),e._boundMessageEvent=e._message.bind(e),window.addEventListener("message",e._boundMessageEvent,!1)}))},e.prototype._message=function(e){e.origin===this._frame_origin&&e.source===this._frame.contentWindow&&("error"===e.data?(r.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===e.data?(r.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):r.Log.debug("CheckSessionIFrame: "+e.data+" message from check session op iframe"))},e.prototype.start=function(e){var t=this;if(this._session_state!==e){r.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=e;var n=function(){t._frame.contentWindow.postMessage(t._client_id+" "+t._session_state,t._frame_origin)};n(),this._timer=window.setInterval(n,this._interval)}},e.prototype.stop=function(){this._session_state=null,this._timer&&(r.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenRevocationClient=void 0;var r=n(0),i=n(2),o=n(1);t.TokenRevocationClient=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.XMLHttpRequest,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw r.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=t,this._XMLHttpRequestCtor=n,this._metadataService=new s(this._settings)}return e.prototype.revoke=function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!e)throw r.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if("access_token"!==i&&"refresh_token"!=i)throw r.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then((function(o){if(o){r.Log.debug("TokenRevocationClient.revoke: Revoking "+i);var s=n._settings.client_id,a=n._settings.client_secret;return n._revoke(o,s,a,e,i)}if(t)throw r.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")}))},e.prototype._revoke=function(e,t,n,i,o){var s=this;return new Promise((function(a,c){var u=new s._XMLHttpRequestCtor;u.open("POST",e),u.onload=function(){r.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",u.status),200===u.status?a():c(Error(u.statusText+" ("+u.status+")"))},u.onerror=function(){r.Log.debug("TokenRevocationClient.revoke: Network Error."),c("Network Error")};var l="client_id="+encodeURIComponent(t);n&&(l+="&client_secret="+encodeURIComponent(n)),l+="&token_type_hint="+encodeURIComponent(o),l+="&token="+encodeURIComponent(i),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(l)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.CordovaPopupWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t})),this.features=t.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=t.popupWindowTarget||"_blank",this.redirect_uri=t.startUrl,i.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return e.prototype._isInAppBrowserInstalled=function(e){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some((function(t){return e.hasOwnProperty(t)}))},e.prototype.navigate=function(e){if(e&&e.url){if(!window.cordova)return this._error("cordova is undefined");var t=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(t))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(e.url,this.target,this.features),this._popup?(i.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},e.prototype._loadStartCallback=function(e){0===e.url.indexOf(this.redirect_uri)&&this._success({url:e.url})},e.prototype._exitCallback=function(e){this._error(e)},e.prototype._success=function(e){this._cleanup(),i.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._popup&&(i.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},r(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n(10),o=n(5),s=n(6),a=n(37),c=n(38),u=n(16),l=n(2),d=n(48),p=n(49),f=n(19),h=n(20),g=n(18),m=n(1),_=n(15),v=n(50);t.default={Version:v.Version,Log:r.Log,OidcClient:i.OidcClient,OidcClientSettings:o.OidcClientSettings,WebStorageStateStore:s.WebStorageStateStore,InMemoryWebStorage:a.InMemoryWebStorage,UserManager:c.UserManager,AccessTokenEvents:u.AccessTokenEvents,MetadataService:l.MetadataService,CordovaPopupNavigator:d.CordovaPopupNavigator,CordovaIFrameNavigator:p.CordovaIFrameNavigator,CheckSessionIFrame:f.CheckSessionIFrame,TokenRevocationClient:h.TokenRevocationClient,SessionMonitor:g.SessionMonitor,Global:m.Global,User:_.User},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClockService=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseValidator=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(0),o=n(2),s=n(25),a=n(11),c=n(12),u=n(4),l=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];t.ResponseValidator=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.MetadataService,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UserInfoService,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.JoseUtil,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TokenClient;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw i.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=t,this._metadataService=new n(this._settings),this._userInfoService=new r(this._settings),this._joseUtil=c,this._tokenClient=new l(this._settings)}return e.prototype.validateSigninResponse=function(e,t){var n=this;return i.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: state processed"),n._validateTokens(e,t).then((function(t){return i.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),n._processClaims(e,t).then((function(e){return i.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),e}))}))}))},e.prototype.validateSignoutResponse=function(e,t){return e.id!==t.state?(i.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(i.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",t.error),Promise.reject(new c.ErrorResponse(t))):Promise.resolve(t))},e.prototype._processSigninParams=function(e,t){if(e.id!==t.state)return i.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!e.client_id)return i.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!e.authority)return i.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==e.authority)return i.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=e.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==e.client_id)return i.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=e.client_id;return i.Log.debug("ResponseValidator._processSigninParams: state validated"),t.state=e.data,t.error?(i.Log.warn("ResponseValidator._processSigninParams: Response was error",t.error),Promise.reject(new c.ErrorResponse(t))):e.nonce&&!t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!e.nonce&&t.id_token?(i.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):e.code_verifier&&!t.code?(i.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!e.code_verifier&&t.code?(i.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(t.scope||(t.scope=e.scope),Promise.resolve(t))},e.prototype._processClaims=function(e,t){var n=this;if(t.isOpenIdConnect){if(i.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),t.profile=this._filterProtocolClaims(t.profile),!0!==e.skipUserInfo&&this._settings.loadUserInfo&&t.access_token)return i.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(t.access_token).then((function(e){return i.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),e.sub!==t.profile.sub?(i.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(t.profile=n._mergeClaims(t.profile,e),i.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",t.profile),t)}));i.Log.debug("ResponseValidator._processClaims: not loading user info")}else i.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(t)},e.prototype._mergeClaims=function(e,t){var n=Object.assign({},e);for(var i in t){var o=t[i];Array.isArray(o)||(o=[o]);for(var s=0;s<o.length;s++){var a=o[s];n[i]?Array.isArray(n[i])?n[i].indexOf(a)<0&&n[i].push(a):n[i]!==a&&("object"===(void 0===a?"undefined":r(a))&&this._settings.mergeClaims?n[i]=this._mergeClaims(n[i],a):n[i]=[n[i],a]):n[i]=a}}return n},e.prototype._filterProtocolClaims=function(e){i.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",e);var t=Object.assign({},e);return this._settings._filterProtocolClaims?(l.forEach((function(e){delete t[e]})),i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",t)):i.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),t},e.prototype._validateTokens=function(e,t){return t.code?(i.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(e,t)):t.id_token?t.access_token?(i.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(e,t)):(i.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(t))},e.prototype._processCode=function(e,t){var n=this,o={client_id:e.client_id,client_secret:e.client_secret,code:t.code,redirect_uri:e.redirect_uri,code_verifier:e.code_verifier};return e.extraTokenParams&&"object"===r(e.extraTokenParams)&&Object.assign(o,e.extraTokenParams),this._tokenClient.exchangeCode(o).then((function(r){for(var o in r)t[o]=r[o];return t.id_token?(i.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),n._validateIdTokenAttributes(e,t)):(i.Log.debug("ResponseValidator._processCode: token response successful, returning response"),t)}))},e.prototype._validateIdTokenAttributes=function(e,t){var n=this;return this._metadataService.getIssuer().then((function(r){var o=e.client_id,s=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",s),n._settings.getEpochTime().then((function(a){return n._joseUtil.validateJwtAttributes(t.id_token,r,o,s,a).then((function(n){return e.nonce&&e.nonce!==n.nonce?(i.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):n.sub?(t.profile=n,t):(i.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))}))},e.prototype._validateIdTokenAndAccessToken=function(e,t){var n=this;return this._validateIdToken(e,t).then((function(e){return n._validateAccessToken(e)}))},e.prototype._getSigningKeyForJwt=function(e){var t=this;return this._metadataService.getSigningKeys().then((function(n){var r=e.header.kid;if(!n)return i.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));i.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var o=void 0;if(r)o=n.filter((function(e){return e.kid===r}))[0];else{if((n=t._filterByAlg(n,e.header.alg)).length>1)return i.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));o=n[0]}return Promise.resolve(o)}))},e.prototype._getSigningKeyForJwtWithSingleRetry=function(e){var t=this;return this._getSigningKeyForJwt(e).then((function(n){return n?Promise.resolve(n):(t._metadataService.resetSigningKeys(),t._getSigningKeyForJwt(e))}))},e.prototype._validateIdToken=function(e,t){var n=this;if(!e.nonce)return i.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var r=this._joseUtil.parseJwt(t.id_token);return r&&r.header&&r.payload?e.nonce!==r.payload.nonce?(i.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then((function(o){return i.Log.debug("ResponseValidator._validateIdToken: Received issuer"),n._getSigningKeyForJwtWithSingleRetry(r).then((function(s){if(!s)return i.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var a=e.client_id,c=n._settings.clockSkew;return i.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",c),n._joseUtil.validateJwt(t.id_token,s,o,a,c).then((function(){return i.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),r.payload.sub?(t.profile=r.payload,t):(i.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))}))}))})):(i.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",r),Promise.reject(new Error("Failed to parse id_token")))},e.prototype._filterByAlg=function(e,t){var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return i.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",t),[];n="EC"}return i.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(e){return e.kty===n})),i.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",n,e.length),e},e.prototype._validateAccessToken=function(e){if(!e.profile)return i.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!e.profile.at_hash)return i.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!e.id_token)return i.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var t=this._joseUtil.parseJwt(e.id_token);if(!t||!t.header)return i.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",t),Promise.reject(new Error("Failed to parse id_token"));var n=t.header.alg;if(!n||5!==n.length)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n),Promise.reject(new Error("Unsupported alg: "+n));var r=n.substr(2,3);if(!r)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,r),Promise.reject(new Error("Unsupported alg: "+n));if(256!==(r=parseInt(r))&&384!==r&&512!==r)return i.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",n,r),Promise.reject(new Error("Unsupported alg: "+n));var o="sha"+r,s=this._joseUtil.hashString(e.access_token,o);if(!s)return i.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",o),Promise.reject(new Error("Failed to validate at_hash"));var a=s.substr(0,s.length/2),c=this._joseUtil.hexToBase64Url(a);return c!==e.profile.at_hash?(i.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",c,e.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(i.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(e))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserInfoService=void 0;var r=n(7),i=n(2),o=n(0),s=n(4);t.UserInfoService=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.JsonService,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.MetadataService,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.JoseUtil;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw o.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=t,this._jsonService=new n(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new a(this._settings),this._joseUtil=c}return e.prototype.getClaims=function(e){var t=this;return e?this._metadataService.getUserInfoEndpoint().then((function(n){return o.Log.debug("UserInfoService.getClaims: received userinfo url",n),t._jsonService.getJson(n,e).then((function(e){return o.Log.debug("UserInfoService.getClaims: claims received",e),e}))})):(o.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},e.prototype._getClaimsFromJwt=function e(t){var n=this;try{var r=this._joseUtil.parseJwt(t.responseText);if(!r||!r.header||!r.payload)return o.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",r),Promise.reject(new Error("Failed to parse id_token"));var i=r.header.kid,s=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":s=this._metadataService.getIssuer();break;case"ANY":s=Promise.resolve(r.payload.iss);break;default:s=Promise.resolve(this._settings.userInfoJwtIssuer)}return s.then((function(e){return o.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+e),n._metadataService.getSigningKeys().then((function(s){if(!s)return o.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));o.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var a=void 0;if(i)a=s.filter((function(e){return e.kid===i}))[0];else{if((s=n._filterByAlg(s,r.header.alg)).length>1)return o.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));a=s[0]}if(!a)return o.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var c=n._settings.client_id,u=n._settings.clockSkew;return o.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",u),n._joseUtil.validateJwt(t.responseText,a,e,c,u,void 0,!0).then((function(){return o.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),r.payload}))}))}))}catch(e){return o.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",e.message),void reject(e)}},e.prototype._filterByAlg=function(e,t){var n=null;if(t.startsWith("RS"))n="RSA";else if(t.startsWith("PS"))n="PS";else{if(!t.startsWith("ES"))return o.Log.debug("UserInfoService._filterByAlg: alg not supported: ",t),[];n="EC"}return o.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",n),e=e.filter((function(e){return e.kty===n})),o.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",n,e.length),e},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedSigningAlgs=t.b64tohex=t.hextob64u=t.crypto=t.X509=t.KeyUtil=t.jws=void 0;var r=n(27);t.jws=r.jws,t.KeyUtil=r.KEYUTIL,t.X509=r.X509,t.crypto=r.crypto,t.hextob64u=r.hextob64u,t.b64tohex=r.b64tohex,t.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={userAgent:!1},i={};if(void 0===o)var o={};o.lang={extend:function(e,t,n){if(!t||!e)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var i=function(){};if(i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t),n){var o;for(o in n)e.prototype[o]=n[o];var s=function(){},a=["toString","valueOf"];try{/MSIE/.test(r.userAgent)&&(s=function(e,t){for(o=0;o<a.length;o+=1){var n=a[o],r=t[n];"function"==typeof r&&r!=Object.prototype[n]&&(e[n]=r)}})}catch(e){}s(e.prototype,n)}}};var s,a,c,u,l,d,p,f,h,g,m,_=_||(s=Math,c=(a={}).lib={},u=c.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=c.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||p).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=s<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),d=a.enc={},p=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},f=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},g=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,n=t.words,r=t.sigBytes,i=this.blockSize,o=r/(4*i),a=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*i,c=s.min(4*a,r);if(a){for(var u=0;u<a;u+=i)this._doProcessBlock(n,u);var d=n.splice(0,a);t.sigBytes-=c}return new l.init(d,c)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),c.Hasher=g.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),m=a.algo={},a);!function(){var e,t=(e=_).lib,n=t.Base,r=t.WordArray;(e=e.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),e.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var o=e[i];n.push(o.high),n.push(o.low)}return r.create(n,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),function(){var e=_,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var o=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)e.push(r.charAt(o>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(n=i);for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(e.charAt(s-1))<<s%4*2,c=r.indexOf(e.charAt(s))>>>6-s%4*2;i[o>>>2]|=(a|c)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){for(var t=_,n=(i=t.lib).WordArray,r=i.Hasher,i=t.algo,o=[],s=[],a=function(e){return 4294967296*(e-(0|e))|0},c=2,u=0;64>u;){var l;e:{l=c;for(var d=e.sqrt(l),p=2;p<=d;p++)if(!(l%p)){l=!1;break e}l=!0}l&&(8>u&&(o[u]=a(e.pow(c,.5))),s[u]=a(e.pow(c,1/3)),u++),c++}var f=[];i=i.SHA256=r.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],u=n[5],l=n[6],d=n[7],p=0;64>p;p++){if(16>p)f[p]=0|e[t+p];else{var h=f[p-15],g=f[p-2];f[p]=((h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3)+f[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[p-16]}h=d+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+s[p]+f[p],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),d=l,l=u,u=c,c=a+h|0,a=o,o=i,i=r,r=h+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+l|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA256=r._createHelper(i),t.HmacSHA256=r._createHmacHelper(i)}(Math),function(){function e(){return r.create.apply(r,arguments)}for(var t=_,n=t.lib.Hasher,r=(o=t.x64).Word,i=o.WordArray,o=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],a=[],c=0;80>c;c++)a[c]=e();o=o.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=(d=this._hash.words)[0],r=d[1],i=d[2],o=d[3],c=d[4],u=d[5],l=d[6],d=d[7],p=n.high,f=n.low,h=r.high,g=r.low,m=i.high,_=i.low,v=o.high,y=o.low,S=c.high,b=c.low,E=u.high,w=u.low,T=l.high,I=l.low,x=d.high,k=d.low,C=p,A=f,F=h,R=g,O=m,P=_,M=v,N=y,D=S,L=b,U=E,B=w,j=T,H=I,W=x,V=k,q=0;80>q;q++){var K=a[q];if(16>q)var $=K.high=0|e[t+2*q],z=K.low=0|e[t+2*q+1];else{$=((z=($=a[q-15]).high)>>>1|(G=$.low)<<31)^(z>>>8|G<<24)^z>>>7;var G=(G>>>1|z<<31)^(G>>>8|z<<24)^(G>>>7|z<<25),J=((z=(J=a[q-2]).high)>>>19|(Y=J.low)<<13)^(z<<3|Y>>>29)^z>>>6,Y=(Y>>>19|z<<13)^(Y<<3|z>>>29)^(Y>>>6|z<<26),X=(z=a[q-7]).high,Z=(Q=a[q-16]).high,Q=Q.low;$=($=($=$+X+((z=G+z.low)>>>0<G>>>0?1:0))+J+((z+=Y)>>>0<Y>>>0?1:0))+Z+((z+=Q)>>>0<Q>>>0?1:0),K.high=$,K.low=z}X=D&U^~D&j,Q=L&B^~L&H,K=C&F^C&O^F&O;var ee=A&R^A&P^R&P,te=(G=(C>>>28|A<<4)^(C<<30|A>>>2)^(C<<25|A>>>7),J=(A>>>28|C<<4)^(A<<30|C>>>2)^(A<<25|C>>>7),(Y=s[q]).high),ne=Y.low;Z=W+((D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9))+((Y=V+((L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9)))>>>0<V>>>0?1:0),W=j,V=H,j=U,H=B,U=D,B=L,D=M+(Z=(Z=(Z=Z+X+((Y+=Q)>>>0<Q>>>0?1:0))+te+((Y+=ne)>>>0<ne>>>0?1:0))+$+((Y+=z)>>>0<z>>>0?1:0))+((L=N+Y|0)>>>0<N>>>0?1:0)|0,M=O,N=P,O=F,P=R,F=C,R=A,C=Z+(K=G+K+((z=J+ee)>>>0<J>>>0?1:0))+((A=Y+z|0)>>>0<Y>>>0?1:0)|0}f=n.low=f+A,n.high=p+C+(f>>>0<A>>>0?1:0),g=r.low=g+R,r.high=h+F+(g>>>0<R>>>0?1:0),_=i.low=_+P,i.high=m+O+(_>>>0<P>>>0?1:0),y=o.low=y+N,o.high=v+M+(y>>>0<N>>>0?1:0),b=c.low=b+L,c.high=S+D+(b>>>0<L>>>0?1:0),w=u.low=w+B,u.high=E+U+(w>>>0<B>>>0?1:0),I=l.low=I+H,l.high=T+j+(I>>>0<H>>>0?1:0),k=d.low=k+V,d.high=x+W+(k>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=n._createHelper(o),t.HmacSHA512=n._createHmacHelper(o)}(),function(){var e=_,t=(i=e.x64).Word,n=i.WordArray,r=(i=e.algo).SHA512,i=i.SHA384=r.extend({_doReset:function(){this._hash=new n.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(i),e.HmacSHA384=r._createHmacHelper(i)}();var v,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function S(e){var t,n,r="";for(t=0;t+3<=e.length;t+=3)n=parseInt(e.substring(t,t+3),16),r+=y.charAt(n>>6)+y.charAt(63&n);for(t+1==e.length?(n=parseInt(e.substring(t,t+1),16),r+=y.charAt(n<<2)):t+2==e.length&&(n=parseInt(e.substring(t,t+2),16),r+=y.charAt(n>>2)+y.charAt((3&n)<<4));(3&r.length)>0;)r+="=";return r}function b(e){var t,n,r,i="",o=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)(r=y.indexOf(e.charAt(t)))<0||(0==o?(i+=C(r>>2),n=3&r,o=1):1==o?(i+=C(n<<2|r>>4),n=15&r,o=2):2==o?(i+=C(n),i+=C(r>>2),n=3&r,o=3):(i+=C(n<<2|r>>4),i+=C(15&r),o=0));return 1==o&&(i+=C(n<<2)),i}function E(e){var t,n=b(e),r=new Array;for(t=0;2*t<n.length;++t)r[t]=parseInt(n.substring(2*t,2*t+2),16);return r}function w(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function T(){return new w(null)}"Microsoft Internet Explorer"==r.appName?(w.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this[e],u=this[e++]>>15,l=a*c+u*s;i=((c=s*c+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*u+(i>>>30),n[r++]=1073741823&c}return i},v=30):"Netscape"!=r.appName?(w.prototype.am=function(e,t,n,r,i,o){for(;--o>=0;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},v=26):(w.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this[e],u=this[e++]>>14,l=a*c+u*s;i=((c=s*c+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*u,n[r++]=268435455&c}return i},v=28),w.prototype.DB=v,w.prototype.DM=(1<<v)-1,w.prototype.DV=1<<v,w.prototype.FV=Math.pow(2,52),w.prototype.F1=52-v,w.prototype.F2=2*v-52;var I,x,k=new Array;for(I="0".charCodeAt(0),x=0;x<=9;++x)k[I++]=x;for(I="a".charCodeAt(0),x=10;x<36;++x)k[I++]=x;for(I="A".charCodeAt(0),x=10;x<36;++x)k[I++]=x;function C(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function A(e,t){var n=k[e.charCodeAt(t)];return null==n?-1:n}function F(e){var t=T();return t.fromInt(e),t}function R(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function O(e){this.m=e}function P(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function M(e,t){return e&t}function N(e,t){return e|t}function D(e,t){return e^t}function L(e,t){return e&~t}function U(e){if(0==e)return-1;var t=0;return!(65535&e)&&(e>>=16,t+=16),!(255&e)&&(e>>=8,t+=8),!(15&e)&&(e>>=4,t+=4),!(3&e)&&(e>>=2,t+=2),!(1&e)&&++t,t}function B(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function j(){}function H(e){return e}function W(e){this.r2=T(),this.q3=T(),w.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}O.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},O.prototype.revert=function(e){return e},O.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},O.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},O.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},P.prototype.convert=function(e){var t=T();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(w.ZERO)>0&&this.m.subTo(t,t),t},P.prototype.revert=function(e){var t=T();return e.copyTo(t),this.reduce(t),t},P.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},P.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},P.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},w.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},w.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},w.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;--r>=0;){var s=8==n?255&e[r]:A(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&!!(128&e[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&w.ZERO.subTo(this,this)},w.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},w.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},w.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},w.prototype.lShiftTo=function(e,t){var n,r=e%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)t[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)t[n]=0;t[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},w.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;r>0&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},w.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()},w.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&w.ZERO.subTo(t,t)},w.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},w.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=T());var o=T(),s=this.s,a=e.s,c=this.DB-R(r[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,l=o[u-1];if(0!=l){var d=l*(1<<this.F1)+(u>1?o[u-2]>>this.F2:0),p=this.FV/d,f=(1<<this.F1)/d,h=1<<this.F2,g=n.t,m=g-u,_=null==t?T():t;for(o.dlShiftTo(m,_),n.compareTo(_)>=0&&(n[n.t++]=1,n.subTo(_,n)),w.ONE.dlShiftTo(u,_),_.subTo(o,o);o.t<u;)o[o.t++]=0;for(;--m>=0;){var v=n[--g]==l?this.DM:Math.floor(n[g]*p+(n[g-1]+h)*f);if((n[g]+=o.am(0,v,n,m,0,u))<v)for(o.dlShiftTo(m,_),n.subTo(_,n);n[g]<--v;)n.subTo(_,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&w.ZERO.subTo(t,t)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),s<0&&w.ZERO.subTo(n,n)}}},w.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},w.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},w.prototype.exp=function(e,t){if(e>4294967295||e<1)return w.ONE;var n=T(),r=T(),i=t.convert(this),o=R(e)-1;for(i.copyTo(n);--o>=0;)if(t.sqrTo(n,r),(e&1<<o)>0)t.mulTo(r,i,n);else{var s=n;n=r,r=s}return t.revert(n)},w.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=C(n));s>=0;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=C(n));return i?o:"0"},w.prototype.negate=function(){var e=T();return w.ZERO.subTo(this,e),e},w.prototype.abs=function(){return this.s<0?this.negate():this},w.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},w.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+R(this[this.t-1]^this.s&this.DM)},w.prototype.mod=function(e){var t=T();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(w.ZERO)>0&&e.subTo(t,t),t},w.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new O(t):new P(t),this.exp(e,n)},w.ZERO=F(0),w.ONE=F(1),j.prototype.convert=H,j.prototype.revert=H,j.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n)},j.prototype.sqrTo=function(e,t){e.squareTo(t)},W.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=T();return e.copyTo(t),this.reduce(t),t},W.prototype.revert=function(e){return e},W.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},W.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},W.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var V,q,K,$=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],z=(1<<26)/$[$.length-1];function G(){this.i=0,this.j=0,this.S=new Array}function J(){!function(e){q[K++]^=255&e,q[K++]^=e>>8&255,q[K++]^=e>>16&255,q[K++]^=e>>24&255,K>=256&&(K-=256)}((new Date).getTime())}if(w.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},w.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=F(n),i=T(),o=T(),s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(e)+s},w.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,o=0,s=0,a=0;a<e.length;++a){var c=A(e,a);c<0?"-"==e.charAt(a)&&0==this.signum()&&(i=!0):(s=t*s+c,++o>=n&&(this.dMultiply(r),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&w.ZERO.subTo(this,this)},w.prototype.fromNumber=function(e,t,n){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(w.ONE.shiftLeft(e-1),N,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(w.ONE.shiftLeft(e-1),this);else{var r=new Array,i=7&e;r.length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},w.prototype.bitwiseTo=function(e,t,n){var r,i,o=Math.min(e.t,this.t);for(r=0;r<o;++r)n[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=o;r<this.t;++r)n[r]=t(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<e.t;++r)n[r]=t(i,e[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()},w.prototype.changeBit=function(e,t){var n=w.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n},w.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},w.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},w.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},w.prototype.multiplyLowerTo=function(e,t,n){var r,i=Math.min(this.t+e.t,t);for(n.s=0,n.t=i;i>0;)n[--i]=0;for(r=n.t-this.t;i<r;++i)n[i+this.t]=this.am(0,e[i],n,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],n,i,0,t-i);n.clamp()},w.prototype.multiplyUpperTo=function(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n[this.t+r-t]=this.am(t-r,e[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)},w.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(0==t)n=this[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this[r])%e;return n},w.prototype.millerRabin=function(e){var t=this.subtract(w.ONE),n=t.getLowestSetBit();if(n<=0)return!1;var r=t.shiftRight(n);(e=e+1>>1)>$.length&&(e=$.length);for(var i=T(),o=0;o<e;++o){i.fromInt($[Math.floor(Math.random()*$.length)]);var s=i.modPow(r,this);if(0!=s.compareTo(w.ONE)&&0!=s.compareTo(t)){for(var a=1;a++<n&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(w.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},w.prototype.clone=function(){var e=T();return this.copyTo(e),e},w.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},w.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},w.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},w.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},w.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var n,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),!!(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t},w.prototype.equals=function(e){return 0==this.compareTo(e)},w.prototype.min=function(e){return this.compareTo(e)<0?this:e},w.prototype.max=function(e){return this.compareTo(e)>0?this:e},w.prototype.and=function(e){var t=T();return this.bitwiseTo(e,M,t),t},w.prototype.or=function(e){var t=T();return this.bitwiseTo(e,N,t),t},w.prototype.xor=function(e){var t=T();return this.bitwiseTo(e,D,t),t},w.prototype.andNot=function(e){var t=T();return this.bitwiseTo(e,L,t),t},w.prototype.not=function(){for(var e=T(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},w.prototype.shiftLeft=function(e){var t=T();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},w.prototype.shiftRight=function(e){var t=T();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},w.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+U(this[e]);return this.s<0?this.t*this.DB:-1},w.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=B(this[n]^t);return e},w.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},w.prototype.setBit=function(e){return this.changeBit(e,N)},w.prototype.clearBit=function(e){return this.changeBit(e,L)},w.prototype.flipBit=function(e){return this.changeBit(e,D)},w.prototype.add=function(e){var t=T();return this.addTo(e,t),t},w.prototype.subtract=function(e){var t=T();return this.subTo(e,t),t},w.prototype.multiply=function(e){var t=T();return this.multiplyTo(e,t),t},w.prototype.divide=function(e){var t=T();return this.divRemTo(e,t,null),t},w.prototype.remainder=function(e){var t=T();return this.divRemTo(e,null,t),t},w.prototype.divideAndRemainder=function(e){var t=T(),n=T();return this.divRemTo(e,t,n),new Array(t,n)},w.prototype.modPow=function(e,t){var n,r,i=e.bitLength(),o=F(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new O(t):t.isEven()?new W(t):new P(t);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=r.convert(this),n>1){var l=T();for(r.sqrTo(s[1],l);a<=u;)s[a]=T(),r.mulTo(l,s[a-2],s[a]),a+=2}var d,p,f=e.t-1,h=!0,g=T();for(i=R(e[f])-1;f>=0;){for(i>=c?d=e[f]>>i-c&u:(d=(e[f]&(1<<i+1)-1)<<c-i,f>0&&(d|=e[f-1]>>this.DB+i-c)),a=n;!(1&d);)d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--f),h)s[d].copyTo(o),h=!1;else{for(;a>1;)r.sqrTo(o,g),r.sqrTo(g,o),a-=2;a>0?r.sqrTo(o,g):(p=o,o=g,g=p),r.mulTo(g,s[d],o)}for(;f>=0&&!(e[f]&1<<i);)r.sqrTo(o,g),p=o,o=g,g=p,--i<0&&(i=this.DB-1,--f)}return r.revert(o)},w.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return w.ZERO;for(var n=e.clone(),r=this.clone(),i=F(1),o=F(0),s=F(0),a=F(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(s,i),o.subTo(a,o)):(r.subTo(n,r),t&&s.subTo(i,s),a.subTo(o,a))}return 0!=r.compareTo(w.ONE)?w.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},w.prototype.pow=function(e){return this.exp(e,new j)},w.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),n.rShiftTo(o,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n},w.prototype.isProbablePrime=function(e){var t,n=this.abs();if(1==n.t&&n[0]<=$[$.length-1]){for(t=0;t<$.length;++t)if(n[0]==$[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<$.length;){for(var r=$[t],i=t+1;i<$.length&&r<z;)r*=$[i++];for(r=n.modInt(r);t<i;)if(r%$[t++]==0)return!1}return n.millerRabin(e)},w.prototype.square=function(){var e=T();return this.squareTo(e),e},G.prototype.init=function(e){var t,n,r;for(t=0;t<256;++t)this.S[t]=t;for(n=0,t=0;t<256;++t)n=n+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[n],this.S[n]=r;this.i=0,this.j=0},G.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]},null==q){var Y;if(q=new Array,K=0,void 0!==i&&(void 0!==i.crypto||void 0!==i.msCrypto)){var X=i.crypto||i.msCrypto;if(X.getRandomValues){var Z=new Uint8Array(32);for(X.getRandomValues(Z),Y=0;Y<32;++Y)q[K++]=Z[Y]}else if("Netscape"==r.appName&&r.appVersion<"5"){var Q=i.crypto.random(32);for(Y=0;Y<Q.length;++Y)q[K++]=255&Q.charCodeAt(Y)}}for(;K<256;)Y=Math.floor(65536*Math.random()),q[K++]=Y>>>8,q[K++]=255&Y;K=0,J()}function ee(){if(null==V){for(J(),(V=new G).init(q),K=0;K<q.length;++K)q[K]=0;K=0}return V.next()}function te(){}function ne(e,t){return new w(e,t)}function re(e,t,n){for(var r="",i=0;r.length<t;)r+=n(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function ie(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function oe(e,t){this.x=t,this.q=e}function se(e,t,n,r){this.curve=e,this.x=t,this.y=n,this.z=null==r?w.ONE:r,this.zinv=null}function ae(e,t,n){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(n),this.infinity=new se(this,null,null)}te.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=ee()},ie.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},ie.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=ne(e,16),this.e=parseInt(t,16)}},ie.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var n=new Array,r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=63&i|128,n[--t]=i>>6|192):(n[--t]=63&i|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;for(var o=new te,s=new Array;t>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--t]=s[0]}return n[--t]=2,n[--t]=0,new w(n)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var n=this.doPublic(t);if(null==n)return null;var r=n.toString(16);return 1&r.length?"0"+r:r},ie.prototype.encryptOAEP=function(e,t,n){var r=function(e,t,n,r){var i=ue.crypto.MessageDigest,o=ue.crypto.Util,s=null;if(n||(n="sha1"),"string"==typeof n&&(s=i.getCanonicalAlgName(n),r=i.getHashLength(s),n=function(e){return we(o.hashHex(Te(e),s))}),e.length+2*r+2>t)throw"Message too long for RSA";var a,c="";for(a=0;a<t-e.length-2*r-2;a+=1)c+="\0";var u=n("")+c+""+e,l=new Array(r);(new te).nextBytes(l);var d=re(l,u.length,n),p=[];for(a=0;a<u.length;a+=1)p[a]=u.charCodeAt(a)^d.charCodeAt(a);var f=re(p,l.length,n),h=[0];for(a=0;a<l.length;a+=1)h[a+1]=l[a]^f.charCodeAt(a);return new w(h.concat(p))}(e,this.n.bitLength()+7>>3,t,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var o=i.toString(16);return 1&o.length?"0"+o:o},ie.prototype.type="RSA",oe.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},oe.prototype.toBigInteger=function(){return this.x},oe.prototype.negate=function(){return new oe(this.q,this.x.negate().mod(this.q))},oe.prototype.add=function(e){return new oe(this.q,this.x.add(e.toBigInteger()).mod(this.q))},oe.prototype.subtract=function(e){return new oe(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},oe.prototype.multiply=function(e){return new oe(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},oe.prototype.square=function(){return new oe(this.q,this.x.square().mod(this.q))},oe.prototype.divide=function(e){return new oe(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},se.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},se.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},se.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(w.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(w.ZERO))},se.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(w.ZERO)&&!this.y.toBigInteger().equals(w.ZERO)},se.prototype.negate=function(){return new se(this.curve,this.x,this.y.negate(),this.z)},se.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),n=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(w.ZERO.equals(n))return w.ZERO.equals(t)?this.twice():this.curve.getInfinity();var r=new w("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(e.x.toBigInteger(),e.y.toBigInteger(),n.square()),a=s.multiply(n),c=i.multiply(s),u=t.square().multiply(this.z),l=u.subtract(c.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.q),d=c.multiply(r).multiply(t).subtract(o.multiply(a)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(a)).mod(this.curve.q),p=a.multiply(this.z).multiply(e.z).mod(this.curve.q);return new se(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(d),p)},se.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new w("3"),t=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=t.square().multiply(e);w.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o)));var a=(s=s.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),c=s.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),u=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new se(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(c),u)},se.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new w("3")),i=this.negate(),o=this,s=this.curve.q.subtract(e),a=s.multiply(new w("3")),c=new se(this.curve,this.x,this.y),u=c.negate();for(t=r.bitLength()-2;t>0;--t){o=o.twice();var l=r.testBit(t);l!=n.testBit(t)&&(o=o.add(l?this:i))}for(t=a.bitLength()-2;t>0;--t){c=c.twice();var d=a.testBit(t);d!=s.testBit(t)&&(c=c.add(d?c:u))}return o},se.prototype.multiplyTwo=function(e,t,n){var r;r=e.bitLength()>n.bitLength()?e.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);r>=0;)i=i.twice(),e.testBit(r)?i=n.testBit(r)?i.add(o):i.add(this):n.testBit(r)&&(i=i.add(t)),--r;return i},ae.prototype.getQ=function(){return this.q},ae.prototype.getA=function(){return this.a},ae.prototype.getB=function(){return this.b},ae.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},ae.prototype.getInfinity=function(){return this.infinity},ae.prototype.fromBigInteger=function(e){return new oe(this.q,e)},ae.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var t=(e.length-2)/2,n=e.substr(2,t),r=e.substr(t+2,t);return new se(this,this.fromBigInteger(new w(n,16)),this.fromBigInteger(new w(r,16)))}},oe.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},se.prototype.getEncoded=function(e){var t=function(e,t){var n=e.toByteArrayUnsigned();if(t<n.length)n=n.slice(n.length-t);else for(;t>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=t(n,32);return e?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(r,32))),i},se.decodeFrom=function(e,t){t[0];var n=t.length-1,r=t.slice(1,1+n/2),i=t.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var o=new w(r),s=new w(i);return new se(e,e.fromBigInteger(o),e.fromBigInteger(s))},se.decodeFromHex=function(e,t){t.substr(0,2);var n=t.length-2,r=t.substr(2,n/2),i=t.substr(2+n/2,n/2),o=new w(r,16),s=new w(i,16);return new se(e,e.fromBigInteger(o),e.fromBigInteger(s))},se.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),n=e.y.subtract(this.y).divide(t),r=n.square().subtract(this.x).subtract(e.x),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new se(this.curve,r,i)},se.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(w.valueOf(2)),t=this.curve.fromBigInteger(w.valueOf(3)),n=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),r=n.square().subtract(this.x.multiply(e)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new se(this.curve,r,i)},se.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,n=e,r=n.multiply(new w("3")),i=this.negate(),o=this;for(t=r.bitLength()-2;t>0;--t){o=o.twice();var s=r.testBit(t);s!=n.testBit(t)&&(o=o.add2D(s?this:i))}return o},se.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=t.multiply(t).mod(i),s=e.multiply(e).multiply(e).add(n.multiply(e)).add(r).mod(i);return o.equals(s)},se.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},se.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(t.compareTo(w.ONE)<0||t.compareTo(e.subtract(w.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(w.ONE)<0||n.compareTo(e.subtract(w.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var ce=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function i(e,t,n){return t?r[t]:String.fromCharCode(parseInt(n,16))}var o=new String(""),s=Object.hasOwnProperty;return function(r,a){var c,u,l=r.match(e),d=l[0],p=!1;"{"===d?c={}:"["===d?c=[]:(c=[],p=!0);for(var f=[c],h=1-p,g=l.length;h<g;++h){var m;switch((d=l[h]).charCodeAt(0)){default:(m=f[0])[u||m.length]=+d,u=void 0;break;case 34:if(-1!==(d=d.substring(1,d.length-1)).indexOf("\\")&&(d=d.replace(t,i)),m=f[0],!u){if(!(m instanceof Array)){u=d||o;break}u=m.length}m[u]=d,u=void 0;break;case 91:m=f[0],f.unshift(m[u||m.length]=[]),u=void 0;break;case 93:case 125:f.shift();break;case 102:(m=f[0])[u||m.length]=!1,u=void 0;break;case 110:(m=f[0])[u||m.length]=null,u=void 0;break;case 116:(m=f[0])[u||m.length]=!0,u=void 0;break;case 123:m=f[0],f.unshift(m[u||m.length]={}),u=void 0}}if(p){if(1!==f.length)throw new Error;c=c[0]}else if(f.length)throw new Error;return a&&(c=function e(t,r){var i=t[r];if(i&&"object"===(void 0===i?"undefined":n(i))){var o=null;for(var c in i)if(s.call(i,c)&&i!==t){var u=e(i,c);void 0!==u?i[c]=u:(o||(o=[]),o.push(c))}if(o)for(var l=o.length;--l>=0;)delete i[o[l]]}return a.call(t,r,i)}({"":c},"")),c}}();void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.asn1&&ue.asn1||(ue.asn1={}),ue.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var n=t.substr(1).length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var r="",i=0;i<n;i++)r+="f";t=new w(r,16).xor(e).add(w.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return Ce(e,t)},this.newObject=function(e){var t=ue.asn1,n=t.ASN1Object,r=t.DERBoolean,i=t.DERInteger,o=t.DERBitString,s=t.DEROctetString,a=t.DERNull,c=t.DERObjectIdentifier,u=t.DEREnumerated,l=t.DERUTF8String,d=t.DERNumericString,p=t.DERPrintableString,f=t.DERTeletexString,h=t.DERIA5String,g=t.DERUTCTime,m=t.DERGeneralizedTime,_=t.DERVisibleString,v=t.DERBMPString,y=t.DERSequence,S=t.DERSet,b=t.DERTaggedObject,E=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var w=Object.keys(e);if(1!=w.length)throw new Error("key of param shall be only one.");var T=w[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+T+":"))throw new Error("undefined key: "+T);if("bool"==T)return new r(e[T]);if("int"==T)return new i(e[T]);if("bitstr"==T)return new o(e[T]);if("octstr"==T)return new s(e[T]);if("null"==T)return new a(e[T]);if("oid"==T)return new c(e[T]);if("enum"==T)return new u(e[T]);if("utf8str"==T)return new l(e[T]);if("numstr"==T)return new d(e[T]);if("prnstr"==T)return new p(e[T]);if("telstr"==T)return new f(e[T]);if("ia5str"==T)return new h(e[T]);if("utctime"==T)return new g(e[T]);if("gentime"==T)return new m(e[T]);if("visstr"==T)return new _(e[T]);if("bmpstr"==T)return new v(e[T]);if("asn1"==T)return new n(e[T]);if("seq"==T){for(var I=e[T],x=[],k=0;k<I.length;k++){var C=E(I[k]);x.push(C)}return new y({array:x})}if("set"==T){for(I=e[T],x=[],k=0;k<I.length;k++)C=E(I[k]),x.push(C);return new S({array:x})}if("tag"==T){var A=e[T];if("[object Array]"===Object.prototype.toString.call(A)&&3==A.length){var F=E(A[2]);return new b({tag:A[0],explicit:A[1],obj:F})}return new b(A)}},this.jsonToASN1HEX=function(e){return this.newObject(e).getEncodedHex()}},ue.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",n=parseInt(e.substr(0,2),16),r=(t=Math.floor(n/40)+"."+n%40,""),i=2;i<e.length;i+=2){var o=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);r+=o.substr(1,7),"0"==o.substr(0,1)&&(t=t+"."+new w(r,2).toString(10),r="")}return t},ue.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=new w(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(r=o+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var r="",i=e.split("."),o=40*parseInt(i[0])+parseInt(i[1]);r+=t(o),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);return r},ue.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var n=t.length/2;if(n>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);return(128+n).toString(16)+t},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},ue.asn1.DERAbstractString=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=be(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},o.lang.extend(ue.asn1.DERAbstractString,ue.asn1.ASN1Object),ue.asn1.DERAbstractTime=function(e){ue.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,n){var r=this.zeroPadding,i=this.localDateToUTC(e),o=String(i.getFullYear());"utc"==t&&(o=o.substr(2,2));var s=o+r(String(i.getMonth()+1),2)+r(String(i.getDate()),2)+r(String(i.getHours()),2)+r(String(i.getMinutes()),2)+r(String(i.getSeconds()),2);if(!0===n){var a=i.getMilliseconds();if(0!=a){var c=r(String(a),3);s=s+"."+(c=c.replace(/[0]+$/,""))}}return s+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=me(e)},this.setByDateValue=function(e,t,n,r,i,o){var s=new Date(Date.UTC(e,t-1,n,r,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},o.lang.extend(ue.asn1.DERAbstractTime,ue.asn1.ASN1Object),ue.asn1.DERAbstractStructured=function(e){ue.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},o.lang.extend(ue.asn1.DERAbstractStructured,ue.asn1.ASN1Object),ue.asn1.DERBoolean=function(e){ue.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},o.lang.extend(ue.asn1.DERBoolean,ue.asn1.ASN1Object),ue.asn1.DERInteger=function(e){ue.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new w(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},o.lang.extend(ue.asn1.DERInteger,ue.asn1.ASN1Object),ue.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.getEncodedHex()}ue.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var n="0"+e;this.hTLV=null,this.isModified=!0,this.hV=n+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0);for(var n=0;n<=t;n++)e+="0";var r="";for(n=0;n<e.length-1;n+=8){var i=e.substr(n,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",n=0;n<e.length;n++)1==e[n]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},o.lang.extend(ue.asn1.DERBitString,ue.asn1.ASN1Object),ue.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=ue.asn1.ASN1Util.newObject(e.obj);e.hex=t.getEncodedHex()}ue.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},o.lang.extend(ue.asn1.DEROctetString,ue.asn1.DERAbstractString),ue.asn1.DERNull=function(){ue.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},o.lang.extend(ue.asn1.DERNull,ue.asn1.ASN1Object),ue.asn1.DERObjectIdentifier=function(e){ue.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},n=function(e){var n="",r=parseInt(e,10).toString(2),i=7-r.length%7;7==i&&(i=0);for(var o="",s=0;s<i;s++)o+="0";for(r=o+r,s=0;s<r.length-1;s+=7){var a=r.substr(s,7);s!=r.length-7&&(a="1"+a),n+=t(parseInt(a,2))}return n};try{if(!e.match(/^[0-9.]+$/))return null;var r="",i=e.split("."),o=40*parseInt(i[0],10)+parseInt(i[1],10);r+=t(o),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);return r}catch(e){return null}}(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=ue.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},o.lang.extend(ue.asn1.DERObjectIdentifier,ue.asn1.ASN1Object),ue.asn1.DEREnumerated=function(e){ue.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=ue.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new w(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},o.lang.extend(ue.asn1.DEREnumerated,ue.asn1.ASN1Object),ue.asn1.DERUTF8String=function(e){ue.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},o.lang.extend(ue.asn1.DERUTF8String,ue.asn1.DERAbstractString),ue.asn1.DERNumericString=function(e){ue.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},o.lang.extend(ue.asn1.DERNumericString,ue.asn1.DERAbstractString),ue.asn1.DERPrintableString=function(e){ue.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},o.lang.extend(ue.asn1.DERPrintableString,ue.asn1.DERAbstractString),ue.asn1.DERTeletexString=function(e){ue.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},o.lang.extend(ue.asn1.DERTeletexString,ue.asn1.DERAbstractString),ue.asn1.DERIA5String=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},o.lang.extend(ue.asn1.DERIA5String,ue.asn1.DERAbstractString),ue.asn1.DERVisibleString=function(e){ue.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},o.lang.extend(ue.asn1.DERVisibleString,ue.asn1.DERAbstractString),ue.asn1.DERBMPString=function(e){ue.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},o.lang.extend(ue.asn1.DERBMPString,ue.asn1.DERAbstractString),ue.asn1.DERUTCTime=function(e){ue.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"utc"),this.hV=me(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=me(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{12}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date))},o.lang.extend(ue.asn1.DERUTCTime,ue.asn1.DERAbstractTime),ue.asn1.DERGeneralizedTime=function(e){ue.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.withMillis=!1,this.setByDate=function(e){this.hTLV=null,this.isModified=!0,this.date=e,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=me(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=me(this.s)),this.hV},void 0!==e&&(void 0!==e.str?this.setString(e.str):"string"==typeof e&&e.match(/^[0-9]{14}Z$/)?this.setString(e):void 0!==e.hex?this.setStringHex(e.hex):void 0!==e.date&&this.setByDate(e.date),!0===e.millis&&(this.withMillis=!0))},o.lang.extend(ue.asn1.DERGeneralizedTime,ue.asn1.DERAbstractTime),ue.asn1.DERSequence=function(e){ue.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++)e+=this.asn1Array[t].getEncodedHex();return this.hV=e,this.hV}},o.lang.extend(ue.asn1.DERSequence,ue.asn1.DERAbstractStructured),ue.asn1.DERSet=function(e){ue.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var n=this.asn1Array[t];e.push(n.getEncodedHex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},o.lang.extend(ue.asn1.DERSet,ue.asn1.DERAbstractStructured),ue.asn1.DERTaggedObject=function(e){ue.asn1.DERTaggedObject.superclass.constructor.call(this);var t=ue.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(e,t,n){this.hT=t,this.isExplicit=e,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,t),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){null!=e.tag&&(this.hT=e.tag),null!=e.explicit&&(this.isExplicit=e.explicit),null!=e.tage&&(this.hT=e.tage,this.isExplicit=!0),null!=e.tagi&&(this.hT=e.tagi,this.isExplicit=!1),null!=e.obj&&(e.obj instanceof t.ASN1Object?(this.asn1Object=e.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==n(e.obj)&&(this.asn1Object=t.ASN1Util.newObject(e.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=e&&this.setByParam(e)},o.lang.extend(ue.asn1.DERTaggedObject,ue.asn1.ASN1Object);var ue,le,de,pe=new function(){};function fe(e){for(var t=new Array,n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function he(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}function ge(e){for(var t="",n=0;n<e.length;n++){var r=e[n].toString(16);1==r.length&&(r="0"+r),t+=r}return t}function me(e){return ge(fe(e))}function _e(e){return(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function ve(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function ye(e){return e.length%2==1&&(e="0"+e),_e(S(e))}function Se(e){return b(ve(e))}function be(e){return Oe(Le(e))}function Ee(e){return decodeURIComponent(Pe(e))}function we(e){for(var t="",n=0;n<e.length-1;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t}function Te(e){for(var t="",n=0;n<e.length;n++)t+=("0"+e.charCodeAt(n).toString(16)).slice(-2);return t}function Ie(e){return S(e)}function xe(e){var t=Ie(e).replace(/(.{64})/g,"$1\r\n");return t.replace(/\r\n$/,"")}function ke(e){return b(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function Ce(e,t){return"-----BEGIN "+t+"-----\r\n"+xe(e)+"\r\n-----END "+t+"-----\r\n"}function Ae(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return ke(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function Fe(e){var t,n,r,i,o,s,a,c,u,l,d;if(d=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return c=d[1],t=parseInt(c),2===c.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),n=parseInt(d[2])-1,r=parseInt(d[3]),i=parseInt(d[4]),o=parseInt(d[5]),s=parseInt(d[6]),a=0,""!==(u=d[7])&&(l=(u.substr(1)+"00").substr(0,3),a=parseInt(l)),Date.UTC(t,n,r,i,o,s,a);throw"unsupported zulu format: "+e}function Re(e){return~~(Fe(e)/1e3)}function Oe(e){return e.replace(/%/g,"")}function Pe(e){return e.replace(/(..)/g,"%$1")}function Me(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var n=(e=e.toLowerCase()).split(":").length-1;if(n<2)throw t;var r=":".repeat(7-n+2),i=(e=e.replace("::",r)).split(":");if(8!=i.length)throw t;for(var o=0;o<8;o++)i[o]=("0000"+i[o]).slice(-4);return i.join("")}function Ne(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var t=(e=e.toLowerCase()).match(/.{1,4}/g),n=0;n<8;n++)t[n]=t[n].replace(/^0+/,""),""==t[n]&&(t[n]="0");var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null===r)return e.slice(1,-1);var i="";for(n=0;n<r.length;n++)r[n].length>i.length&&(i=r[n]);return(e=e.replace(i,"::")).slice(1,-1)}function De(e){var t="malformed hex value";if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8!=e.length)return 32==e.length?Ne(e):e;try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}function Le(e){for(var t=encodeURIComponent(e),n="",r=0;r<t.length;r++)"%"==t[r]?(n+=t.substr(r,3),r+=2):n=n+"%"+me(t[r]);return n}function Ue(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function Be(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}pe.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var n=parseInt(e.substr(t+3,1));return 0==n?-1:0<n&&n<10?n+1:-2},pe.getL=function(e,t){var n=pe.getLblen(e,t);return n<1?"":e.substr(t+2,2*n)},pe.getVblen=function(e,t){var n;return""==(n=pe.getL(e,t))?-1:("8"===n.substr(0,1)?new w(n.substr(2),16):new w(n,16)).intValue()},pe.getVidx=function(e,t){var n=pe.getLblen(e,t);return n<0?n:t+2*(n+1)},pe.getV=function(e,t){var n=pe.getVidx(e,t),r=pe.getVblen(e,t);return e.substr(n,2*r)},pe.getTLV=function(e,t){return e.substr(t,2)+pe.getL(e,t)+pe.getV(e,t)},pe.getTLVblen=function(e,t){return 2+2*pe.getLblen(e,t)+2*pe.getVblen(e,t)},pe.getNextSiblingIdx=function(e,t){return pe.getVidx(e,t)+2*pe.getVblen(e,t)},pe.getChildIdx=function(e,t){var n,r,i,o=pe,s=[];n=o.getVidx(e,t),r=2*o.getVblen(e,t),"03"==e.substr(t,2)&&(n+=2,r-=2),i=0;for(var a=n;i<=r;){var c=o.getTLVblen(e,a);if((i+=c)<=r&&s.push(a),a+=c,i>=r)break}return s},pe.getNthChildIdx=function(e,t,n){return pe.getChildIdx(e,t)[n]},pe.getIdxbyList=function(e,t,n,r){var i,o,s=pe;return 0==n.length?void 0!==r&&e.substr(t,2)!==r?-1:t:(i=n.shift())>=(o=s.getChildIdx(e,t)).length?-1:s.getIdxbyList(e,o[i],n,r)},pe.getIdxbyListEx=function(e,t,n,r){var i,o,s=pe;if(0==n.length)return void 0!==r&&e.substr(t,2)!==r?-1:t;i=n.shift(),o=s.getChildIdx(e,t);for(var a=0,c=0;c<o.length;c++){var u=e.substr(o[c],2);if("number"==typeof i&&!s.isContextTag(u)&&a==i||"string"==typeof i&&s.isContextTag(u,i))return s.getIdxbyListEx(e,o[c],n,r);s.isContextTag(u)||a++}return-1},pe.getTLVbyList=function(e,t,n,r){var i=pe,o=i.getIdxbyList(e,t,n,r);return-1==o||o>=e.length?null:i.getTLV(e,o)},pe.getTLVbyListEx=function(e,t,n,r){var i=pe,o=i.getIdxbyListEx(e,t,n,r);return-1==o?null:i.getTLV(e,o)},pe.getVbyList=function(e,t,n,r,i){var o,s,a=pe;return-1==(o=a.getIdxbyList(e,t,n,r))||o>=e.length?null:(s=a.getV(e,o),!0===i&&(s=s.substr(2)),s)},pe.getVbyListEx=function(e,t,n,r,i){var o,s,a=pe;return-1==(o=a.getIdxbyListEx(e,t,n,r))?null:(s=a.getV(e,o),"03"==e.substr(o,2)&&!1!==i&&(s=s.substr(2)),s)},pe.getInt=function(e,t,n){null==n&&(n=-1);try{var r=e.substr(t,2);if("02"!=r&&"03"!=r)return n;var i=pe.getV(e,t);return"02"==r?parseInt(i,16):function(e){try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var n=parseInt(t,16),r=e.substr(2),i=parseInt(r,16).toString(2);return"0"==i&&(i="00000000"),i=i.slice(0,0-n),parseInt(i,2)}catch(e){return-1}}(i)}catch(e){return n}},pe.getOID=function(e,t,n){null==n&&(n=null);try{return"06"!=e.substr(t,2)?n:function(e){if(!Ue(e))return null;try{var t=[],n=e.substr(0,2),r=parseInt(n,16);t[0]=new String(Math.floor(r/40)),t[1]=new String(r%40);for(var i=e.substr(2),o=[],s=0;s<i.length/2;s++)o.push(parseInt(i.substr(2*s,2),16));var a=[],c="";for(s=0;s<o.length;s++)128&o[s]?c+=je((127&o[s]).toString(2),7):(c+=je((127&o[s]).toString(2),7),a.push(new String(parseInt(c,2))),c="");var u=t.join(".");return a.length>0&&(u=u+"."+a.join(".")),u}catch(e){return null}}(pe.getV(e,t))}catch(e){return n}},pe.getOIDName=function(e,t,n){null==n&&(n=null);try{var r=pe.getOID(e,t,n);if(r==n)return n;var i=ue.asn1.x509.OID.oid2name(r);return""==i?r:i}catch(e){return n}},pe.getString=function(e,t,n){null==n&&(n=null);try{return we(pe.getV(e,t))}catch(e){return n}},pe.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},n=[],r=e.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var o=e.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));var c=[],u="";for(a=0;a<s.length;a++)128&s[a]?u+=t((127&s[a]).toString(2),7):(u+=t((127&s[a]).toString(2),7),c.push(new String(parseInt(u,2))),u="");var l=n.join(".");return c.length>0&&(l=l+"."+c.join(".")),l},pe.dump=function(e,t,n,r){var i=pe,o=i.getV,s=i.dump,a=i.getChildIdx,c=e;e instanceof ue.asn1.ASN1Object&&(c=e.getEncodedHex());var u=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var l,d=t.ommit_long_octet;if("01"==(l=c.substr(n,2)))return"00"==(p=o(c,n))?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n";if("02"==l)return r+"INTEGER "+u(p=o(c,n),d)+"\n";if("03"==l){var p=o(c,n);return i.isASN1HEX(p.substr(2))?(b=r+"BITSTRING, encapsulates\n")+s(p.substr(2),t,0,r+"  "):r+"BITSTRING "+u(p,d)+"\n"}if("04"==l)return p=o(c,n),i.isASN1HEX(p)?(b=r+"OCTETSTRING, encapsulates\n")+s(p,t,0,r+"  "):r+"OCTETSTRING "+u(p,d)+"\n";if("05"==l)return r+"NULL\n";if("06"==l){var f=o(c,n),h=ue.asn1.ASN1Util.oidHexToInt(f),g=ue.asn1.x509.OID.oid2name(h),m=h.replace(/\./g," ");return""!=g?r+"ObjectIdentifier "+g+" ("+m+")\n":r+"ObjectIdentifier ("+m+")\n"}if("0a"==l)return r+"ENUMERATED "+parseInt(o(c,n))+"\n";if("0c"==l)return r+"UTF8String '"+Ee(o(c,n))+"'\n";if("13"==l)return r+"PrintableString '"+Ee(o(c,n))+"'\n";if("14"==l)return r+"TeletexString '"+Ee(o(c,n))+"'\n";if("16"==l)return r+"IA5String '"+Ee(o(c,n))+"'\n";if("17"==l)return r+"UTCTime "+Ee(o(c,n))+"\n";if("18"==l)return r+"GeneralizedTime "+Ee(o(c,n))+"\n";if("1a"==l)return r+"VisualString '"+Ee(o(c,n))+"'\n";if("1e"==l)return r+"BMPString '"+Ee(o(c,n))+"'\n";if("30"==l){if("3000"==c.substr(n,4))return r+"SEQUENCE {}\n";b=r+"SEQUENCE\n";var _=t;if((2==(S=a(c,n)).length||3==S.length)&&"06"==c.substr(S[0],2)&&"04"==c.substr(S[S.length-1],2)){g=i.oidname(o(c,S[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=g,_=v}for(var y=0;y<S.length;y++)b+=s(c,_,S[y],r+"  ");return b}if("31"==l){b=r+"SET\n";var S=a(c,n);for(y=0;y<S.length;y++)b+=s(c,t,S[y],r+"  ");return b}if(128&(l=parseInt(l,16))){var b,E=31&l;if(32&l){for(b=r+"["+E+"]\n",S=a(c,n),y=0;y<S.length;y++)b+=s(c,t,S[y],r+"  ");return b}return p=o(c,n),pe.isASN1HEX(p)?(b=r+"["+E+"]\n")+s(p,t,0,r+"  "):(("68747470"==p.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==E)&&(p=Ee(p)),r+"["+E+"] "+p+"\n")}return r+"UNKNOWN("+l+") "+o(c,n)+"\n"},pe.isContextTag=function(e,t){var n,r;e=e.toLowerCase();try{n=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&n);try{return null!=t.match(/^\[[0-9]+\]$/)&&!((r=parseInt(t.substr(1,t.length-1),10))>31)&&128==(192&n)&&(31&n)==r}catch(e){return!1}},pe.isASN1HEX=function(e){var t=pe;if(e.length%2==1)return!1;var n=t.getVblen(e,0),r=e.substr(0,2),i=t.getL(e,0);return e.length-r.length-i.length==2*n},pe.checkStrictDER=function(e,t,n,r,i){var o=pe;if(void 0===n){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!ue.lang.String.isHex(e))throw new Error("not hex string");n=e.length,i=(r=e.length/2)<128?1:Math.ceil(r.toString(16))+1}if(o.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var s=o.getVblen(e,t);if(s>r)throw new Error("value of L too long than hex: idx="+t);var a=o.getTLV(e,t),c=a.length-2-o.getL(e,t).length;if(c!==2*s)throw new Error("V string length and L's value not the same:"+c+"/"+2*s);if(0===t&&e.length!=a.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+a.length);var u=e.substr(t,2);if("02"===u){var l=o.getVidx(e,t);if("00"==e.substr(l,2)&&e.charCodeAt(l+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(u,16)){for(var d=o.getVblen(e,t),p=0,f=o.getChildIdx(e,t),h=0;h<f.length;h++)p+=o.getTLV(e,f[h]).length,o.checkStrictDER(e,f[h],n,r,i);if(2*d!=p)throw new Error("sum of children's TLV length and L unmatch: "+2*d+"!="+p)}},pe.oidname=function(e){var t=ue.asn1;ue.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var n=t.x509.OID.oid2name(e);return""===n&&(n=e),n},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.lang&&ue.lang||(ue.lang={}),ue.lang.String=function(){},"function"==typeof e?(t.utf8tob64u=le=function(t){return _e(e.from(t,"utf8").toString("base64"))},t.b64utoutf8=de=function(t){return e.from(ve(t),"base64").toString("utf8")}):(t.utf8tob64u=le=function(e){return ye(Oe(Le(e)))},t.b64utoutf8=de=function(e){return decodeURIComponent(Pe(Se(e)))}),ue.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},ue.lang.String.isHex=function(e){return Ue(e)},ue.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},ue.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=ve(e),ue.lang.String.isBase64(e))},ue.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},ue.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},ue.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},ue.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var je=function(e,t,n){return null==n&&(n="0"),e.length>=t?e:new Array(t-e.length+1).join(n)+e};void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:_.algo.MD5,sha1:_.algo.SHA1,sha224:_.algo.SHA224,sha256:_.algo.SHA256,sha384:_.algo.SHA384,sha512:_.algo.SHA512,ripemd160:_.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,n){var r=this.getDigestInfoHex(e,t),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+t;for(var o="0001",s="00"+r,a="",c=i-4-s.length,u=0;u<c;u+=2)a+="ff";return o+a+s},this.hashString=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new ue.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof ie||e instanceof ue.crypto.DSA||e instanceof ue.crypto.ECDSA}},ue.crypto.Util.md5=function(e){return new ue.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.ripemd160=function(e){return new ue.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},ue.crypto.Util.SECURERANDOMGEN=new te,ue.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(t),ge(t)},ue.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new w(ue.crypto.Util.getRandomHexOfNbytes(e),16)},ue.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,n=new Array((e-t)/8+1);return ue.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],ge(n)},ue.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new w(ue.crypto.Util.getRandomHexOfNbits(e),16)},ue.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var n=ue.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(n))return n}},ue.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var n=e.compareTo(t);if(1==n)throw"biMin is greater than biMax";if(0==n)return e;var r=t.subtract(e);return ue.crypto.Util.getRandomBigIntegerZeroToMax(r).add(e)},ue.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=ue.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=_.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(_.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},ue.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},ue.crypto.MessageDigest.getHashLength=function(e){var t=ue.crypto.MessageDigest,n=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[n])throw"not supported algorithm: "+e;return t.HASHLENGTH[n]},ue.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},ue.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=ue.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var n=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)&&"cryptojs"==t){try{var r=ue.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=_.algo.HMAC.create(r,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=_.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(_.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=Te(e)),void(this.pass=_.enc.Hex.parse(t))}if("object"!=(void 0===e?"undefined":n(e)))throw"KJUR.crypto.Mac unsupported password type: "+e;if(t=null,void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=be(e.utf8)),void 0!==e.rstr&&(t=Te(e.rstr)),void 0!==e.b64&&(t=b(e.b64)),void 0!==e.b64u&&(t=Se(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=_.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},ue.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new ue.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var n=null;try{n=void 0===t?He.getKey(e):He.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===n.isPrivate)this.prvKey=n,this.state="SIGN";else{if(!0!==n.isPublic)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.prvKey=new ue.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof ie&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof ue.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof ue.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==ue.crypto.ECDSA&&(this.pubKey=new ue.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof ie&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof ie&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.ECDSA&&this.pubKey instanceof ue.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==ue.crypto.DSA&&this.pubKey instanceof ue.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=ue.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=He.getKey(e.prvkeypem),this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},ue.crypto.Cipher=function(e){},ue.crypto.Cipher.encrypt=function(e,t,n){if(t instanceof ie&&t.isPublic){var r=ue.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.encrypt(e);if("RSAOAEP"===r)return t.encryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},ue.crypto.Cipher.decrypt=function(e,t,n){if(t instanceof ie&&t.isPrivate){var r=ue.crypto.Cipher.getAlgByKeyAndName(t,n);if("RSA"===r)return t.decrypt(e);if("RSAOAEP"===r)return t.decryptOAEP(e,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},ue.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof ie){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},ue.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECDSA=function(e){var t=Error,r=w,i=se,o=ue.crypto.ECDSA,s=ue.crypto.ECParameterDB,a=o.getName,c=pe,u=c.getVbyListEx,l=c.isASN1HEX,d=new te;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new r(e.bitLength(),d).mod(e.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(e){this.ecparams=s.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keylen/4;if(e.length!==2+2*t)throw"malformed public key hex length";var n={};return n.x=e.substr(2,t),n.y=e.substr(2+t),n},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),n=this.ecparams.G.multiply(t),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+t.toString(16)).slice(-o),a="04"+("0000000000"+r.toString(16)).slice(-o)+("0000000000"+i.toString(16)).slice(-o);return this.setPrivateKeyHex(s),this.setPublicKeyHex(a),{ecprvhex:s,ecpubhex:a}},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new r(t,16),i=this.ecparams.n,s=new r(e.substring(0,this.ecparams.keylen/4),16);do{var a=this.getBigRandom(i),c=this.ecparams.G.multiply(a).getX().toBigInteger().mod(i)}while(c.compareTo(r.ZERO)<=0);var u=a.modInverse(i).multiply(s.add(n.multiply(c))).mod(i);return o.biRSSigToASN1Sig(c,u)},this.sign=function(e,t){var n=t,i=this.ecparams.n,o=r.fromByteArrayUnsigned(e);do{var s=this.getBigRandom(i),a=this.ecparams.G.multiply(s).getX().toBigInteger().mod(i)}while(a.compareTo(w.ZERO)<=0);var c=s.modInverse(i).multiply(o.add(n.multiply(a))).mod(i);return this.serializeSig(a,c)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,n){try{var s,a,c=o.parseSigHex(t);s=c.r,a=c.s;var u=i.decodeFromHex(this.ecparams.curve,n),l=new r(e.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(l,s,a,u)}catch(e){return!1}},this.verify=function(e,t,o){var s,a,c;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);s=u.r,a=u.s}else{if("object"!==(void 0===t?"undefined":n(t))||!t.r||!t.s)throw"Invalid value for signature";s=t.r,a=t.s}if(o instanceof se)c=o;else{if(!Bitcoin.Util.isArray(o))throw"Invalid format for pubkey value, must be byte array or ECPointFp";c=i.decodeFrom(this.ecparams.curve,o)}var l=r.fromByteArrayUnsigned(e);return this.verifyRaw(l,s,a,c)},this.verifyRaw=function(e,t,n,i){var o=this.ecparams.n,s=this.ecparams.G;if(t.compareTo(r.ONE)<0||t.compareTo(o)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(o)>=0)return!1;var a=n.modInverse(o),c=e.multiply(a).mod(o),u=t.multiply(a).mod(o);return s.multiply(c).add(i.multiply(u)).getX().toBigInteger().mod(o).equals(t)},this.serializeSig=function(e,t){var n=e.toByteArraySigned(),r=t.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),(i=i.concat(n)).push(2),i.push(r.length),(i=i.concat(r)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===l(e))throw new Error("not ASN.1 hex string");var t,n,r;try{t=u(e,0,["[0]",0],"06"),n=u(e,0,[1],"04");try{r=u(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=a(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(r),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var n,r,i;try{u(e,0,[1,0],"06"),n=u(e,0,[1,1],"06"),r=u(e,0,[2,0,1],"04");try{i=u(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=a(n),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var n,r;try{u(e,0,[0,0],"06"),n=u(e,0,[0,1],"06"),r=u(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=a(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(r)},this.readCertPubKeyHex=function(e,n){if(!1===l(e))throw new t("not ASN.1 hex string");var r,i;try{r=u(e,0,[0,5,0,1],"06"),i=u(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=a(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},ue.crypto.ECDSA.parseSigHex=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new w(t.r,16),s:new w(t.s,16)}},ue.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=pe,n=t.getChildIdx,r=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=n(e,0);if(2!=i.length)throw new Error("signature shall have two elements");var o=i[0],s=i[1];if("02"!=e.substr(o,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(s,2))throw new Error("2nd item not ASN.1 integer");return{r:r(e,o),s:r(e,s)}},ue.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=ue.crypto.ECDSA.parseSigHexInHexRS(e),n=t.r,r=t.s;if("00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),n.length%32==30&&(n="00"+n),r.length%32==30&&(r="00"+r),n.length%32!=0)throw"unknown ECDSA sig r length error";if(r.length%32!=0)throw"unknown ECDSA sig s length error";return n+r},ue.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var t=e.substr(0,e.length/2),n=e.substr(e.length/2);return ue.crypto.ECDSA.hexRSSigToASN1Sig(t,n)},ue.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var n=new w(e,16),r=new w(t,16);return ue.crypto.ECDSA.biRSSigToASN1Sig(n,r)},ue.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var n=ue.asn1,r=new n.DERInteger({bigint:e}),i=new n.DERInteger({bigint:t});return new n.DERSequence({array:[r,i]}).getEncodedHex()},ue.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":null},void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.crypto&&ue.crypto||(ue.crypto={}),ue.crypto.ECParameterDB=new function(){var e={},t={};function n(e){return new w(e,16)}this.getByName=function(n){var r=n;if(void 0!==t[r]&&(r=t[n]),void 0!==e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,o,s,a,c,u,l,d,p,f,h){e[r]={};var g=n(o),m=n(s),_=n(a),v=n(c),y=n(u),S=new ae(g,m,_),b=S.decodePointHex("04"+l+d);e[r].name=r,e[r].keylen=i,e[r].curve=S,e[r].G=b,e[r].n=v,e[r].h=y,e[r].oid=f,e[r].info=h;for(var E=0;E<p.length;E++)t[p[E]]=r}},ue.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),ue.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),ue.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),ue.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),ue.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),ue.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),ue.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),ue.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),ue.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var He=function(){var e=function(e,n,r){return t(_.AES,e,n,r)},t=function(e,t,n,r){var i=_.enc.Hex.parse(t),o=_.enc.Hex.parse(n),s=_.enc.Hex.parse(r),a={};a.key=o,a.iv=s,a.ciphertext=i;var c=e.decrypt(a,o,{iv:s});return _.enc.Hex.stringify(c)},n=function(e,t,n){return r(_.AES,e,t,n)},r=function(e,t,n,r){var i=_.enc.Hex.parse(t),o=_.enc.Hex.parse(n),s=_.enc.Hex.parse(r),a=e.encrypt(i,o,{iv:s}),c=_.enc.Hex.parse(a.toString());return _.enc.Base64.stringify(c)},i={"AES-256-CBC":{proc:e,eproc:n,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:n,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:n,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,n,r){return t(_.TripleDES,e,n,r)},eproc:function(e,t,n){return r(_.TripleDES,e,t,n)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,n,r){return t(_.DES,e,n,r)},eproc:function(e,t,n){return r(_.DES,e,t,n)},keylen:8,ivlen:8}},o=function(e){var t={},n=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(t.cipher=n[1],t.ivsalt=n[2]);var r=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(t.type=r[1]);var i=-1,o=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),o=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),o=1);var s=e.indexOf("-----END");if(-1!=i&&-1!=s){var a=e.substring(i+2*o,s-o);a=a.replace(/\s+/g,""),t.data=a}return t},s=function(e,t,n){for(var r=n.substring(0,16),o=_.enc.Hex.parse(r),s=_.enc.Utf8.parse(t),a=i[e].keylen+i[e].ivlen,c="",u=null;;){var l=_.algo.MD5.create();if(null!=u&&l.update(u),l.update(s),l.update(o),u=l.finalize(),(c+=_.enc.Hex.stringify(u)).length>=2*a)break}var d={};return d.keyhex=c.substr(0,2*i[e].keylen),d.ivhex=c.substr(2*i[e].keylen,2*i[e].ivlen),d},a=function(e,t,n,r){var o=_.enc.Base64.parse(e),s=_.enc.Hex.stringify(o);return(0,i[t].proc)(s,n,r)};return{version:"1.0.0",parsePKCS5PEM:function(e){return o(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,n){return s(e,t,n)},decryptKeyB64:function(e,t,n,r){return a(e,t,n,r)},getDecryptedKeyHex:function(e,t){var n=o(e),r=(n.type,n.cipher),i=n.ivsalt,c=n.data,u=s(r,t,i).keyhex;return a(c,r,u,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,n,r,o){var a="";if(void 0!==r&&null!=r||(r="AES-256-CBC"),void 0===i[r])throw"KEYUTIL unsupported algorithm: "+r;void 0!==o&&null!=o||(o=function(e){var t=_.lib.WordArray.random(e);return _.enc.Hex.stringify(t)}(i[r].ivlen).toUpperCase());var c=function(e,t,n,r){return(0,i[t].eproc)(e,n,r)}(t,r,s(r,n,o).keyhex,o);return a="-----BEGIN "+e+" PRIVATE KEY-----\r\n",a+="Proc-Type: 4,ENCRYPTED\r\n",a+="DEK-Info: "+r+","+o+"\r\n",a+="\r\n",(a+=c.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=pe,n=t.getChildIdx,r=t.getV,i={},o=n(e,0);if(2!=o.length)throw"malformed format: SEQUENCE(0).items != 2: "+o.length;i.ciphertext=r(e,o[1]);var s=n(e,o[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+s.length;if("2a864886f70d01050d"!=r(e,s[0]))throw"this only supports pkcs5PBES2";var a=n(e,s[1]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+a.length;var c=n(e,a[1]);if(2!=c.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+c.length;if("2a864886f70d0307"!=r(e,c[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=r(e,c[1]);var u=n(e,a[0]);if(2!=u.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+u.length;if("2a864886f70d01050c"!=r(e,u[0]))throw"this only supports pkcs5PBKDF2";var l=n(e,u[1]);if(l.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+l.length;i.pbkdf2Salt=r(e,l[0]);var d=r(e,l[1]);try{i.pbkdf2Iter=parseInt(d,16)}catch(e){throw"malformed format pbkdf2Iter: "+d}return i},getPBKDF2KeyHexFromParam:function(e,t){var n=_.enc.Hex.parse(e.pbkdf2Salt),r=e.pbkdf2Iter,i=_.PBKDF2(t,n,{keySize:6,iterations:r});return _.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var n=Ae(e,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=He.getPBKDF2KeyHexFromParam(r,t),o={};o.ciphertext=_.enc.Hex.parse(r.ciphertext);var s=_.enc.Hex.parse(i),a=_.enc.Hex.parse(r.encryptionSchemeIV),c=_.TripleDES.decrypt(o,s,{iv:a});return _.enc.Hex.stringify(c)},getKeyFromEncryptedPKCS8PEM:function(e,t){var n=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(n)},parsePlainPrivatePKCS8Hex:function(e){var t=pe,n=t.getChildIdx,r=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var o=n(e,0);if(3!=o.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=e.substr(o[1],2))throw"malformed PKCS8 private key(code:003)";var s=n(e,o[1]);if(2!=s.length)throw"malformed PKCS8 private key(code:004)";if("06"!=e.substr(s[0],2))throw"malformed PKCS8 private key(code:005)";if(i.algoid=r(e,s[0]),"06"==e.substr(s[1],2)&&(i.algparam=r(e,s[1])),"04"!=e.substr(o[2],2))throw"malformed PKCS8 private key(code:006)";return i.keyidx=t.getVidx(e,o[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=Ae(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,n=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==n.algoid)t=new ie;else if("2a8648ce380401"==n.algoid)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!=n.algoid)throw"unsupported private key algorithm";t=new ue.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,n=pe.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===n)t=new ie;else if("2a8648ce380401"===n)t=new ue.crypto.DSA;else{if("2a8648ce3d0201"!==n)throw"unsupported PKCS#8 public key hex";t=new ue.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=pe,n=t.getChildIdx,r=t.getV,i={};if("30"!=e.substr(0,2))throw"malformed RSA key(code:001)";var o=n(e,0);if(2!=o.length)throw"malformed RSA key(code:002)";if("02"!=e.substr(o[0],2))throw"malformed RSA key(code:003)";if(i.n=r(e,o[0]),"02"!=e.substr(o[1],2))throw"malformed RSA key(code:004)";return i.e=r(e,o[1]),i},parsePublicPKCS8Hex:function(e){var t=pe,n=t.getChildIdx,r=t.getV,i={algparam:null},o=n(e,0);if(2!=o.length)throw"outer DERSequence shall have 2 elements: "+o.length;var s=o[0];if("30"!=e.substr(s,2))throw"malformed PKCS8 public key(code:001)";var a=n(e,s);if(2!=a.length)throw"malformed PKCS8 public key(code:002)";if("06"!=e.substr(a[0],2))throw"malformed PKCS8 public key(code:003)";if(i.algoid=r(e,a[0]),"06"==e.substr(a[1],2)?i.algparam=r(e,a[1]):"30"==e.substr(a[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,a[1],[0],"02"),i.algparam.q=t.getVbyList(e,a[1],[1],"02"),i.algparam.g=t.getVbyList(e,a[1],[2],"02")),"03"!=e.substr(o[1],2))throw"malformed PKCS8 public key(code:004)";return i.key=r(e,o[1]).substr(2),i}}}();He.getKey=function(e,t,n){var r,i=(_=pe).getChildIdx,o=(_.getV,_.getVbyList),s=ue.crypto,a=s.ECDSA,c=s.DSA,u=ie,l=Ae,d=He;if(void 0!==u&&e instanceof u)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==c&&e instanceof c)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(A=new u).setPublic(e.n,e.e),A;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(A=new u).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),A;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(A=new u).setPrivate(e.n,e.e,e.d),A;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(A=new c).setPublic(e.p,e.q,e.g,e.y),A;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(A=new c).setPrivate(e.p,e.q,e.g,e.y,e.x),A;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(A=new u).setPublic(Se(e.n),Se(e.e)),A;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(A=new u).setPrivateEx(Se(e.n),Se(e.e),Se(e.d),Se(e.p),Se(e.q),Se(e.dp),Se(e.dq),Se(e.qi)),A;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(A=new u).setPrivate(Se(e.n),Se(e.e),Se(e.d)),A;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var p=(C=new a({curve:e.crv})).ecparams.keylen/4,f="04"+("0000000000"+Se(e.x)).slice(-p)+("0000000000"+Se(e.y)).slice(-p);return C.setPublicKeyHex(f),C}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){p=(C=new a({curve:e.crv})).ecparams.keylen/4,f="04"+("0000000000"+Se(e.x)).slice(-p)+("0000000000"+Se(e.y)).slice(-p);var h=("0000000000"+Se(e.d)).slice(-p);return C.setPublicKeyHex(f),C.setPrivateKeyHex(h),C}if("pkcs5prv"===n){var g,m=e,_=pe;if(9===(g=i(m,0)).length)(A=new u).readPKCS5PrvKeyHex(m);else if(6===g.length)(A=new c).readPKCS5PrvKeyHex(m);else{if(!(g.length>2&&"04"===m.substr(g[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(A=new a).readPKCS5PrvKeyHex(m)}return A}if("pkcs8prv"===n)return d.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===n)return d._getKeyFromPublicPKCS8Hex(e);if("x509pub"===n)return $e.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return $e.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var v=Ae(e,"PUBLIC KEY");return d._getKeyFromPublicPKCS8Hex(v)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var y=l(e,"RSA PRIVATE KEY");return d.getKey(y,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var S=o(r=l(e,"DSA PRIVATE KEY"),0,[1],"02"),b=o(r,0,[2],"02"),E=o(r,0,[3],"02"),T=o(r,0,[4],"02"),I=o(r,0,[5],"02");return(A=new c).setPrivate(new w(S,16),new w(b,16),new w(E,16),new w(T,16),new w(I,16)),A}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED"))return y=l(e,"EC PRIVATE KEY"),d.getKey(y,null,"pkcs5prv");if(-1!=e.indexOf("-END PRIVATE KEY-"))return d.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var x=d.getDecryptedKeyHex(e,t),k=new ie;return k.readPKCS5PrvKeyHex(x),k}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var C,A=o(r=d.getDecryptedKeyHex(e,t),0,[1],"04"),F=o(r,0,[2,0],"06"),R=o(r,0,[3,0],"03").substr(2);if(void 0===ue.crypto.OID.oidhex2name[F])throw"undefined OID(hex) in KJUR.crypto.OID: "+F;return(C=new a({curve:ue.crypto.OID.oidhex2name[F]})).setPublicKeyHex(R),C.setPrivateKeyHex(A),C.isPublic=!1,C}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED"))return S=o(r=d.getDecryptedKeyHex(e,t),0,[1],"02"),b=o(r,0,[2],"02"),E=o(r,0,[3],"02"),T=o(r,0,[4],"02"),I=o(r,0,[5],"02"),(A=new c).setPrivate(new w(S,16),new w(b,16),new w(E,16),new w(T,16),new w(I,16)),A;if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return d.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},He.generateKeypair=function(e,t){if("RSA"==e){var n=t;(s=new ie).generate(n,"10001"),s.isPrivate=!0,s.isPublic=!0;var r=new ie,i=s.n.toString(16),o=s.e.toString(16);return r.setPublic(i,o),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=r,a}if("EC"==e){var s,a,c=t,u=new ue.crypto.ECDSA({curve:c}).generateKeyPairHex();return(s=new ue.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),s.setPrivateKeyHex(u.ecprvhex),s.isPrivate=!0,s.isPublic=!1,(r=new ue.crypto.ECDSA({curve:c})).setPublicKeyHex(u.ecpubhex),r.isPrivate=!1,r.isPublic=!0,(a={}).prvKeyObj=s,a.pubKeyObj=r,a}throw"unknown algorithm: "+e},He.getPEM=function(e,t,n,r,i,o){var s=ue,a=s.asn1,c=a.DERObjectIdentifier,u=a.DERInteger,l=a.ASN1Util.newObject,d=a.x509.SubjectPublicKeyInfo,p=s.crypto,f=p.DSA,h=p.ECDSA,g=ie;function m(e){return l({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function v(e){return l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function y(e){return l({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==g&&e instanceof g||void 0!==f&&e instanceof f||void 0!==h&&e instanceof h)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return Ce(w=new d(e).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==g&&e instanceof g&&(void 0===n||null==n)&&1==e.isPrivate)return Ce(w=m(e).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==h&&e instanceof h&&(void 0===n||null==n)&&1==e.isPrivate){var S=new c({name:e.curveName}).getEncodedHex(),b=v(e).getEncodedHex(),E="";return(E+=Ce(S,"EC PARAMETERS"))+Ce(b,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===n||null==n)&&1==e.isPrivate)return Ce(w=y(e).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==g&&e instanceof g&&void 0!==n&&null!=n&&1==e.isPrivate){var w=m(e).getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",w,n,r,o)}if("PKCS5PRV"==t&&void 0!==h&&e instanceof h&&void 0!==n&&null!=n&&1==e.isPrivate)return w=v(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",w,n,r,o);if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==n&&null!=n&&1==e.isPrivate)return w=y(e).getEncodedHex(),void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",w,n,r,o);var T=function(e,t){var n=I(e,t);return new l({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{int:n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]}).getEncodedHex()},I=function(e,t){var n=_.lib.WordArray.random(8),r=_.lib.WordArray.random(8),i=_.PBKDF2(t,n,{keySize:6,iterations:100}),o=_.enc.Hex.parse(e),s=_.TripleDES.encrypt(o,i,{iv:r})+"",a={};return a.ciphertext=s,a.pbkdf2Salt=_.enc.Hex.stringify(n),a.pbkdf2Iter=100,a.encryptionSchemeAlg="DES-EDE3-CBC",a.encryptionSchemeIV=_.enc.Hex.stringify(r),a};if("PKCS8PRV"==t&&null!=g&&e instanceof g&&1==e.isPrivate){var x=m(e).getEncodedHex();return w=l({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?Ce(w,"PRIVATE KEY"):Ce(b=T(w,n),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==h&&e instanceof h&&1==e.isPrivate)return x=new l({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]}).getEncodedHex(),w=l({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?Ce(w,"PRIVATE KEY"):Ce(b=T(w,n),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate)return x=new u({bigint:e.x}).getEncodedHex(),w=l({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:x}}]}).getEncodedHex(),void 0===n||null==n?Ce(w,"PRIVATE KEY"):Ce(b=T(w,n),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},He.getKeyFromCSRPEM=function(e){var t=Ae(e,"CERTIFICATE REQUEST");return He.getKeyFromCSRHex(t)},He.getKeyFromCSRHex=function(e){var t=He.parseCSRHex(e);return He.getKey(t.p8pubkeyhex,null,"pkcs8pub")},He.parseCSRHex=function(e){var t=pe,n=t.getChildIdx,r=t.getTLV,i={},o=e;if("30"!=o.substr(0,2))throw"malformed CSR(code:001)";var s=n(o,0);if(s.length<1)throw"malformed CSR(code:002)";if("30"!=o.substr(s[0],2))throw"malformed CSR(code:003)";var a=n(o,s[0]);if(a.length<3)throw"malformed CSR(code:004)";return i.p8pubkeyhex=r(o,a[2]),i},He.getKeyID=function(e){var t=He,n=pe;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var r=Ae(t.getPEM(e)),i=n.getIdxbyList(r,0,[1]),o=n.getV(r,i).substring(2);return ue.crypto.Util.hashHex(o,"sha1")},He.getJWKFromKey=function(e){var t={};if(e instanceof ie&&e.isPrivate)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t.d=ye(e.d.toString(16)),t.p=ye(e.p.toString(16)),t.q=ye(e.q.toString(16)),t.dp=ye(e.dmp1.toString(16)),t.dq=ye(e.dmq1.toString(16)),t.qi=ye(e.coeff.toString(16)),t;if(e instanceof ie&&e.isPublic)return t.kty="RSA",t.n=ye(e.n.toString(16)),t.e=ye(e.e.toString(16)),t;if(e instanceof ue.crypto.ECDSA&&e.isPrivate){if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;var n=e.getPublicKeyXYHex();return t.kty="EC",t.crv=r,t.x=ye(n.x),t.y=ye(n.y),t.d=ye(e.prvKeyHex),t}if(e instanceof ue.crypto.ECDSA&&e.isPublic){var r;if("P-256"!==(r=e.getShortNISTPCurveName())&&"P-384"!==r)throw"unsupported curve name for JWT: "+r;return n=e.getPublicKeyXYHex(),t.kty="EC",t.crv=r,t.x=ye(n.x),t.y=ye(n.y),t}throw"not supported key object"},ie.getPosArrayOfChildrenFromHex=function(e){return pe.getChildIdx(e,0)},ie.getHexValueArrayOfChildrenFromHex=function(e){var t,n=pe.getV,r=n(e,(t=ie.getPosArrayOfChildrenFromHex(e))[0]),i=n(e,t[1]),o=n(e,t[2]),s=n(e,t[3]),a=n(e,t[4]),c=n(e,t[5]),u=n(e,t[6]),l=n(e,t[7]),d=n(e,t[8]);return(t=new Array).push(r,i,o,s,a,c,u,l,d),t},ie.prototype.readPrivateKeyFromPEMString=function(e){var t=Ae(e),n=ie.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])},ie.prototype.readPKCS5PrvKeyHex=function(e){var t=ie.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},ie.prototype.readPKCS8PrvKeyHex=function(e){var t,n,r,i,o,s,a,c,u=pe,l=u.getVbyListEx;if(!1===u.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=l(e,0,[2,0,1],"02"),n=l(e,0,[2,0,2],"02"),r=l(e,0,[2,0,3],"02"),i=l(e,0,[2,0,4],"02"),o=l(e,0,[2,0,5],"02"),s=l(e,0,[2,0,6],"02"),a=l(e,0,[2,0,7],"02"),c=l(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,n,r,i,o,s,a,c)},ie.prototype.readPKCS5PubKeyHex=function(e){var t=pe,n=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var r=t.getChildIdx(e,0);if(2!==r.length||"02"!==e.substr(r[0],2)||"02"!==e.substr(r[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=n(e,r[0]),o=n(e,r[1]);this.setPublic(i,o)},ie.prototype.readPKCS8PubKeyHex=function(e){var t=pe;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var n=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(n)},ie.prototype.readCertPubKeyHex=function(e,t){var n,r;(n=new $e).readCertHex(e),r=n.getPublicKeyHex(),this.readPKCS8PubKeyHex(r)};var We=new RegExp("[^0-9a-f]","gi");function Ve(e,t){for(var n="",r=t/4-e.length,i=0;i<r;i++)n+="0";return n+e}function qe(e,t,n){for(var r="",i=0;r.length<t;)r+=we(n(Te(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function Ke(e){for(var t in ue.crypto.Util.DIGESTINFOHEAD){var n=ue.crypto.Util.DIGESTINFOHEAD[t],r=n.length;if(e.substring(0,r)==n)return[t,e.substring(r)]}return[]}function $e(e){var t,n=pe,r=n.getChildIdx,i=n.getV,o=n.getTLV,s=n.getVbyList,a=n.getVbyListEx,c=n.getTLVbyList,u=n.getTLVbyListEx,l=n.getIdxbyList,d=n.getIdxbyListEx,p=n.getVidx,f=n.oidname,h=n.hextooidstr,g=$e,m=Ae;try{t=ue.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==c(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return a(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=u(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var n in t)if(e===t[n])return n;return f(a(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return c(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return g.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return c(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return g.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var e=s(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getNotAfter=function(){var e=s(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),decodeURIComponent(e)},this.getPublicKeyHex=function(){return n.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return l(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return He.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=c(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),n=this.getSignatureValueHex(),r=c(this.hex,0,[0],"30"),i=new ue.crypto.Signature({alg:t});return i.init(e),i.updateHex(r),i.verify(n)},this.parseExt=function(e){var t,o,a;if(void 0===e){if(a=this.hex,3!==this.version)return-1;t=l(a,0,[0,7,0],"30"),o=r(a,t)}else{a=Ae(e);var c=l(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(a,c))return void(this.aExtInfo=new Array);t=l(a,0,[0,3,0,1,0],"30"),o=r(a,t),this.hex=a}this.aExtInfo=new Array;for(var u=0;u<o.length;u++){var d={critical:!1},f=0;3===r(a,o[u]).length&&(d.critical=!0,f=1),d.oid=n.hextooidstr(s(a,o[u],[0],"06"));var h=l(a,o[u],[1+f]);d.vidx=p(a,h),this.aExtInfo.push(d)}},this.getExtInfo=function(e){var t=this.aExtInfo,n=e;if(e.match(/^[0-9.]+$/)||(n=ue.asn1.x509.OID.name2oid(e)),""!==n)for(var r=0;r<t.length;r++)if(t[r].oid===n)return t[r]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("basicConstraints");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"basicConstraints"};if(t&&(r.critical=!0),"3000"===e)return r;if("30030101ff"===e)return r.cA=!0,r;if("30060101ff02"===e.substr(0,12)){var s=i(e,10),a=parseInt(s,16);return r.cA=!0,r.pathLen=a,r}throw new Error("hExtV parse error: "+e)},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("keyUsage");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"keyUsage"};return t&&(r.critical=!0),r.names=this.getExtKeyUsageString(e).split(","),r},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=o(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var n="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(n=n.slice(-8)),10==e.length&&(n=n.slice(-16)),""==(n=n.replace(/0+$/,""))&&(n="0"),n},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),n=new Array,r=0;r<t.length;r++)"1"==t.substr(r,1)&&n.push($e.KEYUSAGE_NAME[r]);return n.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectKeyIdentifier");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"subjectKeyIdentifier"};t&&(r.critical=!0);var s=i(e,0);return r.kid={hex:s},r},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityKeyIdentifier");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var a=r(e,0),c=0;c<a.length;c++){var u=e.substr(a[c],2);if("80"===u&&(s.kid={hex:i(e,a[c])}),"a1"===u){var l=o(e,a[c]),d=this.getGeneralNames(l);s.issuer=d[0].dn}"82"===u&&(s.sn={hex:i(e,a[c])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("extKeyUsage");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var a=r(e,0),c=0;c<a.length;c++)s.array.push(f(i(e,a[c])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,n=o(this.hex,e.vidx);if(""===n)return t;for(var s=r(n,0),a=0;a<s.length;a++)t.push(f(i(n,s[a])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("subjectAltName");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"subjectAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("issuerAltName");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var r={extname:"issuerAltName",array:[]};return t&&(r.critical=!0),r.array=this.getGeneralNames(e),r},this.getGeneralNames=function(e){for(var t=r(e,0),n=[],i=0;i<t.length;i++){var s=this.getGeneralName(o(e,t[i]));void 0!==s&&n.push(s)}return n},this.getGeneralName=function(e){var t=e.substr(0,2),n=i(e,0),r=we(n);return"81"==t?{rfc822:r}:"82"==t?{dns:r}:"86"==t?{uri:r}:"87"==t?{ip:De(n)}:"a4"==t?{dn:this.getX500Name(n)}:void 0},this.getExtSubjectAltName2=function(){var e,t,n,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var a=new Array,c=o(this.hex,s.vidx),u=r(c,0),l=0;l<u.length;l++)n=c.substr(u[l],2),e=i(c,u[l]),"81"===n&&(t=Ee(e),a.push(["MAIL",t])),"82"===n&&(t=Ee(e),a.push(["DNS",t])),"84"===n&&(t=$e.hex2dn(e,0),a.push(["DN",t])),"86"===n&&(t=Ee(e),a.push(["URI",t])),"87"===n&&(t=De(e),a.push(["IP",t]));return a},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("cRLDistributionPoints");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"cRLDistributionPoints",array:[]};t&&(i.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var c=o(e,s[a]);i.array.push(this.getDistributionPoint(c))}return i},this.getDistributionPoint=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var s=e.substr(n[i],2),a=o(e,n[i]);"a0"==s&&(t.dpname=this.getDistributionPointName(a))}return t},this.getDistributionPointName=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var s=e.substr(n[i],2),a=o(e,n[i]);"a0"==s&&(t.full=this.getGeneralNames(a))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtInfo("cRLDistributionPoints");if(void 0===e)return e;for(var t=new Array,n=r(this.hex,e.vidx),i=0;i<n.length;i++)try{var o=Ee(s(this.hex,n[i],[0,0,0],"86"));t.push(o)}catch(e){}return t},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},n=r(this.hex,e.vidx),i=0;i<n.length;i++){var o=s(this.hex,n[i],[0],"06"),a=s(this.hex,n[i],[1],"86");"2b06010505073001"===o&&t.ocsp.push(Ee(a)),"2b06010505073002"===o&&t.caissuer.push(Ee(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("authorityInfoAccess");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"authorityInfoAccess",array:[]};t&&(i.critical=!0);for(var c=r(e,0),u=0;u<c.length;u++){var l=a(e,c[u],[0],"06"),d=Ee(s(e,c[u],[1],"86"));if("2b06010505073001"==l)i.array.push({ocsp:d});else{if("2b06010505073002"!=l)throw new Error("unknown method: "+l);i.array.push({caissuer:d})}}return i},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("certificatePolicies");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"certificatePolicies",array:[]};t&&(i.critical=!0);for(var s=r(e,0),a=0;a<s.length;a++){var c=o(e,s[a]),u=this.getPolicyInformation(c);i.array.push(u)}return i},this.getPolicyInformation=function(e){var t={},n=s(e,0,[0],"06");t.policyoid=f(n);var i=d(e,0,[1],"30");if(-1!=i){t.array=[];for(var a=r(e,i),c=0;c<a.length;c++){var u=o(e,a[c]),l=this.getPolicyQualifierInfo(u);t.array.push(l)}}return t},this.getPolicyQualifierInfo=function(e){var t={},n=s(e,0,[0],"06");if("2b06010505070201"===n){var r=a(e,0,[1],"16");t.cps=we(r)}else if("2b06010505070202"===n){var i=c(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},n=r(e,0),i=0;i<n.length;i++){var s=o(e,n[i]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=we(i(e,0)),t},this.getExtCRLNumber=function(e,t){var n={extname:"cRLNumber"};if(t&&(n.critical=!0),"02"==e.substr(0,2))return n.num={hex:i(e,0)},n;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var n={extname:"cRLReason"};if(t&&(n.critical=!0),"0a"==e.substr(0,2))return n.code=parseInt(i(e,0),16),n;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var n={extname:"ocspNonce"};t&&(n.critical=!0);var r=i(e,0);return n.hex=r,n},this.getExtOcspNoCheck=function(e,t){var n={extname:"ocspNoCheck"};return t&&(n.critical=!0),n},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var n=this.getExtInfo("adobeTimeStamp");if(void 0===n)return;e=o(this.hex,n.vidx),t=n.critical}var i={extname:"adobeTimeStamp"};t&&(i.critical=!0);var s=r(e,0);if(s.length>1){var a=o(e,s[1]),c=this.getGeneralName(a);null!=c.uri&&(i.uri=c.uri)}if(s.length>2){var u=o(e,s[2]);"0101ff"==u&&(i.reqauth=!0),"010100"==u&&(i.reqauth=!1)}return i},this.getX500NameRule=function(e){for(var t=null,n=[],r=0;r<e.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(i[o]);for(r=0;r<n.length;r++){var s=n[r],a=s.ds,c=s.value,u=s.type;if("prn"!=a&&"utf8"!=a&&"ia5"!=a)return"mixed";if("ia5"==a){if("CN"!=u)return"mixed";if(ue.lang.String.isMail(c))continue;return"mixed"}if("C"==u){if("prn"==a)continue;return"mixed"}if(null==t)t=a;else if(t!==a)return"mixed"}return null==t?"prn":t},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.getX500NameArray=function(e){for(var t=[],n=r(e,0),i=0;i<n.length;i++)t.push(this.getRDN(o(e,n[i])));return t},this.getRDN=function(e){for(var t=[],n=r(e,0),i=0;i<n.length;i++)t.push(this.getAttrTypeAndValue(o(e,n[i])));return t},this.getAttrTypeAndValue=function(e){var t={type:null,value:null,ds:null},n=r(e,0),i=s(e,n[0],[],"06"),o=s(e,n[1],[]),a=ue.asn1.ASN1Util.oidHexToInt(i);return t.type=ue.asn1.x509.OID.oid2atype(a),t.value=we(o),t.ds=this.HEX2STAG[e.substr(n[1],2)],t},this.readCertPEM=function(e){this.readCertHex(m(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{l(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(){var e={};return e.version=this.getVersion(),e.serial={hex:this.getSerialNumberHex()},e.sigalg=this.getSignatureAlgorithmField(),e.issuer=this.getIssuer(),e.notbefore=this.getNotBefore(),e.notafter=this.getNotAfter(),e.subject=this.getSubject(),e.sbjpubkey=Ce(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(e.ext=this.getExtParamArray()),e.sighex=this.getSignatureValueHex(),e},this.getExtParamArray=function(e){null==e&&-1!=d(this.hex,0,[0,"[3]"])&&(e=u(this.hex,0,[0,"[3]",0],"30"));for(var t=[],n=r(e,0),i=0;i<n.length;i++){var s=o(e,n[i]),a=this.getExtParam(s);null!=a&&t.push(a)}return t},this.getExtParam=function(e){var t=r(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var n=h(s(e,0,[0],"06")),i=!1;3==t&&"0101ff"==c(e,0,[1])&&(i=!0);var o=c(e,0,[t-1,0]),a=void 0;if("2.5.29.14"==n?a=this.getExtSubjectKeyIdentifier(o,i):"2.5.29.15"==n?a=this.getExtKeyUsage(o,i):"2.5.29.17"==n?a=this.getExtSubjectAltName(o,i):"2.5.29.18"==n?a=this.getExtIssuerAltName(o,i):"2.5.29.19"==n?a=this.getExtBasicConstraints(o,i):"2.5.29.31"==n?a=this.getExtCRLDistributionPoints(o,i):"2.5.29.32"==n?a=this.getExtCertificatePolicies(o,i):"2.5.29.35"==n?a=this.getExtAuthorityKeyIdentifier(o,i):"2.5.29.37"==n?a=this.getExtExtKeyUsage(o,i):"1.3.6.1.5.5.7.1.1"==n?a=this.getExtAuthorityInfoAccess(o,i):"2.5.29.20"==n?a=this.getExtCRLNumber(o,i):"2.5.29.21"==n?a=this.getExtCRLReason(o,i):"1.3.6.1.5.5.7.48.1.2"==n?a=this.getExtOcspNonce(o,i):"1.3.6.1.5.5.7.48.1.5"==n?a=this.getExtOcspNoCheck(o,i):"1.2.840.113583.1.1.9.1"==n&&(a=this.getExtAdobeTimeStamp(o,i)),null!=a)return a;var u={extname:n,extn:o};return i&&(u.critical=!0),u},this.findExt=function(e,t){for(var n=0;n<e.length;n++)if(e[n].extname==t)return e[n];return null},this.updateExtCDPFullURI=function(e,t){var n=this.findExt(e,"cRLDistributionPoints");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)if(null!=r[i].dpname&&null!=r[i].dpname.full)for(var o=r[i].dpname.full,s=0;s<o.length;s++){var a=o[i];null!=a.uri&&(a.uri=t)}},this.updateExtAIAOCSP=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].ocsp&&(r[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var n=this.findExt(e,"authorityInfoAccess");if(null!=n&&null!=n.array)for(var r=n.array,i=0;i<r.length;i++)null!=r[i].caissuer&&(r[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e)})).join("+")}(e)})).join("/")},this.getInfo=function(){var e,t,n,r=function(e){return JSON.stringify(e.array).replace(/[\[\]\{\}\"]/g,"")},i=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var o=0;o<i.array.length;o++){var s=i.array[o];void 0!==s.cps&&(t+="    cps: "+s.cps+"\n")}}return t},o=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];try{void 0!==i.dpname.full[0].uri&&(t+="    "+i.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==i.dname.full[0].dn.hex&&(t+="    "+$e.hex2dn(i.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t},s=function(e){for(var t="",n=e.array,r=0;r<n.length;r++){var i=n[r];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Be(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Be(t.e.toString(16))+"\n"),null!=(n=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var a=0;a<n.length;a++){var c=n[a],u=ue.asn1.x509.OID.oid2name(c.oid);""===u&&(u=c.oid);var l="";if(!0===c.critical&&(l="CRITICAL"),e+="  "+u+" "+l+":\n","basicConstraints"===u){var d=this.getExtBasicConstraints();void 0===d.cA?e+="    {}\n":(e+="    cA=true",void 0!==d.pathLen&&(e+=", pathLen="+d.pathLen),e+="\n")}else if("keyUsage"===u)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===u)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===u){var p=this.getExtAuthorityKeyIdentifier();void 0!==p.kid&&(e+="    kid="+p.kid.hex+"\n")}else"extKeyUsage"===u?e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===u?e+="    "+r(this.getExtSubjectAltName())+"\n":"cRLDistributionPoints"===u?e+=o(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===u?e+=s(this.getExtAuthorityInfoAccess()):"certificatePolicies"===u&&(e+=i(this.getExtCertificatePolicies()))}}return(e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):ue.lang.String.isHex(e)&&this.readCertHex(e))}ie.prototype.sign=function(e,t){var n=function(e){return ue.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(n,t)},ie.prototype.signWithMessageHash=function(e,t){var n=ne(ue.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Ve(this.doPrivate(n).toString(16),this.n.bitLength())},ie.prototype.signPSS=function(e,t,n){var r=function(e){return ue.crypto.Util.hashHex(e,t)}(Te(e));return void 0===n&&(n=-1),this.signWithMessageHashPSS(r,t,n)},ie.prototype.signWithMessageHashPSS=function(e,t,n){var r,i=we(e),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),c=function(e){return ue.crypto.Util.hashHex(e,t)};if(-1===n||void 0===n)n=o;else if(-2===n)n=a-o-2;else if(n<-2)throw new Error("invalid salt length");if(a<o+n+2)throw new Error("data too long");var u="";n>0&&(u=new Array(n),(new te).nextBytes(u),u=String.fromCharCode.apply(String,u));var l=we(c(Te("\0\0\0\0\0\0\0\0"+i+u))),d=[];for(r=0;r<a-n-o-2;r+=1)d[r]=0;var p=String.fromCharCode.apply(String,d)+""+u,f=qe(l,p.length,c),h=[];for(r=0;r<p.length;r+=1)h[r]=p.charCodeAt(r)^f.charCodeAt(r);var g=65280>>8*a-s&255;for(h[0]&=~g,r=0;r<o;r++)h.push(l.charCodeAt(r));return h.push(188),Ve(this.doPrivate(new w(h)).toString(16),this.n.bitLength())},ie.prototype.verify=function(e,t){var n=ne(t=(t=t.replace(We,"")).replace(/[ \n]+/g,""),16);if(n.bitLength()>this.n.bitLength())return 0;var r=Ke(this.doPublic(n).toString(16).replace(/^1f+00/,""));if(0==r.length)return!1;var i=r[0];return r[1]==function(e){return ue.crypto.Util.hashString(e,i)}(e)},ie.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var n=ne(t,16);if(n.bitLength()>this.n.bitLength())return 0;var r=Ke(this.doPublic(n).toString(16).replace(/^1f+00/,""));return 0!=r.length&&(r[0],r[1]==e)},ie.prototype.verifyPSS=function(e,t,n,r){var i=function(e){return ue.crypto.Util.hashHex(e,n)}(Te(e));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(i,t,n,r)},ie.prototype.verifyWithMessageHashPSS=function(e,t,n,r){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,o=new w(t,16),s=function(e){return ue.crypto.Util.hashHex(e,n)},a=we(e),c=a.length,u=this.n.bitLength()-1,l=Math.ceil(u/8);if(-1===r||void 0===r)r=c;else if(-2===r)r=l-c-2;else if(r<-2)throw new Error("invalid salt length");if(l<c+r+2)throw new Error("data too long");var d=this.doPublic(o).toByteArray();for(i=0;i<d.length;i+=1)d[i]&=255;for(;d.length<l;)d.unshift(0);if(188!==d[l-1])throw new Error("encoded message does not end in 0xbc");var p=(d=String.fromCharCode.apply(String,d)).substr(0,l-c-1),f=d.substr(p.length,c),h=65280>>8*l-u&255;if(p.charCodeAt(0)&h)throw new Error("bits beyond keysize not zero");var g=qe(f,p.length,s),m=[];for(i=0;i<p.length;i+=1)m[i]=p.charCodeAt(i)^g.charCodeAt(i);m[0]&=~h;var _=l-c-r-2;for(i=0;i<_;i+=1)if(0!==m[i])throw new Error("leftmost octets not zero");if(1!==m[_])throw new Error("0x01 marker not found");return f===we(s(Te("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,m.slice(-r)))))},ie.SALT_LEN_HLEN=-1,ie.SALT_LEN_MAX=-2,ie.SALT_LEN_RECOVER=-2,$e.hex2dn=function(e,t){if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed DN");for(var n=new Array,r=pe.getChildIdx(e,t),i=0;i<r.length;i++)n.push($e.hex2rdn(e,r[i]));return"/"+(n=n.map((function(e){return e.replace("/","\\/")}))).join("/")},$e.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var n=new Array,r=pe.getChildIdx(e,t),i=0;i<r.length;i++)n.push($e.hex2attrTypeValue(e,r[i]));return(n=n.map((function(e){return e.replace("+","\\+")}))).join("+")},$e.hex2attrTypeValue=function(e,t){var n=pe,r=n.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var i=n.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var o=r(e,i[0]),s=ue.asn1.ASN1Util.oidHexToInt(o);return ue.asn1.x509.OID.oid2atype(s)+"="+we(r(e,i[1]))},$e.getPublicKeyFromCertHex=function(e){var t=new $e;return t.readCertHex(e),t.getPublicKey()},$e.getPublicKeyFromCertPEM=function(e){var t=new $e;return t.readCertPEM(e),t.getPublicKey()},$e.getPublicKeyInfoPropOfCertPEM=function(e){var t,n,r=pe.getVbyList,i={algparam:null};return(t=new $e).readCertPEM(e),n=t.getPublicKeyHex(),i.keyhex=r(n,0,[1],"03").substr(2),i.algoid=r(n,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=r(n,0,[0,1],"06")),i},$e.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==ue&&ue||(t.KJUR=ue={}),void 0!==ue.jws&&ue.jws||(ue.jws={}),ue.jws.JWS=function(){var e=ue.jws.JWS.isSafeJSONString;this.parseJWS=function(t,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],o=r[2],s=r[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!n){var c=Se(s),u=ne(c,16);this.parsedJWS.sigvalH=c,this.parsedJWS.sigvalBI=u}var l=de(i),d=de(o);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=d,!e(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},ue.jws.JWS.sign=function(e,t,r,i,o){var s,a,c,u=ue,l=u.jws.JWS,d=l.readSafeJSONString,p=l.isSafeJSONString,f=u.crypto,h=(f.ECDSA,f.Mac),g=f.Signature,m=JSON;if("string"!=typeof t&&"object"!=(void 0===t?"undefined":n(t)))throw"spHeader must be JSON string or object: "+t;if("object"==(void 0===t?"undefined":n(t))&&(a=t,s=m.stringify(a)),"string"==typeof t){if(!p(s=t))throw"JWS Head is not safe JSON string: "+s;a=d(s)}if(c=r,"object"==(void 0===r?"undefined":n(r))&&(c=m.stringify(r)),""!=e&&null!=e||void 0===a.alg||(e=a.alg),""!=e&&null!=e&&void 0===a.alg&&(a.alg=e,s=m.stringify(a)),e!==a.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+a.alg;var _=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;_=l.jwsalg2sigalg[e];var v=le(s)+"."+le(c),y="";if("Hmac"==_.substr(0,4)){if(void 0===i)throw"mac key shall be specified for HS* alg";var S=new h({alg:_,prov:"cryptojs",pass:i});S.updateString(v),y=S.doFinal()}else if(-1!=_.indexOf("withECDSA")){(E=new g({alg:_})).init(i,o),E.updateString(v);var b=E.sign();y=ue.crypto.ECDSA.asn1SigToConcatSig(b)}else{var E;"none"!=_&&((E=new g({alg:_})).init(i,o),E.updateString(v),y=E.sign())}return v+"."+ye(y)},ue.jws.JWS.verify=function(e,t,r){var i,o=ue,s=o.jws.JWS,a=s.readSafeJSONString,c=o.crypto,u=c.ECDSA,l=c.Mac,d=c.Signature;void 0!==n(ie)&&(i=ie);var p=e.split(".");if(3!==p.length)return!1;var f,h=p[0]+"."+p[1],g=Se(p[2]),m=a(de(p[0])),_=null;if(void 0===m.alg)throw"algorithm not specified in header";if(f=(_=m.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0&&-1==(":"+r.join(":")+":").indexOf(":"+_+":"))throw"algorithm '"+_+"' not accepted in the list";if("none"!=_&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=He.getKey(t)),!("RS"!=f&&"PS"!=f||t instanceof i))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==f&&!(t instanceof u))throw"key shall be a ECDSA obj for ES* algs";var v=null;if(void 0===s.jwsalg2sigalg[m.alg])throw"unsupported alg name: "+_;if("none"==(v=s.jwsalg2sigalg[_]))throw"not supported";if("Hmac"==v.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var y=new l({alg:v,pass:t});return y.updateString(h),g==y.doFinal()}if(-1!=v.indexOf("withECDSA")){var S,b=null;try{b=u.concatSigToASN1Sig(g)}catch(e){return!1}return(S=new d({alg:v})).init(t),S.updateString(h),S.verify(b)}return(S=new d({alg:v})).init(t),S.updateString(h),S.verify(g)},ue.jws.JWS.parse=function(e){var t,n,r,i=e.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],n=i[1],3==i.length&&(r=i[2]),o.headerObj=ue.jws.JWS.readSafeJSONString(de(t)),o.payloadObj=ue.jws.JWS.readSafeJSONString(de(n)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=de(n):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==r&&(o.sigHex=Se(r)),o},ue.jws.JWS.verifyJWT=function(e,t,r){var i=ue.jws,o=i.JWS,s=o.readSafeJSONString,a=o.inArray,c=o.includedArray,u=e.split("."),l=u[0],d=u[1],p=(Se(u[2]),s(de(l))),f=s(de(d));if(void 0===p.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!a(p.alg,r.alg))return!1;if(void 0!==f.iss&&"object"===n(r.iss)&&!a(f.iss,r.iss))return!1;if(void 0!==f.sub&&"object"===n(r.sub)&&!a(f.sub,r.sub))return!1;if(void 0!==f.aud&&"object"===n(r.aud))if("string"==typeof f.aud){if(!a(f.aud,r.aud))return!1}else if("object"==n(f.aud)&&!c(f.aud,r.aud))return!1;var h=i.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(h=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==f.exp&&"number"==typeof f.exp&&f.exp+r.gracePeriod<h||void 0!==f.nbf&&"number"==typeof f.nbf&&h<f.nbf-r.gracePeriod||void 0!==f.iat&&"number"==typeof f.iat&&h<f.iat-r.gracePeriod||void 0!==f.jti&&void 0!==r.jti&&f.jti!==r.jti||!o.verify(e,t,r.alg))},ue.jws.JWS.includedArray=function(e,t){var r=ue.jws.JWS.inArray;if(null===e)return!1;if("object"!==(void 0===e?"undefined":n(e)))return!1;if("number"!=typeof e.length)return!1;for(var i=0;i<e.length;i++)if(!r(e[i],t))return!1;return!0},ue.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!==(void 0===t?"undefined":n(t)))return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},ue.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},ue.jws.JWS.isSafeJSONString=function(e,t,r){var i=null;try{return"object"!=(void 0===(i=ce(e))?"undefined":n(i))||i.constructor===Array?0:(t&&(t[r]=i),1)}catch(e){return 0}},ue.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=(void 0===(t=ce(e))?"undefined":n(t))||t.constructor===Array?null:t}catch(e){return null}},ue.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},ue.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var n=Te(t);return ye(ue.crypto.Util.hashHex(n,"sha256"))},ue.jws.IntDate={},ue.jws.IntDate.get=function(e){var t=ue.jws.IntDate,n=t.getNow,r=t.getZulu;if("now"==e)return n();if("now + 1hour"==e)return n()+3600;if("now + 1day"==e)return n()+86400;if("now + 1month"==e)return n()+2592e3;if("now + 1year"==e)return n()+31536e3;if(e.match(/Z$/))return r(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},ue.jws.IntDate.getZulu=function(e){return Re(e)},ue.jws.IntDate.getNow=function(){return~~(new Date/1e3)},ue.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},ue.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},t.SecureRandom=te,t.rng_seed_time=J,t.BigInteger=w,t.RSAKey=ie;var ze=ue.crypto.EDSA;t.EDSA=ze;var Ge=ue.crypto.DSA;t.DSA=Ge;var Je=ue.crypto.Signature;t.Signature=Je;var Ye=ue.crypto.MessageDigest;t.MessageDigest=Ye;var Xe=ue.crypto.Mac;t.Mac=Xe;var Ze=ue.crypto.Cipher;t.Cipher=Ze,t.KEYUTIL=He,t.ASN1HEX=pe,t.X509=$e,t.CryptoJS=_,t.b64tohex=b,t.b64toBA=E,t.stoBA=fe,t.BAtos=he,t.BAtohex=ge,t.stohex=me,t.stob64=function(e){return S(me(e))},t.stob64u=function(e){return _e(S(me(e)))},t.b64utos=function(e){return he(E(ve(e)))},t.b64tob64u=_e,t.b64utob64=ve,t.hex2b64=S,t.hextob64u=ye,t.b64utohex=Se,t.utf8tob64u=le,t.b64utoutf8=de,t.utf8tob64=function(e){return S(Oe(Le(e)))},t.b64toutf8=function(e){return decodeURIComponent(Pe(b(e)))},t.utf8tohex=be,t.hextoutf8=Ee,t.hextorstr=we,t.rstrtohex=Te,t.hextob64=Ie,t.hextob64nl=xe,t.b64nltohex=ke,t.hextopem=Ce,t.pemtohex=Ae,t.hextoArrayBuffer=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),n=new DataView(t),r=0;r<e.length/2;r++)n.setUint8(r,parseInt(e.substr(2*r,2),16));return t},t.ArrayBuffertohex=function(e){for(var t="",n=new DataView(e),r=0;r<e.byteLength;r++)t+=("00"+n.getUint8(r).toString(16)).slice(-2);return t},t.zulutomsec=Fe,t.zulutosec=Re,t.zulutodate=function(e){return new Date(Fe(e))},t.datetozulu=function(e,t,n){var r,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;r=(""+i).slice(-2)}else r=("000"+i).slice(-4);if(r+=("0"+(e.getUTCMonth()+1)).slice(-2),r+=("0"+e.getUTCDate()).slice(-2),r+=("0"+e.getUTCHours()).slice(-2),r+=("0"+e.getUTCMinutes()).slice(-2),r+=("0"+e.getUTCSeconds()).slice(-2),n){var o=e.getUTCMilliseconds();0!==o&&(r+="."+(o=(o=("00"+o).slice(-3)).replace(/0+$/g,"")))}return r+"Z"},t.uricmptohex=Oe,t.hextouricmp=Pe,t.ipv6tohex=Me,t.hextoipv6=Ne,t.hextoip=De,t.iptohex=function(e){var t="malformed IP address";if(!(e=e.toLowerCase(e)).match(/^[0-9.]+$/)){if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return Me(e);throw t}var n=e.split(".");if(4!==n.length)throw t;var r="";try{for(var i=0;i<4;i++)r+=("0"+parseInt(n[i]).toString(16)).slice(-2);return r}catch(e){throw t}},t.encodeURIComponentAll=Le,t.newline_toUnix=function(e){return e.replace(/\r\n/gm,"\n")},t.newline_toDos=function(e){return(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},t.hextoposhex=Be,t.intarystrtohex=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,n){var r=parseInt(e);if(r<0||255<r)throw"integer not in range 0-255";return("00"+r.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},t.strdiffidx=function(e,t){var n=e.length;e.length>t.length&&(n=t.length);for(var r=0;r<n;r++)if(e.charCodeAt(r)!=t.charCodeAt(r))return r;return e.length!=t.length?n:-1},t.KJUR=ue;var Qe=ue.crypto;t.crypto=Qe;var et=ue.asn1;t.asn1=et;var tt=ue.jws;t.jws=tt;var nt=ue.lang;t.lang=nt}).call(this,n(28).Buffer)},function(e,t,n){"use strict";(function(e){var r=n(30),i=n(31),o=n(32);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=a(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?a(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return F(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var d=!0,p=0;p<c;p++)if(u(e,o+p)!==u(t,p)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function S(e,t,n,r){return V(H(t,e.length-n),e,n,r)}function b(e,t,n,r){return V(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return b(e,t,n,r)}function w(e,t,n,r){return V(W(t),e,n,r)}function T(e,t,n,r){return V(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),d=0;d<a;++d)if(u[d]!==l[d]){o=u[d],s=l[d];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function F(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=j(e[o]);return i}function R(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:H(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function V(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(29))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=c(e),s=r[0],a=r[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,d=a>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[l++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,c=n-i;a<c;a+=s)o.push(u(e,a,a+s>c?c:a+s));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,d=n?i-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=p,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+d],d+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=u}return(f?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+f]=255&a,f+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+f]=255&s,f+=h,s/=256,u-=8);e[n+f-h]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.jws,n=e.KeyUtil,i=e.X509,o=e.crypto,s=e.hextob64u,a=e.b64tohex,c=e.AllowedSigningAlgs;return function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.parseJwt=function e(n){r.Log.debug("JoseUtil.parseJwt");try{var i=t.JWS.parse(n);return{header:i.headerObj,payload:i.payloadObj}}catch(e){r.Log.error(e)}},e.validateJwt=function(t,o,s,c,u,l,d){r.Log.debug("JoseUtil.validateJwt");try{if("RSA"===o.kty)if(o.e&&o.n)o=n.getKey(o);else{if(!o.x5c||!o.x5c.length)return r.Log.error("JoseUtil.validateJwt: RSA key missing key material",o),Promise.reject(new Error("RSA key missing key material"));var p=a(o.x5c[0]);o=i.getPublicKeyFromCertHex(p)}else{if("EC"!==o.kty)return r.Log.error("JoseUtil.validateJwt: Unsupported key type",o&&o.kty),Promise.reject(new Error(o.kty));if(!(o.crv&&o.x&&o.y))return r.Log.error("JoseUtil.validateJwt: EC key missing key material",o),Promise.reject(new Error("EC key missing key material"));o=n.getKey(o)}return e._validateJwt(t,o,s,c,u,l,d)}catch(e){return r.Log.error(e&&e.message||e),Promise.reject("JWT validation failed")}},e.validateJwtAttributes=function(t,n,i,o,s,a){o||(o=0),s||(s=parseInt(Date.now()/1e3));var c=e.parseJwt(t).payload;if(!c.iss)return r.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(c.iss!==n)return r.Log.error("JoseUtil._validateJwt: Invalid issuer in token",c.iss),Promise.reject(new Error("Invalid issuer in token: "+c.iss));if(!c.aud)return r.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(c.aud===i||Array.isArray(c.aud)&&c.aud.indexOf(i)>=0))return r.Log.error("JoseUtil._validateJwt: Invalid audience in token",c.aud),Promise.reject(new Error("Invalid audience in token: "+c.aud));if(c.azp&&c.azp!==i)return r.Log.error("JoseUtil._validateJwt: Invalid azp in token",c.azp),Promise.reject(new Error("Invalid azp in token: "+c.azp));if(!a){var u=s+o,l=s-o;if(!c.iat)return r.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(u<c.iat)return r.Log.error("JoseUtil._validateJwt: iat is in the future",c.iat),Promise.reject(new Error("iat is in the future: "+c.iat));if(c.nbf&&u<c.nbf)return r.Log.error("JoseUtil._validateJwt: nbf is in the future",c.nbf),Promise.reject(new Error("nbf is in the future: "+c.nbf));if(!c.exp)return r.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(c.exp<l)return r.Log.error("JoseUtil._validateJwt: exp is in the past",c.exp),Promise.reject(new Error("exp is in the past:"+c.exp))}return Promise.resolve(c)},e._validateJwt=function(n,i,o,s,a,u,l){return e.validateJwtAttributes(n,o,s,a,u,l).then((function(e){try{return t.JWS.verify(n,i,c)?e:(r.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(e){return r.Log.error(e&&e.message||e),Promise.reject(new Error("signature validation failed"))}}))},e.hashString=function e(t,n){try{return o.Util.hashString(t,n)}catch(e){r.Log.error(e)}},e.hexToBase64Url=function e(t){try{return s(t)}catch(e){r.Log.error(e)}},e}()};var r=n(0);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigninResponse=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(3);t.SigninResponse=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=i.UrlUtility.parseUrlFragment(t,n);this.error=r.error,this.error_description=r.error_description,this.error_uri=r.error_uri,this.code=r.code,this.state=r.state,this.id_token=r.id_token,this.session_state=r.session_state,this.access_token=r.access_token,this.token_type=r.token_type,this.scope=r.scope,this.profile=void 0,this.expires_in=r.expires_in}return r(e,[{key:"expires_in",get:function(){if(this.expires_at){var e=parseInt(Date.now()/1e3);return this.expires_at-e}},set:function(e){var t=parseInt(e);if("number"==typeof t&&t>0){var n=parseInt(Date.now()/1e3);this.expires_at=n+t}}},{key:"expired",get:function(){var e=this.expires_in;if(void 0!==e)return e<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutRequest=void 0;var r=n(0),i=n(3),o=n(9);t.SignoutRequest=function e(t){var n=t.url,s=t.id_token_hint,a=t.post_logout_redirect_uri,c=t.data,u=t.extraQueryParams,l=t.request_type;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!n)throw r.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var d in s&&(n=i.UrlUtility.addQueryParam(n,"id_token_hint",s)),a&&(n=i.UrlUtility.addQueryParam(n,"post_logout_redirect_uri",a),c&&(this.state=new o.State({data:c,request_type:l}),n=i.UrlUtility.addQueryParam(n,"state",this.state.id))),u)n=i.UrlUtility.addQueryParam(n,d,u[d]);this.url=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignoutResponse=void 0;var r=n(3);t.SignoutResponse=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r.UrlUtility.parseUrlFragment(t,"?");this.error=n.error,this.error_description=n.error_description,this.error_uri=n.error_uri,this.state=n.state}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryWebStorage=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.InMemoryWebStorage=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return e.prototype.getItem=function(e){return i.Log.debug("InMemoryWebStorage.getItem",e),this._data[e]},e.prototype.setItem=function(e,t){i.Log.debug("InMemoryWebStorage.setItem",e),this._data[e]=t},e.prototype.removeItem=function(e){i.Log.debug("InMemoryWebStorage.removeItem",e),delete this._data[e]},e.prototype.key=function(e){return Object.getOwnPropertyNames(this._data)[e]},r(e,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManager=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(10),s=n(39),a=n(15),c=n(45),u=n(47),l=n(18),d=n(8),p=n(20),f=n(11),h=n(4);t.UserManager=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.SilentRenewService,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.SessionMonitor,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.TokenRevocationClient,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.TokenClient,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.JoseUtil;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,t),n instanceof s.UserManagerSettings||(n=new s.UserManagerSettings(n));var m=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return m._events=new c.UserManagerEvents(n),m._silentRenewService=new r(m),m.settings.automaticSilentRenew&&(i.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),m.startSilentRenew()),m.settings.monitorSession&&(i.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),m._sessionMonitor=new o(m)),m._tokenRevocationClient=new a(m._settings),m._tokenClient=new d(m._settings),m._joseUtil=g,m}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getUser=function(){var e=this;return this._loadUser().then((function(t){return t?(i.Log.info("UserManager.getUser: user loaded"),e._events.load(t,!1),t):(i.Log.info("UserManager.getUser: user not found in storage"),null)}))},t.prototype.removeUser=function(){var e=this;return this.storeUser(null).then((function(){i.Log.info("UserManager.removeUser: user removed from storage"),e._events.unload()}))},t.prototype.signinRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:r";var t={useReplaceToNavigate:e.useReplaceToNavigate};return this._signinStart(e,this._redirectNavigator,t).then((function(){i.Log.info("UserManager.signinRedirect: successful")}))},t.prototype.signinRedirectCallback=function(e){return this._signinEnd(e||this._redirectNavigator.url).then((function(e){return e.profile&&e.profile.sub?i.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinRedirectCallback: no sub"),e}))},t.prototype.signinPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="si:p";var t=e.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.display="popup",this._signin(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopup: no sub")),e}))):(i.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},t.prototype.signinPopupCallback=function(e){return this._signinCallback(e,this._popupNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinPopupCallback: no sub")),e})).catch((function(e){i.Log.error(e.message)}))},t.prototype.signinSilent=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),this._loadUser().then((function(n){return n&&n.refresh_token?(t.refresh_token=n.refresh_token,e._useRefreshToken(t)):(t.request_type="si:s",t.id_token_hint=t.id_token_hint||e.settings.includeIdTokenInSilentRenew&&n&&n.id_token,n&&e._settings.validateSubOnSilentRenew&&(i.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",n.profile.sub),t.current_sub=n.profile.sub),e._signinSilentIframe(t))}))},t.prototype._useRefreshToken=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._tokenClient.exchangeRefreshToken(t).then((function(t){return t?t.access_token?e._loadUser().then((function(n){if(n){var r=Promise.resolve();return t.id_token&&(r=e._validateIdTokenFromTokenRefreshToken(n.profile,t.id_token)),r.then((function(){return i.Log.debug("UserManager._useRefreshToken: refresh token response success"),n.id_token=t.id_token||n.id_token,n.access_token=t.access_token,n.refresh_token=t.refresh_token||n.refresh_token,n.expires_in=t.expires_in,e.storeUser(n).then((function(){return e._events.load(n),n}))}))}return null})):(i.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(i.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))}))},t.prototype._validateIdTokenFromTokenRefreshToken=function(e,t){var n=this;return this._metadataService.getIssuer().then((function(r){return n.settings.getEpochTime().then((function(o){return n._joseUtil.validateJwtAttributes(t,r,n._settings.client_id,n._settings.clockSkew,o).then((function(t){return t?t.sub!==e.sub?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):t.auth_time&&t.auth_time!==e.auth_time?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):t.azp&&t.azp!==e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!t.azp&&e.azp?(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(i.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))}))}))}))},t.prototype._signinSilentIframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return t?(e.redirect_uri=t,e.prompt=e.prompt||"none",this._signin(e,this._iframeNavigator,{startUrl:t,silentRequestTimeout:e.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilent: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilent: no sub")),e}))):(i.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype.signinSilentCallback=function(e){return this._signinCallback(e,this._iframeNavigator).then((function(e){return e&&(e.profile&&e.profile.sub?i.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",e.profile.sub):i.Log.info("UserManager.signinSilentCallback: no sub")),e}))},t.prototype.signinCallback=function(e){var t=this;return this.readSigninResponseState(e).then((function(n){var r=n.state;return n.response,"si:r"===r.request_type?t.signinRedirectCallback(e):"si:p"===r.request_type?t.signinPopupCallback(e):"si:s"===r.request_type?t.signinSilentCallback(e):Promise.reject(new Error("invalid response_type in state"))}))},t.prototype.signoutCallback=function(e,t){var n=this;return this.readSignoutResponseState(e).then((function(r){var i=r.state,o=r.response;return i?"so:r"===i.request_type?n.signoutRedirectCallback(e):"so:p"===i.request_type?n.signoutPopupCallback(e,t):Promise.reject(new Error("invalid response_type in state")):o}))},t.prototype.querySessionStatus=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(t=Object.assign({},t)).request_type="si:s";var n=t.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return n?(t.redirect_uri=n,t.prompt="none",t.response_type=t.response_type||this.settings.query_status_response_type,t.scope=t.scope||"openid",t.skipUserInfo=!0,this._signinStart(t,this._iframeNavigator,{startUrl:n,silentRequestTimeout:t.silentRequestTimeout||this.settings.silentRequestTimeout}).then((function(t){return e.processSigninResponse(t.url).then((function(e){if(i.Log.debug("UserManager.querySessionStatus: got signin response"),e.session_state&&e.profile.sub)return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",e.profile.sub),{session_state:e.session_state,sub:e.profile.sub,sid:e.profile.sid};i.Log.info("querySessionStatus successful, user not authenticated")})).catch((function(t){if(t.session_state&&e.settings.monitorAnonymousSession&&("login_required"==t.message||"consent_required"==t.message||"interaction_required"==t.message||"account_selection_required"==t.message))return i.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:t.session_state};throw t}))}))):(i.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},t.prototype._signin=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signinStart(e,t,r).then((function(t){return n._signinEnd(t.url,e)}))},t.prototype._signinStart=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.prepare(r).then((function(t){return i.Log.debug("UserManager._signinStart: got navigator window handle"),n.createSigninRequest(e).then((function(e){return i.Log.debug("UserManager._signinStart: got signin request"),r.url=e.url,r.id=e.state.id,t.navigate(r)})).catch((function(e){throw t.close&&(i.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),t.close()),e}))}))},t.prototype._signinEnd=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(e).then((function(e){i.Log.debug("UserManager._signinEnd: got signin response");var r=new a.User(e);if(n.current_sub){if(n.current_sub!==r.profile.sub)return i.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",r.profile.sub),Promise.reject(new Error("login_required"));i.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return t.storeUser(r).then((function(){return i.Log.debug("UserManager._signinEnd: user stored"),t._events.load(r),r}))}))},t.prototype._signinCallback=function(e,t){i.Log.debug("UserManager._signinCallback");var n="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type)?"?":"#";return t.callback(e,void 0,n)},t.prototype.signoutRedirect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:r";var t=e.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;t&&(e.post_logout_redirect_uri=t);var n={useReplaceToNavigate:e.useReplaceToNavigate};return this._signoutStart(e,this._redirectNavigator,n).then((function(){i.Log.info("UserManager.signoutRedirect: successful")}))},t.prototype.signoutRedirectCallback=function(e){return this._signoutEnd(e||this._redirectNavigator.url).then((function(e){return i.Log.info("UserManager.signoutRedirectCallback: successful"),e}))},t.prototype.signoutPopup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).request_type="so:p";var t=e.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return e.post_logout_redirect_uri=t,e.display="popup",e.post_logout_redirect_uri&&(e.state=e.state||{}),this._signout(e,this._popupNavigator,{startUrl:t,popupWindowFeatures:e.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:e.popupWindowTarget||this.settings.popupWindowTarget}).then((function(){i.Log.info("UserManager.signoutPopup: successful")}))},t.prototype.signoutPopupCallback=function(e,t){return void 0===t&&"boolean"==typeof e&&(t=e,e=null),this._popupNavigator.callback(e,t,"?").then((function(){i.Log.info("UserManager.signoutPopupCallback: successful")}))},t.prototype._signout=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._signoutStart(e,t,r).then((function(e){return n._signoutEnd(e.url)}))},t.prototype._signoutStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(n).then((function(r){return i.Log.debug("UserManager._signoutStart: got navigator window handle"),t._loadUser().then((function(o){return i.Log.debug("UserManager._signoutStart: loaded current user from storage"),(t._settings.revokeAccessTokenOnSignout?t._revokeInternal(o):Promise.resolve()).then((function(){var s=e.id_token_hint||o&&o.id_token;return s&&(i.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),e.id_token_hint=s),t.removeUser().then((function(){return i.Log.debug("UserManager._signoutStart: user removed, creating signout request"),t.createSignoutRequest(e).then((function(e){return i.Log.debug("UserManager._signoutStart: got signout request"),n.url=e.url,e.state&&(n.id=e.state.id),r.navigate(n)}))}))}))})).catch((function(e){throw r.close&&(i.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),r.close()),e}))}))},t.prototype._signoutEnd=function(e){return this.processSignoutResponse(e).then((function(e){return i.Log.debug("UserManager._signoutEnd: got signout response"),e}))},t.prototype.revokeAccessToken=function(){var e=this;return this._loadUser().then((function(t){return e._revokeInternal(t,!0).then((function(n){if(n)return i.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),t.access_token=null,t.refresh_token=null,t.expires_at=null,t.token_type=null,e.storeUser(t).then((function(){i.Log.debug("UserManager.revokeAccessToken: user stored"),e._events.load(t)}))}))})).then((function(){i.Log.info("UserManager.revokeAccessToken: access token revoked successfully")}))},t.prototype._revokeInternal=function(e,t){var n=this;if(e){var r=e.access_token,o=e.refresh_token;return this._revokeAccessTokenInternal(r,t).then((function(e){return n._revokeRefreshTokenInternal(o,t).then((function(t){return e||t||i.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),e||t}))}))}return Promise.resolve(!1)},t.prototype._revokeAccessTokenInternal=function(e,t){return!e||e.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(e,t).then((function(){return!0}))},t.prototype._revokeRefreshTokenInternal=function(e,t){return e?this._tokenRevocationClient.revoke(e,t,"refresh_token").then((function(){return!0})):Promise.resolve(!1)},t.prototype.startSilentRenew=function(){this._silentRenewService.start()},t.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},t.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then((function(e){return e?(i.Log.debug("UserManager._loadUser: user storageString loaded"),a.User.fromStorageString(e)):(i.Log.debug("UserManager._loadUser: no user storageString"),null)}))},t.prototype.storeUser=function(e){if(e){i.Log.debug("UserManager.storeUser: storing user");var t=e.toStorageString();return this._userStore.set(this._userStoreKey,t)}return i.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},r(t,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),t}(o.OidcClient)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerSettings=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(0),n(5)),o=n(40),s=n(41),a=n(43),c=n(6),u=n(1),l=n(8);t.UserManagerSettings=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.popup_redirect_uri,i=n.popup_post_logout_redirect_uri,d=n.popupWindowFeatures,p=n.popupWindowTarget,f=n.silent_redirect_uri,h=n.silentRequestTimeout,g=n.automaticSilentRenew,m=void 0!==g&&g,_=n.validateSubOnSilentRenew,v=void 0!==_&&_,y=n.includeIdTokenInSilentRenew,S=void 0===y||y,b=n.monitorSession,E=void 0===b||b,w=n.monitorAnonymousSession,T=void 0!==w&&w,I=n.checkSessionInterval,x=void 0===I?2e3:I,k=n.stopCheckSessionOnError,C=void 0===k||k,A=n.query_status_response_type,F=n.revokeAccessTokenOnSignout,R=void 0!==F&&F,O=n.accessTokenExpiringNotificationTime,P=void 0===O?60:O,M=n.redirectNavigator,N=void 0===M?new o.RedirectNavigator:M,D=n.popupNavigator,L=void 0===D?new s.PopupNavigator:D,U=n.iframeNavigator,B=void 0===U?new a.IFrameNavigator:U,j=n.userStore,H=void 0===j?new c.WebStorageStateStore({store:u.Global.sessionStorage}):j;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var W=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,arguments[0]));return W._popup_redirect_uri=r,W._popup_post_logout_redirect_uri=i,W._popupWindowFeatures=d,W._popupWindowTarget=p,W._silent_redirect_uri=f,W._silentRequestTimeout=h,W._automaticSilentRenew=m,W._validateSubOnSilentRenew=v,W._includeIdTokenInSilentRenew=S,W._accessTokenExpiringNotificationTime=P,W._monitorSession=E,W._monitorAnonymousSession=T,W._checkSessionInterval=x,W._stopCheckSessionOnError=C,A?W._query_status_response_type=A:arguments[0]&&arguments[0].response_type?W._query_status_response_type=l.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":W._query_status_response_type="id_token",W._revokeAccessTokenOnSignout=R,W._redirectNavigator=N,W._popupNavigator=L,W._iframeNavigator=B,W._userStore=H,W}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),t}(i.OidcClientSettings)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectNavigator=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.RedirectNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(){return Promise.resolve(this)},e.prototype.navigate=function(e){return e&&e.url?(e.useReplaceToNavigate?window.location.replace(e.url):window.location=e.url,Promise.resolve()):(i.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},r(e,[{key:"url",get:function(){return window.location.href}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupNavigator=void 0;var r=n(0),i=n(42);t.PopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.PopupWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t,n,o){r.Log.debug("PopupNavigator.callback");try{return i.PopupWindow.notifyOpener(t,n,o),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PopupWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(3);t.PopupWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t}));var r=t.popupWindowTarget||"_blank",o=t.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;";this._popup=window.open("",r,o),this._popup&&(i.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return e.prototype.navigate=function(e){return this._popup?e&&e.url?(i.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=e.id,this._id&&(window["popupCallback_"+e.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=e.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},e.prototype._success=function(e){i.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(e)},e.prototype._error=function(e){i.Log.error("PopupWindow.error: ",e),this._cleanup(),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup(!1)},e.prototype._cleanup=function(e){i.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!e&&this._popup.close(),this._popup=null},e.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},e.prototype._callback=function(e,t){this._cleanup(t),e?(i.Log.debug("PopupWindow.callback success"),this._success({url:e})):(i.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},e.notifyOpener=function(e,t,n){if(window.opener){if(e=e||window.location.href){var r=o.UrlUtility.parseUrlFragment(e,n);if(r.state){var s="popupCallback_"+r.state,a=window.opener[s];a?(i.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),a(e,t)):i.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else i.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else i.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},r(e,[{key:"promise",get:function(){return this._promise}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameNavigator=void 0;var r=n(0),i=n(44);t.IFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new i.IFrameWindow(e);return Promise.resolve(t)},e.prototype.callback=function e(t){r.Log.debug("IFrameNavigator.callback");try{return i.IFrameWindow.notifyParent(t),Promise.resolve()}catch(e){return Promise.reject(e)}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFrameWindow=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);t.IFrameWindow=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t})),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return e.prototype.navigate=function(e){if(e&&e.url){var t=e.silentRequestTimeout||1e4;i.Log.debug("IFrameWindow.navigate: Using timeout of:",t),this._timer=window.setTimeout(this._timeout.bind(this),t),this._frame.src=e.url}else this._error("No url provided");return this.promise},e.prototype._success=function(e){this._cleanup(),i.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(e)},e.prototype._error=function(e){this._cleanup(),i.Log.error(e),this._reject(new Error(e))},e.prototype.close=function(){this._cleanup()},e.prototype._cleanup=function(){this._frame&&(i.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},e.prototype._timeout=function(){i.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},e.prototype._message=function(e){if(i.Log.debug("IFrameWindow.message"),this._timer&&e.origin===this._origin&&e.source===this._frame.contentWindow&&"string"==typeof e.data&&(e.data.startsWith("http://")||e.data.startsWith("https://"))){var t=e.data;t?this._success({url:t}):this._error("Invalid response from frame")}},e.notifyParent=function(e){i.Log.debug("IFrameWindow.notifyParent"),(e=e||window.location.href)&&(i.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(e,location.protocol+"//"+location.host))},r(e,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserManagerEvents=void 0;var r=n(0),i=n(16),o=n(17);t.UserManagerEvents=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r._userLoaded=new o.Event("User loaded"),r._userUnloaded=new o.Event("User unloaded"),r._silentRenewError=new o.Event("Silent renew error"),r._userSignedIn=new o.Event("User signed in"),r._userSignedOut=new o.Event("User signed out"),r._userSessionChanged=new o.Event("User session changed"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.load=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.Log.debug("UserManagerEvents.load"),e.prototype.load.call(this,t),n&&this._userLoaded.raise(t)},t.prototype.unload=function(){r.Log.debug("UserManagerEvents.unload"),e.prototype.unload.call(this),this._userUnloaded.raise()},t.prototype.addUserLoaded=function(e){this._userLoaded.addHandler(e)},t.prototype.removeUserLoaded=function(e){this._userLoaded.removeHandler(e)},t.prototype.addUserUnloaded=function(e){this._userUnloaded.addHandler(e)},t.prototype.removeUserUnloaded=function(e){this._userUnloaded.removeHandler(e)},t.prototype.addSilentRenewError=function(e){this._silentRenewError.addHandler(e)},t.prototype.removeSilentRenewError=function(e){this._silentRenewError.removeHandler(e)},t.prototype._raiseSilentRenewError=function(e){r.Log.debug("UserManagerEvents._raiseSilentRenewError",e.message),this._silentRenewError.raise(e)},t.prototype.addUserSignedIn=function(e){this._userSignedIn.addHandler(e)},t.prototype.removeUserSignedIn=function(e){this._userSignedIn.removeHandler(e)},t.prototype._raiseUserSignedIn=function(){r.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},t.prototype.addUserSignedOut=function(e){this._userSignedOut.addHandler(e)},t.prototype.removeUserSignedOut=function(e){this._userSignedOut.removeHandler(e)},t.prototype._raiseUserSignedOut=function(){r.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},t.prototype.addUserSessionChanged=function(e){this._userSessionChanged.addHandler(e)},t.prototype.removeUserSessionChanged=function(e){this._userSessionChanged.removeHandler(e)},t.prototype._raiseUserSessionChanged=function(){r.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},t}(i.AccessTokenEvents)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(1),s=n(17);t.Timer=function(e){function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.Global.timer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return s._timer=r,s._nowFunc=i||function(){return Date.now()/1e3},s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.init=function(e){e<=0&&(e=1),e=parseInt(e);var t=this.now+e;if(this.expiration===t&&this._timerHandle)i.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),i.Log.debug("Timer.init timer "+this._name+" for duration:",e),this._expiration=t;var n=5;e<n&&(n=e),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*n)}},t.prototype.cancel=function(){this._timerHandle&&(i.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},t.prototype._callback=function(){var t=this._expiration-this.now;i.Log.debug("Timer.callback; "+this._name+" timer expires in:",t),this._expiration<=this.now&&(this.cancel(),e.prototype.raise.call(this))},r(t,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),t}(s.Event)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SilentRenewService=void 0;var r=n(0);t.SilentRenewService=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userManager=t}return e.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then((function(e){})).catch((function(e){r.Log.error("SilentRenewService.start: Error from getUser:",e.message)})))},e.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},e.prototype._tokenExpiring=function(){var e=this;this._userManager.signinSilent().then((function(e){r.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")}),(function(t){r.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",t.message),e._userManager.events._raiseSilentRenewError(t)}))},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaPopupNavigator=void 0;var r=n(21);t.CordovaPopupNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){var t=new r.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CordovaIFrameNavigator=void 0;var r=n(21);t.CordovaIFrameNavigator=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.prototype.prepare=function(e){e.popupWindowFeatures="hidden=yes";var t=new r.CordovaPopupWindow(e);return Promise.resolve(t)},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.11.5"}])},e.exports=t()},3920:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Analytics=void 0;const i=n(4860),o=n(1832);t.Analytics=class{static identifyUser(){return r(this,void 0,void 0,(function*(){const e=yield i.LoadIdentity.getUserFromStorage();e&&window.analytics.identify(e.profile.livedata_id.toString(),{last_premises:e.profile.premises,last_is_mobile:o.Device.isMobile()})}))}static inSubjectPanel(e){return null!==e.closest(".mini-subject-panel")}static sendButtonClickedEvent(e,t,n,s){return r(this,void 0,void 0,(function*(){const r=yield i.LoadIdentity.getUserFromStorage();if(!r)return;const a={action:"button_clicked",choice:e,is_science_member:yield i.LoadIdentity.canSeeScience(),user_id:r.profile.livedata_id.toString(),is_mobile:o.Device.isMobile(),is_mobile_app:o.Device.isNativeApp(),subject:t,identity_premises:r.profile.premises,in_subject_panel:!!s&&this.inSubjectPanel(s)};window.AnalyticsNext?window.analytics.track("Launcher Interaction",a,n):n&&n()}))}static sendHoverEvent(e,t,n,s){return r(this,void 0,void 0,(function*(){const r=yield i.LoadIdentity.getUserFromStorage();if(!r)return;const a={action:"hovered",choice:e,user_id:r.profile.livedata_id.toString(),is_mobile:o.Device.isMobile(),is_mobile_app:o.Device.isNativeApp(),subject:t,identity_premises:r.profile.premises,in_subject_panel:this.inSubjectPanel(n)};window.AnalyticsNext?window.analytics.track("Launcher Interaction",a,s):s&&s()}))}static sendNavigatedAwayEvent(e){return r(this,void 0,void 0,(function*(){const t=yield i.LoadIdentity.getUserID();if(!t)return void e();const n={action:"navigated_away",user_id:t};window.analytics.track("Launcher Interaction",n,(()=>{window.analytics.reset(),e()}))}))}static sendOnPageLoaded(){var e;return r(this,void 0,void 0,(function*(){const t=yield i.LoadIdentity.getUserFromStorage(),n={action:"page_loaded",identity_premises:null===(e=null==t?void 0:t.profile)||void 0===e?void 0:e.premises,is_mobile_app:o.Device.isNativeApp(),is_mobile:o.Device.isMobile()};window.analytics.page("Launcher Interaction",n)}))}static sendExperimentVariation(e,t){return r(this,void 0,void 0,(function*(){const n=yield i.LoadIdentity.getUserID();if(!n)return;const r={experiment_id:e,variation_id:t.toString(),user_id:n};window.analytics.track("Experiment Variation Assigned",r)}))}}},1832:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0;const r=n(6565);t.Device=class{static getOS(){const e=window.navigator.userAgent,t=window.navigator.platform;let n="Unknown";return-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(t)?n="macOS":-1!==["iPhone","iPad","iPod"].indexOf(t)?n="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(t)?n="Windows":/Android/.test(e)&&(n="Android"),n}static isNativeApp(){return"1"===r.Utils.getUrlVar("nativeApp")}static isMobile(){var e;if(window.matchMedia&&"function"==typeof window.matchMedia)return null===(e=window.matchMedia("(hover: none)"))||void 0===e?void 0:e.matches}}},1477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorModal=void 0;t.ErrorModal=class{constructor(e,t,n,r){this._header=e,this._message=t,this._ctaLabel=n,this._callback=r,this.init()}init(){var e;this.getModalHeader().innerHTML=this._header,this.getModalMessage().innerHTML=this._message,this.getAcceptCTA().innerHTML=null!==(e=this._ctaLabel)&&void 0!==e?e:"Okay",this.bindAcceptCTACallback()}getAcceptCTA(){return this.getModalElement(".modal-accept")}getErrorModalHTML(){var e;return null!==(e=document.querySelector("#error-modal"))&&void 0!==e?e:document.createElement("span")}getModalElement(e){var t;return null!==(t=document.querySelector(e))&&void 0!==t?t:document.createElement("span")}getModalHeader(){return this.getModalElement(".modal-title")}getModalMessage(){return this.getModalElement(".modal-message")}bindAcceptCTACallback(){const e=this.getAcceptCTA();this._callback?e.onclick=e=>{e.preventDefault(),this._callback(e),this.hide()}:e.onclick=e=>{e.preventDefault(),this.hide()}}show(){const e=this.getErrorModalHTML();e&&(e.style.visibility="visible")}hide(){const e=this.getErrorModalHTML();e&&(e.style.visibility="hidden")}}},9962:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorReporting=void 0;const s=o(n(1962));t.ErrorReporting=class{static init(){const e={attachStacktrace:!0,sampleRate:window.sentrySampleRate,tracesSampleRate:window.sentryTracesSampleRate},t=Object.assign({dsn:window.sentryURL,integrations:[s.replayIntegration({maskAllText:!1,blockAllMedia:!1}),..."sentry"===window.errorPlatform?[s.browserTracingIntegration()]:[]],replaysSessionSampleRate:window.sentryReplaysSessionSampleRate,replaysOnErrorSampleRate:window.sentryReplaysOnErrorSampleRate},"sentry"===window.errorPlatform?e:{});s.init(t)}static logError(e){"sentry"===window.errorPlatform&&s.captureException(e)}}},216:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Experiments=void 0;const i=n(6438),o=n(9962),s=n(4860),a=n(6565),c=n(3920);t.Experiments=class{static checkUI(){var e;return r(this,void 0,void 0,(function*(){const t="launcher-new-ui",n=yield s.LoadIdentity.getUserID();if(n)try{const r={apiHost:window.experimentsAPIHost,clientKey:window.experimentsClientKey,attributes:{id:n},trackingCallback:(e,n)=>{c.Analytics.sendExperimentVariation(t,n.variationId)}},o=i.FeatureFactory.createFeatureProvider(i.EFeatureProvider.growthBook,r);yield o.loadFeatures();1===(null!==(e=o.getVariation(t))&&void 0!==e?e:0)?a.Utils.renderDifferentSizeButtonsLayout():a.Utils.renderSameSizeButtonsLayout()}catch(e){a.Utils.renderDifferentSizeButtonsLayout(),o.ErrorReporting.logError(e)}}))}}},4860:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadIdentity=void 0;const i=n(1170),o=n(5250);n(3166),n(1051),n(143);const s=n(3920),a=n(9962),c=n(216),u=n(2697),l=n(6565);class d{static init(e,t,n,i,o,p){return r(this,void 0,void 0,(function*(){a.ErrorReporting.init(),yield u.OidcUserManager.initManager(e,n,i,o);const r=document.getElementById("launcher");try{if(r&&(r.style.display="block"),yield u.OidcUserManager.oidcClient.signinCallback(),yield s.Analytics.identifyUser().catch((e=>{a.ErrorReporting.logError(e),window.analytics.reset()})),yield s.Analytics.sendOnPageLoaded(),(yield d.canSeeScience())&&(yield d.showScience(),(yield d.canSeeNewBadge())&&(yield d.showNewBadge())),t&&""!==t)return void(yield d.redirectToGame(t));yield d.insertUserAvatar(),yield d.updateUserInfoLabels(),l.Utils.showGameButtons(),yield c.Experiments.checkUI()}catch(e){a.ErrorReporting.logError(e),window.location.replace("/")}}))}static clientPublisherMiddleware(e,t){return r(this,void 0,void 0,(function*(){try{const n=!0===window.forceEnableClientEventSends||"true"===window.shouldSendToClientEventPublisher,r=e.raw,i="track"===r.type,o="identify"===r.type,s="page"===r.type,c={track:"t",page:"p",identify:"i"};if(n&&window.clientEventPublisherUrl&&(i||o||s)){const e=Object.assign(Object.assign({},r),{projectId:"game-launcher-events"});fetch(`${window.clientEventPublisherUrl}/${c[r.type]}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch((e=>{a.ErrorReporting.logError(e)}))}(i||o||s)&&"true"===window.shouldSendToSegment&&t(e)}catch(n){a.ErrorReporting.logError(n),t(e)}}))}static fetchGraphqlData(e,t,n,i){return r(this,void 0,void 0,(function*(){const r=yield d.getUserFromStorage();if(!r)return;const o={"Content-Type":"application/json","apollographql-client-name":"prodigy-game-launcher",Authorization:`Bearer ${r.access_token}`},s=JSON.stringify({query:t,operationName:n});try{const t=yield fetch(e,{method:"POST",headers:Object.assign(Object.assign({},o),i),body:s});t.ok||a.ErrorReporting.logError(`HTTP error! status: ${t.status}`);return yield t.json()}catch(e){a.ErrorReporting.logError(e)}}))}static redirectToIdentity(e,t,n){try{a.ErrorReporting.init();const r=l.Utils.getUrlVars(window.location.search),i=l.Utils.getUri(n),o=u.OidcUserManager.getIdentityUserManager(i,r,e,t);o.clearStaleState().catch((e=>{a.ErrorReporting.logError(e)})),o.signinRedirect().catch((e=>{a.ErrorReporting.logError(e)}))}catch(e){a.ErrorReporting.logError(e)}}static redirectToGame(e,t,n){return r(this,void 0,void 0,(function*(){const i=yield d.getUserFromStorage();if(!i)return;const o=i.access_token,a=i.refresh_token,c=i.profile,u=l.Utils.getUri(e);"english"===t?yield s.Analytics.sendButtonClickedEvent("english_game","ELA",(()=>r(this,void 0,void 0,(function*(){yield l.Utils.redirect(u,o,a,c,"ELA")}))),n):"science"===t?yield s.Analytics.sendButtonClickedEvent("math_game","SCIENCE",(()=>r(this,void 0,void 0,(function*(){yield l.Utils.redirect(u,o,a,c,"SCIENCE")}))),n):yield s.Analytics.sendButtonClickedEvent("math_game","MATH",(()=>r(this,void 0,void 0,(function*(){yield l.Utils.redirect(u,o,a,c,"MATH")}))),n)}))}static getAnalytics(){return s.Analytics}static getUserFromStorage(){return r(this,void 0,void 0,(function*(){try{const e=yield u.OidcUserManager.getUser();if(!e)return a.ErrorReporting.logError("Can't fetch user information when redirecting to game"),null;return{id_token:e.id_token,refresh_token:e.refresh_token||"",access_token:e.access_token,profile:e.profile}}catch(e){return a.ErrorReporting.logError(e),null}}))}static getUserID(){var e,t;return r(this,void 0,void 0,(function*(){const n=yield d.getUserFromStorage();return(null===(t=null===(e=null==n?void 0:n.profile)||void 0===e?void 0:e.livedata_id)||void 0===t?void 0:t.toString())||null}))}static getPassword(){var e;return r(this,void 0,void 0,(function*(){const t=yield d.getUserFromStorage();return(null===(e=null==t?void 0:t.profile)||void 0===e?void 0:e.password)||""}))}static getUsername(){return r(this,void 0,void 0,(function*(){const e=yield d.getUserFromStorage();return(null==e?void 0:e.profile.username)||""}))}static getName(){return r(this,void 0,void 0,(function*(){const e=yield d.getUserFromStorage();return(null==e?void 0:e.profile.name)||""}))}static getInitials(){return r(this,void 0,void 0,(function*(){const e=yield d.getUsername(),t=e.match(/\p{Lu}/gu)||[""],n=e.match(/\p{Ll}/gu)||[""];return[t.shift()||n.shift()||e.split("").shift()||"N",t.shift()||n.shift()||e.split("").shift()||"A"].join("").toUpperCase()}))}static updateUserInfoLabels(){return r(this,void 0,void 0,(function*(){const e=Array.from(document.getElementsByClassName("user-label")),t=yield d.getUsername();e.forEach((e=>{const n=document.createElement("span");n.classList.add("username"),n.textContent=t,e.append(n)}));const n=Array.from(document.getElementsByClassName("password-label")),r=yield d.getPassword();n.forEach((e=>{const t=document.createElement("span");t.textContent=r,e.append(t)}));const i=Array.from(document.getElementsByClassName("user-firstname")),o=(yield d.getName()).split(" ")[0];i.forEach((e=>{const t=document.createElement("span");t.textContent=o,e.prepend(t)}))}))}static insertUserAvatar(){var e,t;return r(this,void 0,void 0,(function*(){const n=Array.from(document.getElementsByClassName("avatar-container"));if(0===n.length)return;const r=yield d.getUserFromStorage(),i=(null===(e=null==r?void 0:r.profile)||void 0===e?void 0:e.avatar_url)||"",o=(null===(t=null==r?void 0:r.profile)||void 0===t?void 0:t.avatar_colour)||"#FFEBAF",s=yield d.getInitials();n.forEach((e=>{if(e.style.backgroundColor=o,i){const t=document.createElement("img");t.classList.add("user-avatar"),t.src=i,t.style.backgroundColor=o,e.append(t)}else e.textContent=s;e.setAttribute("data-show","data-show")}))}))}static togglePopper(){return r(this,void 0,void 0,(function*(){const e=document.getElementById("menu-dropdown-popup");if(null!==e)if(this.menuPopup)e.removeAttribute("data-show"),this.menuPopup.destroy(),this.menuPopup=void 0;else{const t=document.getElementById("menu-arrow-down-wrapper");t&&e&&(this.menuPopup=(0,i.createPopper)(t,e,{placement:"bottom",modifiers:[{name:"arrow"},{name:"offset",options:{offset:[-45,4]}}]})),e.setAttribute("data-show","data-show")}}))}static logout(){return r(this,void 0,void 0,(function*(){window.leaving=!0,yield u.OidcUserManager.oidcClient.clearStaleState(),yield s.Analytics.sendNavigatedAwayEvent((()=>null)),yield u.OidcUserManager.oidcClient.signoutRedirect()}))}static initAndLogout(e,t,n,i){return r(this,void 0,void 0,(function*(){const r=new URL(t),o=new URLSearchParams(window.location.search);["nativeApp","mobilePlatform","mathUrl","elaUrl","game"].forEach((e=>{o.forEach(((t,n)=>{e===n&&r.searchParams.set(n,t)}))})),yield u.OidcUserManager.initManager(e,r.toString(),n,i),yield d.logout()}))}static canSeeScience(){return r(this,void 0,void 0,(function*(){return(yield d.fetchGraphqlData(window.graphqlUrl,"query getScienceAvailability {\n            viewer {\n                hasAvailableSubject(subject: SCIENCE)\n            }\n        }","getScienceAvailability")).data.viewer.hasAvailableSubject}))}static canSeeNewBadge(){return r(this,void 0,void 0,(function*(){const e=new Date,t=new Date("2025-01-01");return e.getTime()<t.getTime()}))}static showNewBadge(){var e;return r(this,void 0,void 0,(function*(){const t=document.getElementById("new-subject-badge");null===(e=null==t?void 0:t.classList)||void 0===e||e.remove("hide")}))}static showScience(){var e,t,n,i,o,s,a,c,u,l;return r(this,void 0,void 0,(function*(){const r=document.getElementById("game-button-text-math"),d=document.getElementById("math-play-button"),p=document.getElementById("math-and-science-panel"),f=document.getElementById("math-game-button"),h=document.getElementById("play-button-math"),g=document.getElementById("play-button-science"),m=document.getElementById("math-game-label"),_=document.getElementById("subject-panel-math");null===(e=null==p?void 0:p.classList)||void 0===e||e.add("with-science"),null===(t=null==d?void 0:d.classList)||void 0===t||t.add("hide"),null===(n=null==f?void 0:f.removeAttribute)||void 0===n||n.call(f,"onclick"),null===(i=null==f?void 0:f.removeAttribute)||void 0===i||i.call(f,"onkeyup"),null===(o=null==f?void 0:f.removeAttribute)||void 0===o||o.call(f,"onfocus"),null===(s=null==f?void 0:f.removeAttribute)||void 0===s||s.call(f,"onmouseover"),r&&(r.textContent="Play Math/Science Game"),m&&(m.textContent="Math/Science"),null===(a=null==f?void 0:f.addEventListener)||void 0===a||a.call(f,"keyup",(e=>{var t;"Enter"!==(null==e?void 0:e.code)&&"Space"!==(null==e?void 0:e.code)||(null===(t=null==p?void 0:p.setAttribute)||void 0===t||t.call(p,"style","visibility:visible;"),null==_||_.focus())})),window.matchMedia("(hover: none)").matches&&(null===(c=null==h?void 0:h.setAttribute)||void 0===c||c.call(h,"style","display:none;"),null===(u=null==g?void 0:g.setAttribute)||void 0===u||u.call(g,"style","display:none;"),null===(l=null==f?void 0:f.addEventListener)||void 0===l||l.call(f,"click",(()=>{var e,t;null===(e=null==h?void 0:h.setAttribute)||void 0===e||e.call(h,"style","display:flex;"),null===(t=null==g?void 0:g.setAttribute)||void 0===t||t.call(g,"style","display:flex;")})))}))}}t.LoadIdentity=d,d.canSeeScience=(0,o.once)(d.canSeeScience)},2697:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OidcUserManager=void 0;const o=i(n(2968));t.OidcUserManager=class{static get oidcClient(){return this._client}static initManager(e,t,n,i){return r(this,void 0,void 0,(function*(){this._client=new o.default.UserManager({response_mode:"query",userStore:new o.default.WebStorageStateStore({store:window.sessionStorage}),stateStore:new o.default.WebStorageStateStore({store:window.sessionStorage}),authority:n,client_id:i,post_logout_redirect_uri:t,clockSkew:e})}))}static getIdentityUserManager(e,t,n,r){return new o.default.UserManager({userStore:new o.default.WebStorageStateStore({store:window.sessionStorage}),stateStore:new o.default.WebStorageStateStore({store:window.sessionStorage}),authority:n,client_id:r,scope:"openid profile email livedata_id sid identity_provider premises avatar password",redirect_uri:e,response_type:"code",automaticSilentRenew:!0,extraQueryParams:{mobilePlatform:t.mobilePlatform,identityExperiment:t.identityExperiment,signup:t.signup}})}static getUser(){return r(this,void 0,void 0,(function*(){return this.oidcClient.getUser()}))}}},6565:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=n(9962),o=n(1477),s=n(1832);class a{static getUrlVar(e){return new URLSearchParams(window.location.search).get(e)}static getUrlVars(e){const t={};return new URLSearchParams(e).forEach(((e,n)=>{e.includes(" ")||(t[n]=e)})),t}static appendLauncherParam(e,t){const n=new URL(e),r=new URLSearchParams(n.search);return r.has("launcher")||r.append("launcher","true"),t&&r.append("code",t),n.search=r.toString(),n.toString()}static redirect(e,t,n,s,c){return r(this,void 0,void 0,(function*(){try{if(!a.hasSelectedGame){a.hasSelectedGame=!0,window.leaving=!0;const r=window.clientId,i=window.identityUri,o=new Headers;o.append("Content-Type","application/json");const u=yield fetch(`${window.cortexUrl}/game-cortex-server/v1/coreGame.setSession`,{method:"POST",credentials:"include",headers:o,redirect:"follow",body:JSON.stringify({identity_token:t,refresh_token:n,profile:s,clientId:r,identityUri:i,subject:c})}),l=yield u.json();if(l){const t=a.appendLauncherParam(e,l.code);location.replace(t)}}}catch(e){a.hasSelectedGame=!1,i.ErrorReporting.logError(e);const t="Error!",n="An error happened while redirecting to the game. Please try again soon.",r="Okay";new o.ErrorModal(t,n,r).show()}}))}static getCombinedURLWithParams(e,...t){const[n,r]=e.split("?"),i=a.getUrlVars(r),o=Object.assign(i,...t),s=Object.keys(o).map((e=>`${e}=${o[e]}`));return{uri:`${n}${s.length?`?${s.join("&")}`:""}`,params:o,host:n}}static getUri(e){const t=a.getUrlVars(window.location.search),n=["code","state"];for(const e of n)t[e]&&delete t[e];s.Device.isNativeApp()&&!t.mobilePlatform&&(t.mobilePlatform=s.Device.getOS().toLowerCase());const{uri:r}=a.getCombinedURLWithParams(e,t);return r}static showGameButtons(){document.querySelectorAll(".game-button-container").forEach((e=>{e.style.display="block"}))}static renderDifferentSizeButtonsLayout(){const e=document.querySelector("#experiment");e?e.style.display="block":this.renderSameSizeButtonsLayout()}static renderSameSizeButtonsLayout(){document.querySelector("#bau").style.display="block";const e=document.querySelector("#experiment");e&&(e.style.display="none")}}t.Utils=a,a.hasSelectedGame=!1},1170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{afterMain:()=>E,afterRead:()=>y,afterWrite:()=>I,applyStyles:()=>O,arrow:()=>Z,auto:()=>a,basePlacements:()=>c,beforeMain:()=>S,beforeRead:()=>_,beforeWrite:()=>w,bottom:()=>i,clippingParents:()=>d,computeStyles:()=>ne,createPopper:()=>Oe,createPopperBase:()=>Re,createPopperLite:()=>Pe,detectOverflow:()=>ve,end:()=>l,eventListeners:()=>ie,flip:()=>ye,hide:()=>Ee,left:()=>s,main:()=>b,modifierPhases:()=>x,offset:()=>we,placements:()=>m,popper:()=>f,popperGenerator:()=>Fe,popperOffsets:()=>Te,preventOverflow:()=>Ie,read:()=>v,reference:()=>h,right:()=>o,start:()=>u,top:()=>r,variationPlacements:()=>g,viewport:()=>p,write:()=>T});var r="top",i="bottom",o="right",s="left",a="auto",c=[r,i,o,s],u="start",l="end",d="clippingParents",p="viewport",f="popper",h="reference",g=c.reduce((function(e,t){return e.concat([t+"-"+u,t+"-"+l])}),[]),m=[].concat(c,[a]).reduce((function(e,t){return e.concat([t,t+"-"+u,t+"-"+l])}),[]),_="beforeRead",v="read",y="afterRead",S="beforeMain",b="main",E="afterMain",w="beforeWrite",T="write",I="afterWrite",x=[_,v,y,S,b,E,w,T,I];function k(e){return e?(e.nodeName||"").toLowerCase():null}function C(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function A(e){return e instanceof C(e).Element||e instanceof Element}function F(e){return e instanceof C(e).HTMLElement||e instanceof HTMLElement}function R(e){return"undefined"!=typeof ShadowRoot&&(e instanceof C(e).ShadowRoot||e instanceof ShadowRoot)}const O={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];F(i)&&k(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],i=t.attributes[e]||{},o=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});F(r)&&k(r)&&(Object.assign(r.style,o),Object.keys(i).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};function P(e){return e.split("-")[0]}var M=Math.max,N=Math.min,D=Math.round;function L(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function U(){return!/^((?!chrome|android).)*safari/i.test(L())}function B(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&F(e)&&(i=e.offsetWidth>0&&D(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&D(r.height)/e.offsetHeight||1);var s=(A(e)?C(e):window).visualViewport,a=!U()&&n,c=(r.left+(a&&s?s.offsetLeft:0))/i,u=(r.top+(a&&s?s.offsetTop:0))/o,l=r.width/i,d=r.height/o;return{width:l,height:d,top:u,right:c+l,bottom:u+d,left:c,x:c,y:u}}function j(e){var t=B(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function H(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&R(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function W(e){return C(e).getComputedStyle(e)}function V(e){return["table","td","th"].indexOf(k(e))>=0}function q(e){return((A(e)?e.ownerDocument:e.document)||window.document).documentElement}function K(e){return"html"===k(e)?e:e.assignedSlot||e.parentNode||(R(e)?e.host:null)||q(e)}function $(e){return F(e)&&"fixed"!==W(e).position?e.offsetParent:null}function z(e){for(var t=C(e),n=$(e);n&&V(n)&&"static"===W(n).position;)n=$(n);return n&&("html"===k(n)||"body"===k(n)&&"static"===W(n).position)?t:n||function(e){var t=/firefox/i.test(L());if(/Trident/i.test(L())&&F(e)&&"fixed"===W(e).position)return null;var n=K(e);for(R(n)&&(n=n.host);F(n)&&["html","body"].indexOf(k(n))<0;){var r=W(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}function G(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function J(e,t,n){return M(e,N(t,n))}function Y(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function X(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}const Z={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,a=e.name,u=e.options,l=n.elements.arrow,d=n.modifiersData.popperOffsets,p=P(n.placement),f=G(p),h=[s,o].indexOf(p)>=0?"height":"width";if(l&&d){var g=function(e,t){return Y("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:X(e,c))}(u.padding,n),m=j(l),_="y"===f?r:s,v="y"===f?i:o,y=n.rects.reference[h]+n.rects.reference[f]-d[f]-n.rects.popper[h],S=d[f]-n.rects.reference[f],b=z(l),E=b?"y"===f?b.clientHeight||0:b.clientWidth||0:0,w=y/2-S/2,T=g[_],I=E-m[h]-g[v],x=E/2-m[h]/2+w,k=J(T,x,I),C=f;n.modifiersData[a]=((t={})[C]=k,t.centerOffset=k-x,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&H(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Q(e){return e.split("-")[1]}var ee={top:"auto",right:"auto",bottom:"auto",left:"auto"};function te(e){var t,n=e.popper,a=e.popperRect,c=e.placement,u=e.variation,d=e.offsets,p=e.position,f=e.gpuAcceleration,h=e.adaptive,g=e.roundOffsets,m=e.isFixed,_=d.x,v=void 0===_?0:_,y=d.y,S=void 0===y?0:y,b="function"==typeof g?g({x:v,y:S}):{x:v,y:S};v=b.x,S=b.y;var E=d.hasOwnProperty("x"),w=d.hasOwnProperty("y"),T=s,I=r,x=window;if(h){var k=z(n),A="clientHeight",F="clientWidth";if(k===C(n)&&"static"!==W(k=q(n)).position&&"absolute"===p&&(A="scrollHeight",F="scrollWidth"),c===r||(c===s||c===o)&&u===l)I=i,S-=(m&&k===x&&x.visualViewport?x.visualViewport.height:k[A])-a.height,S*=f?1:-1;if(c===s||(c===r||c===i)&&u===l)T=o,v-=(m&&k===x&&x.visualViewport?x.visualViewport.width:k[F])-a.width,v*=f?1:-1}var R,O=Object.assign({position:p},h&&ee),P=!0===g?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:D(t*r)/r||0,y:D(n*r)/r||0}}({x:v,y:S}):{x:v,y:S};return v=P.x,S=P.y,f?Object.assign({},O,((R={})[I]=w?"0":"",R[T]=E?"0":"",R.transform=(x.devicePixelRatio||1)<=1?"translate("+v+"px, "+S+"px)":"translate3d("+v+"px, "+S+"px, 0)",R)):Object.assign({},O,((t={})[I]=w?S+"px":"",t[T]=E?v+"px":"",t.transform="",t))}const ne={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,c=void 0===a||a,u={placement:P(t.placement),variation:Q(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,te(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,te(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var re={passive:!0};const ie={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=void 0===i||i,s=r.resize,a=void 0===s||s,c=C(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&u.forEach((function(e){e.addEventListener("scroll",n.update,re)})),a&&c.addEventListener("resize",n.update,re),function(){o&&u.forEach((function(e){e.removeEventListener("scroll",n.update,re)})),a&&c.removeEventListener("resize",n.update,re)}},data:{}};var oe={left:"right",right:"left",bottom:"top",top:"bottom"};function se(e){return e.replace(/left|right|bottom|top/g,(function(e){return oe[e]}))}var ae={start:"end",end:"start"};function ce(e){return e.replace(/start|end/g,(function(e){return ae[e]}))}function ue(e){var t=C(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function le(e){return B(q(e)).left+ue(e).scrollLeft}function de(e){var t=W(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function pe(e){return["html","body","#document"].indexOf(k(e))>=0?e.ownerDocument.body:F(e)&&de(e)?e:pe(K(e))}function fe(e,t){var n;void 0===t&&(t=[]);var r=pe(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=C(r),s=i?[o].concat(o.visualViewport||[],de(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(fe(K(s)))}function he(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function ge(e,t,n){return t===p?he(function(e,t){var n=C(e),r=q(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;var u=U();(u||!u&&"fixed"===t)&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a+le(e),y:c}}(e,n)):A(t)?function(e,t){var n=B(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):he(function(e){var t,n=q(e),r=ue(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=M(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=M(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+le(e),c=-r.scrollTop;return"rtl"===W(i||n).direction&&(a+=M(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}(q(e)))}function me(e,t,n,r){var i="clippingParents"===t?function(e){var t=fe(K(e)),n=["absolute","fixed"].indexOf(W(e).position)>=0&&F(e)?z(e):e;return A(n)?t.filter((function(e){return A(e)&&H(e,n)&&"body"!==k(e)})):[]}(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce((function(t,n){var i=ge(e,n,r);return t.top=M(i.top,t.top),t.right=N(i.right,t.right),t.bottom=N(i.bottom,t.bottom),t.left=M(i.left,t.left),t}),ge(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function _e(e){var t,n=e.reference,a=e.element,c=e.placement,d=c?P(c):null,p=c?Q(c):null,f=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2;switch(d){case r:t={x:f,y:n.y-a.height};break;case i:t={x:f,y:n.y+n.height};break;case o:t={x:n.x+n.width,y:h};break;case s:t={x:n.x-a.width,y:h};break;default:t={x:n.x,y:n.y}}var g=d?G(d):null;if(null!=g){var m="y"===g?"height":"width";switch(p){case u:t[g]=t[g]-(n[m]/2-a[m]/2);break;case l:t[g]=t[g]+(n[m]/2-a[m]/2)}}return t}function ve(e,t){void 0===t&&(t={});var n=t,s=n.placement,a=void 0===s?e.placement:s,u=n.strategy,l=void 0===u?e.strategy:u,g=n.boundary,m=void 0===g?d:g,_=n.rootBoundary,v=void 0===_?p:_,y=n.elementContext,S=void 0===y?f:y,b=n.altBoundary,E=void 0!==b&&b,w=n.padding,T=void 0===w?0:w,I=Y("number"!=typeof T?T:X(T,c)),x=S===f?h:f,k=e.rects.popper,C=e.elements[E?x:S],F=me(A(C)?C:C.contextElement||q(e.elements.popper),m,v,l),R=B(e.elements.reference),O=_e({reference:R,element:k,strategy:"absolute",placement:a}),P=he(Object.assign({},k,O)),M=S===f?P:R,N={top:F.top-M.top+I.top,bottom:M.bottom-F.bottom+I.bottom,left:F.left-M.left+I.left,right:M.right-F.right+I.right},D=e.modifiersData.offset;if(S===f&&D){var L=D[a];Object.keys(N).forEach((function(e){var t=[o,i].indexOf(e)>=0?1:-1,n=[r,i].indexOf(e)>=0?"y":"x";N[e]+=L[n]*t}))}return N}const ye={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,l=e.name;if(!t.modifiersData[l]._skip){for(var d=n.mainAxis,p=void 0===d||d,f=n.altAxis,h=void 0===f||f,_=n.fallbackPlacements,v=n.padding,y=n.boundary,S=n.rootBoundary,b=n.altBoundary,E=n.flipVariations,w=void 0===E||E,T=n.allowedAutoPlacements,I=t.options.placement,x=P(I),k=_||(x===I||!w?[se(I)]:function(e){if(P(e)===a)return[];var t=se(e);return[ce(e),t,ce(t)]}(I)),C=[I].concat(k).reduce((function(e,n){return e.concat(P(n)===a?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,u=n.allowedAutoPlacements,l=void 0===u?m:u,d=Q(r),p=d?a?g:g.filter((function(e){return Q(e)===d})):c,f=p.filter((function(e){return l.indexOf(e)>=0}));0===f.length&&(f=p);var h=f.reduce((function(t,n){return t[n]=ve(e,{placement:n,boundary:i,rootBoundary:o,padding:s})[P(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}(t,{placement:n,boundary:y,rootBoundary:S,padding:v,flipVariations:w,allowedAutoPlacements:T}):n)}),[]),A=t.rects.reference,F=t.rects.popper,R=new Map,O=!0,M=C[0],N=0;N<C.length;N++){var D=C[N],L=P(D),U=Q(D)===u,B=[r,i].indexOf(L)>=0,j=B?"width":"height",H=ve(t,{placement:D,boundary:y,rootBoundary:S,altBoundary:b,padding:v}),W=B?U?o:s:U?i:r;A[j]>F[j]&&(W=se(W));var V=se(W),q=[];if(p&&q.push(H[L]<=0),h&&q.push(H[W]<=0,H[V]<=0),q.every((function(e){return e}))){M=D,O=!1;break}R.set(D,q)}if(O)for(var K=function(e){var t=C.find((function(t){var n=R.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return M=t,"break"},$=w?3:1;$>0;$--){if("break"===K($))break}t.placement!==M&&(t.modifiersData[l]._skip=!0,t.placement=M,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Se(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function be(e){return[r,o,i,s].some((function(t){return e[t]>=0}))}const Ee={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=ve(t,{elementContext:"reference"}),a=ve(t,{altBoundary:!0}),c=Se(s,r),u=Se(a,i,o),l=be(c),d=be(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":d})}};const we={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,a=n.offset,c=void 0===a?[0,0]:a,u=m.reduce((function(e,n){return e[n]=function(e,t,n){var i=P(e),a=[s,r].indexOf(i)>=0?-1:1,c="function"==typeof n?n(Object.assign({},t,{placement:e})):n,u=c[0],l=c[1];return u=u||0,l=(l||0)*a,[s,o].indexOf(i)>=0?{x:l,y:u}:{x:u,y:l}}(n,t.rects,c),e}),{}),l=u[t.placement],d=l.x,p=l.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=p),t.modifiersData[i]=u}};const Te={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=_e({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}};const Ie={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,a=e.name,c=n.mainAxis,l=void 0===c||c,d=n.altAxis,p=void 0!==d&&d,f=n.boundary,h=n.rootBoundary,g=n.altBoundary,m=n.padding,_=n.tether,v=void 0===_||_,y=n.tetherOffset,S=void 0===y?0:y,b=ve(t,{boundary:f,rootBoundary:h,padding:m,altBoundary:g}),E=P(t.placement),w=Q(t.placement),T=!w,I=G(E),x="x"===I?"y":"x",k=t.modifiersData.popperOffsets,C=t.rects.reference,A=t.rects.popper,F="function"==typeof S?S(Object.assign({},t.rects,{placement:t.placement})):S,R="number"==typeof F?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(k){if(l){var L,U="y"===I?r:s,B="y"===I?i:o,H="y"===I?"height":"width",W=k[I],V=W+b[U],q=W-b[B],K=v?-A[H]/2:0,$=w===u?C[H]:A[H],Y=w===u?-A[H]:-C[H],X=t.elements.arrow,Z=v&&X?j(X):{width:0,height:0},ee=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},te=ee[U],ne=ee[B],re=J(0,C[H],Z[H]),ie=T?C[H]/2-K-re-te-R.mainAxis:$-re-te-R.mainAxis,oe=T?-C[H]/2+K+re+ne+R.mainAxis:Y+re+ne+R.mainAxis,se=t.elements.arrow&&z(t.elements.arrow),ae=se?"y"===I?se.clientTop||0:se.clientLeft||0:0,ce=null!=(L=null==O?void 0:O[I])?L:0,ue=W+oe-ce,le=J(v?N(V,W+ie-ce-ae):V,W,v?M(q,ue):q);k[I]=le,D[I]=le-W}if(p){var de,pe="x"===I?r:s,fe="x"===I?i:o,he=k[x],ge="y"===x?"height":"width",me=he+b[pe],_e=he-b[fe],ye=-1!==[r,s].indexOf(E),Se=null!=(de=null==O?void 0:O[x])?de:0,be=ye?me:he-C[ge]-A[ge]-Se+R.altAxis,Ee=ye?he+C[ge]+A[ge]-Se-R.altAxis:_e,we=v&&ye?function(e,t,n){var r=J(e,t,n);return r>n?n:r}(be,he,Ee):J(v?be:me,he,v?Ee:_e);k[x]=we,D[x]=we-he}t.modifiersData[a]=D}},requiresIfExists:["offset"]};function xe(e,t,n){void 0===n&&(n=!1);var r,i,o=F(t),s=F(t)&&function(e){var t=e.getBoundingClientRect(),n=D(t.width)/e.offsetWidth||1,r=D(t.height)/e.offsetHeight||1;return 1!==n||1!==r}(t),a=q(t),c=B(e,s,n),u={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(o||!o&&!n)&&(("body"!==k(t)||de(a))&&(u=(r=t)!==C(r)&&F(r)?{scrollLeft:(i=r).scrollLeft,scrollTop:i.scrollTop}:ue(r)),F(t)?((l=B(t,!0)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=le(a))),{x:c.left+u.scrollLeft-l.x,y:c.top+u.scrollTop-l.y,width:c.width,height:c.height}}function ke(e){var t=new Map,n=new Set,r=[];function i(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&i(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||i(e)})),r}var Ce={placement:"bottom",modifiers:[],strategy:"absolute"};function Ae(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Fe(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,i=t.defaultOptions,o=void 0===i?Ce:i;return function(e,t,n){void 0===n&&(n=o);var i,s,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ce,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],u=!1,l={state:a,setOptions:function(n){var i="function"==typeof n?n(a.options):n;d(),a.options=Object.assign({},o,a.options,i),a.scrollParents={reference:A(e)?fe(e):e.contextElement?fe(e.contextElement):[],popper:fe(t)};var s=function(e){var t=ke(e);return x.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,a.options.modifiers)));return a.orderedModifiers=s.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,i=e.effect;if("function"==typeof i){var o=i({state:a,name:t,instance:l,options:r}),s=function(){};c.push(o||s)}})),l.update()},forceUpdate:function(){if(!u){var e=a.elements,t=e.reference,n=e.popper;if(Ae(t,n)){a.rects={reference:xe(t,z(n),"fixed"===a.options.strategy),popper:j(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<a.orderedModifiers.length;r++)if(!0!==a.reset){var i=a.orderedModifiers[r],o=i.fn,s=i.options,c=void 0===s?{}:s,d=i.name;"function"==typeof o&&(a=o({state:a,options:c,name:d,instance:l})||a)}else a.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(e){l.forceUpdate(),e(a)}))},function(){return s||(s=new Promise((function(e){Promise.resolve().then((function(){s=void 0,e(i())}))}))),s}),destroy:function(){d(),u=!0}};if(!Ae(e,t))return l;function d(){c.forEach((function(e){return e()})),c=[]}return l.setOptions(n).then((function(e){!u&&n.onFirstUpdate&&n.onFirstUpdate(e)})),l}}var Re=Fe(),Oe=Fe({defaultModifiers:[ie,Te,ne,O,we,ye,Ie,Z,Ee]}),Pe=Fe({defaultModifiers:[ie,Te,ne,O]})}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r=n(4860);Launcher=r})();
