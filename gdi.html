<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bytebeat Sound and Chaos Simulation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: black;
            overflow: hidden;
        }
        canvas {
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>

<canvas id="chaosCanvas"></canvas>
<audio id="bytebeatAudio" loop></audio>

<script>
    const canvas = document.getElementById('chaosCanvas');
    const ctx = canvas.getContext('2d');
    const audio = document.getElementById('bytebeatAudio');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Generate random colors
    function randomColor() {
        const r = Math.floor(Math.random() * 256);
        const g = Math.floor(Math.random() * 256);
        const b = Math.floor(Math.random() * 256);
        return `rgb(${r},${g},${b})`;
    }

    // Bytebeat sound function
    function bytebeat(t) {
        return 2 * t * (t & 16384 ? 6 : 5) * (4 - (3 & (t >> 8))) >> (3 & -t >> (t & 4096 ? 2 : 15)) |
               t >> (t & 8192 ? (t & 4096 ? 4 : 5) : 3);
    }

    // Create audio buffer with bytebeat sound
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const bufferSize = audioContext.sampleRate;
    const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
    const data = buffer.getChannelData(0);

    for (let i = 0; i < bufferSize; i++) {
        const t = i;
        data[i] = bytebeat(t) / 32767; // Normalize to [-1, 1]
    }

    // Create audio source
    const source = audioContext.createBufferSource();
    source.buffer = buffer;
    source.connect(audioContext.destination);
    source.start();

    // Function to draw random shapes
    function drawRandomShapes() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let i = 0; i < 30; i++) {
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            const size = Math.random() * 100 + 20; // Random size

            ctx.fillStyle = randomColor();
            ctx.beginPath();
            ctx.arc(x, y, size / 2, 0, Math.PI * 2);
            ctx.fill();
        }

        // Tearing effect
        for (let i = 0; i < 10; i++) {
            const y = Math.random() * canvas.height;
            ctx.strokeStyle = randomColor();
            ctx.lineWidth = Math.random() * 5 + 1;
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y + Math.random() * 50 - 25);
            ctx.stroke();
        }

        requestAnimationFrame(drawRandomShapes);
    }

    // Start drawing and playing audio
    drawRandomShapes();

    // Resize canvas on window resize
    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
</script>

</body>
</html>
